(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function s(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=s(a);fetch(a.href,u)}})();function no(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function yp(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var n=l.default;if(typeof n=="function"){var s=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(l).forEach(function(i){var a=Object.getOwnPropertyDescriptor(l,i);Object.defineProperty(s,i,a.get?a:{enumerable:!0,get:function(){return l[i]}})}),s}var Ka={exports:{}},Ns={},Ga={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ud;function wp(){if(ud)return le;ud=1;var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,E={};function x(j,A,oe){this.props=j,this.context=A,this.refs=E,this.updater=oe||T}x.prototype.isReactComponent={},x.prototype.setState=function(j,A){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,A,"setState")},x.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function I(){}I.prototype=x.prototype;function O(j,A,oe){this.props=j,this.context=A,this.refs=E,this.updater=oe||T}var R=O.prototype=new I;R.constructor=O,L(R,x.prototype),R.isPureReactComponent=!0;var z=Array.isArray,re=Object.prototype.hasOwnProperty,q={current:null},te={key:!0,ref:!0,__self:!0,__source:!0};function se(j,A,oe){var ae,he={},fe=null,ke=null;if(A!=null)for(ae in A.ref!==void 0&&(ke=A.ref),A.key!==void 0&&(fe=""+A.key),A)re.call(A,ae)&&!te.hasOwnProperty(ae)&&(he[ae]=A[ae]);var ce=arguments.length-2;if(ce===1)he.children=oe;else if(1<ce){for(var we=Array(ce),ze=0;ze<ce;ze++)we[ze]=arguments[ze+2];he.children=we}if(j&&j.defaultProps)for(ae in ce=j.defaultProps,ce)he[ae]===void 0&&(he[ae]=ce[ae]);return{$$typeof:l,type:j,key:fe,ref:ke,props:he,_owner:q.current}}function Se(j,A){return{$$typeof:l,type:j.type,key:A,ref:j.ref,props:j.props,_owner:j._owner}}function H(j){return typeof j=="object"&&j!==null&&j.$$typeof===l}function be(j){var A={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(oe){return A[oe]})}var de=/\/+/g;function Fe(j,A){return typeof j=="object"&&j!==null&&j.key!=null?be(""+j.key):A.toString(36)}function Pe(j,A,oe,ae,he){var fe=typeof j;(fe==="undefined"||fe==="boolean")&&(j=null);var ke=!1;if(j===null)ke=!0;else switch(fe){case"string":case"number":ke=!0;break;case"object":switch(j.$$typeof){case l:case n:ke=!0}}if(ke)return ke=j,he=he(ke),j=ae===""?"."+Fe(ke,0):ae,z(he)?(oe="",j!=null&&(oe=j.replace(de,"$&/")+"/"),Pe(he,A,oe,"",function(ze){return ze})):he!=null&&(H(he)&&(he=Se(he,oe+(!he.key||ke&&ke.key===he.key?"":(""+he.key).replace(de,"$&/")+"/")+j)),A.push(he)),1;if(ke=0,ae=ae===""?".":ae+":",z(j))for(var ce=0;ce<j.length;ce++){fe=j[ce];var we=ae+Fe(fe,ce);ke+=Pe(fe,A,oe,we,he)}else if(we=b(j),typeof we=="function")for(j=we.call(j),ce=0;!(fe=j.next()).done;)fe=fe.value,we=ae+Fe(fe,ce++),ke+=Pe(fe,A,oe,we,he);else if(fe==="object")throw A=String(j),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return ke}function Ye(j,A,oe){if(j==null)return j;var ae=[],he=0;return Pe(j,ae,"","",function(fe){return A.call(oe,fe,he++)}),ae}function Le(j){if(j._status===-1){var A=j._result;A=A(),A.then(function(oe){(j._status===0||j._status===-1)&&(j._status=1,j._result=oe)},function(oe){(j._status===0||j._status===-1)&&(j._status=2,j._result=oe)}),j._status===-1&&(j._status=0,j._result=A)}if(j._status===1)return j._result.default;throw j._result}var me={current:null},F={transition:null},X={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:F,ReactCurrentOwner:q};function B(){throw Error("act(...) is not supported in production builds of React.")}return le.Children={map:Ye,forEach:function(j,A,oe){Ye(j,function(){A.apply(this,arguments)},oe)},count:function(j){var A=0;return Ye(j,function(){A++}),A},toArray:function(j){return Ye(j,function(A){return A})||[]},only:function(j){if(!H(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},le.Component=x,le.Fragment=s,le.Profiler=a,le.PureComponent=O,le.StrictMode=i,le.Suspense=g,le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,le.act=B,le.cloneElement=function(j,A,oe){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var ae=L({},j.props),he=j.key,fe=j.ref,ke=j._owner;if(A!=null){if(A.ref!==void 0&&(fe=A.ref,ke=q.current),A.key!==void 0&&(he=""+A.key),j.type&&j.type.defaultProps)var ce=j.type.defaultProps;for(we in A)re.call(A,we)&&!te.hasOwnProperty(we)&&(ae[we]=A[we]===void 0&&ce!==void 0?ce[we]:A[we])}var we=arguments.length-2;if(we===1)ae.children=oe;else if(1<we){ce=Array(we);for(var ze=0;ze<we;ze++)ce[ze]=arguments[ze+2];ae.children=ce}return{$$typeof:l,type:j.type,key:he,ref:fe,props:ae,_owner:ke}},le.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:u,_context:j},j.Consumer=j},le.createElement=se,le.createFactory=function(j){var A=se.bind(null,j);return A.type=j,A},le.createRef=function(){return{current:null}},le.forwardRef=function(j){return{$$typeof:p,render:j}},le.isValidElement=H,le.lazy=function(j){return{$$typeof:y,_payload:{_status:-1,_result:j},_init:Le}},le.memo=function(j,A){return{$$typeof:v,type:j,compare:A===void 0?null:A}},le.startTransition=function(j){var A=F.transition;F.transition={};try{j()}finally{F.transition=A}},le.unstable_act=B,le.useCallback=function(j,A){return me.current.useCallback(j,A)},le.useContext=function(j){return me.current.useContext(j)},le.useDebugValue=function(){},le.useDeferredValue=function(j){return me.current.useDeferredValue(j)},le.useEffect=function(j,A){return me.current.useEffect(j,A)},le.useId=function(){return me.current.useId()},le.useImperativeHandle=function(j,A,oe){return me.current.useImperativeHandle(j,A,oe)},le.useInsertionEffect=function(j,A){return me.current.useInsertionEffect(j,A)},le.useLayoutEffect=function(j,A){return me.current.useLayoutEffect(j,A)},le.useMemo=function(j,A){return me.current.useMemo(j,A)},le.useReducer=function(j,A,oe){return me.current.useReducer(j,A,oe)},le.useRef=function(j){return me.current.useRef(j)},le.useState=function(j){return me.current.useState(j)},le.useSyncExternalStore=function(j,A,oe){return me.current.useSyncExternalStore(j,A,oe)},le.useTransition=function(){return me.current.useTransition()},le.version="18.3.1",le}var cd;function Ds(){return cd||(cd=1,Ga.exports=wp()),Ga.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dd;function xp(){if(dd)return Ns;dd=1;var l=Ds(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(p,g,v){var y,w={},b=null,T=null;v!==void 0&&(b=""+v),g.key!==void 0&&(b=""+g.key),g.ref!==void 0&&(T=g.ref);for(y in g)i.call(g,y)&&!u.hasOwnProperty(y)&&(w[y]=g[y]);if(p&&p.defaultProps)for(y in g=p.defaultProps,g)w[y]===void 0&&(w[y]=g[y]);return{$$typeof:n,type:p,key:b,ref:T,props:w,_owner:a.current}}return Ns.Fragment=s,Ns.jsx=h,Ns.jsxs=h,Ns}var hd;function _p(){return hd||(hd=1,Ka.exports=xp()),Ka.exports}var f=_p(),Y=Ds();const Zd=no(Y);var Ki={},Qa={exports:{}},dt={},Ja={exports:{}},Ya={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fd;function kp(){return fd||(fd=1,(function(l){function n(F,X){var B=F.length;F.push(X);e:for(;0<B;){var j=B-1>>>1,A=F[j];if(0<a(A,X))F[j]=X,F[B]=A,B=j;else break e}}function s(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],B=F.pop();if(B!==X){F[0]=B;e:for(var j=0,A=F.length,oe=A>>>1;j<oe;){var ae=2*(j+1)-1,he=F[ae],fe=ae+1,ke=F[fe];if(0>a(he,B))fe<A&&0>a(ke,he)?(F[j]=ke,F[fe]=B,j=fe):(F[j]=he,F[ae]=B,j=ae);else if(fe<A&&0>a(ke,B))F[j]=ke,F[fe]=B,j=fe;else break e}}return X}function a(F,X){var B=F.sortIndex-X.sortIndex;return B!==0?B:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;l.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();l.unstable_now=function(){return h.now()-p}}var g=[],v=[],y=1,w=null,b=3,T=!1,L=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(F){for(var X=s(v);X!==null;){if(X.callback===null)i(v);else if(X.startTime<=F)i(v),X.sortIndex=X.expirationTime,n(g,X);else break;X=s(v)}}function z(F){if(E=!1,R(F),!L)if(s(g)!==null)L=!0,Le(re);else{var X=s(v);X!==null&&me(z,X.startTime-F)}}function re(F,X){L=!1,E&&(E=!1,I(se),se=-1),T=!0;var B=b;try{for(R(X),w=s(g);w!==null&&(!(w.expirationTime>X)||F&&!be());){var j=w.callback;if(typeof j=="function"){w.callback=null,b=w.priorityLevel;var A=j(w.expirationTime<=X);X=l.unstable_now(),typeof A=="function"?w.callback=A:w===s(g)&&i(g),R(X)}else i(g);w=s(g)}if(w!==null)var oe=!0;else{var ae=s(v);ae!==null&&me(z,ae.startTime-X),oe=!1}return oe}finally{w=null,b=B,T=!1}}var q=!1,te=null,se=-1,Se=5,H=-1;function be(){return!(l.unstable_now()-H<Se)}function de(){if(te!==null){var F=l.unstable_now();H=F;var X=!0;try{X=te(!0,F)}finally{X?Fe():(q=!1,te=null)}}else q=!1}var Fe;if(typeof O=="function")Fe=function(){O(de)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Ye=Pe.port2;Pe.port1.onmessage=de,Fe=function(){Ye.postMessage(null)}}else Fe=function(){x(de,0)};function Le(F){te=F,q||(q=!0,Fe())}function me(F,X){se=x(function(){F(l.unstable_now())},X)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(F){F.callback=null},l.unstable_continueExecution=function(){L||T||(L=!0,Le(re))},l.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<F?Math.floor(1e3/F):5},l.unstable_getCurrentPriorityLevel=function(){return b},l.unstable_getFirstCallbackNode=function(){return s(g)},l.unstable_next=function(F){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var B=b;b=X;try{return F()}finally{b=B}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var B=b;b=F;try{return X()}finally{b=B}},l.unstable_scheduleCallback=function(F,X,B){var j=l.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?j+B:j):B=j,F){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=B+A,F={id:y++,callback:X,priorityLevel:F,startTime:B,expirationTime:A,sortIndex:-1},B>j?(F.sortIndex=B,n(v,F),s(g)===null&&F===s(v)&&(E?(I(se),se=-1):E=!0,me(z,B-j))):(F.sortIndex=A,n(g,F),L||T||(L=!0,Le(re))),F},l.unstable_shouldYield=be,l.unstable_wrapCallback=function(F){var X=b;return function(){var B=b;b=X;try{return F.apply(this,arguments)}finally{b=B}}}})(Ya)),Ya}var pd;function bp(){return pd||(pd=1,Ja.exports=kp()),Ja.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md;function Sp(){if(md)return dt;md=1;var l=Ds(),n=bp();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function u(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(a[e]=t,e=0;e<t.length;e++)i.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function b(e){return g.call(w,e)?!0:g.call(y,e)?!1:v.test(e)?w[e]=!0:(y[e]=!0,!1)}function T(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L(e,t,r,o){if(t===null||typeof t>"u"||T(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function E(e,t,r,o,c,d,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=m}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new E(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(I,O);x[t]=new E(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(I,O);x[t]=new E(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(I,O);x[t]=new E(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function R(e,t,r,o){var c=x.hasOwnProperty(t)?x[t]:null;(c!==null?c.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(L(t,r,c,o)&&(r=null),o||c===null?b(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,o=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var z=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),q=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),be=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Ye=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),F=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var B=Object.assign,j;function A(e){if(j===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return`
`+j+e}var oe=!1;function ae(e,t){if(!e||oe)return"";oe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(P){var o=P}Reflect.construct(e,[],t)}else{try{t.call()}catch(P){o=P}e.call(t.prototype)}else{try{throw Error()}catch(P){o=P}e()}}catch(P){if(P&&o&&typeof P.stack=="string"){for(var c=P.stack.split(`
`),d=o.stack.split(`
`),m=c.length-1,_=d.length-1;1<=m&&0<=_&&c[m]!==d[_];)_--;for(;1<=m&&0<=_;m--,_--)if(c[m]!==d[_]){if(m!==1||_!==1)do if(m--,_--,0>_||c[m]!==d[_]){var k=`
`+c[m].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=m&&0<=_);break}}}finally{oe=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?A(e):""}function he(e){switch(e.tag){case 5:return A(e.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 2:case 15:return e=ae(e.type,!1),e;case 11:return e=ae(e.type.render,!1),e;case 1:return e=ae(e.type,!0),e;default:return""}}function fe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case te:return"Fragment";case q:return"Portal";case Se:return"Profiler";case se:return"StrictMode";case Fe:return"Suspense";case Pe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case be:return(e.displayName||"Context")+".Consumer";case H:return(e._context.displayName||"Context")+".Provider";case de:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ye:return t=e.displayName||null,t!==null?t:fe(e.type)||"Memo";case Le:t=e._payload,e=e._init;try{return fe(e(t))}catch{}}return null}function ke(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(t);case 8:return t===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ce(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function we(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ze(e){var t=we(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){o=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(m){o=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function er(e){e._valueTracker||(e._valueTracker=ze(e))}function Mn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=we(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function Yr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Q(e,t){var r=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ye(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=ce(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function De(e,t){t=t.checked,t!=null&&R(e,"checked",t,!1)}function nt(e,t){De(e,t);var r=ce(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wt(e,t.type,r):t.hasOwnProperty("defaultValue")&&Wt(e,t.type,ce(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Wt(e,t,r){(t!=="number"||Yr(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Nr=Array.isArray;function tr(e,t,r,o){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&o&&(e[r].defaultSelected=!0)}else{for(r=""+ce(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Xr(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Fn(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(Nr(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ce(r)}}function zn(e,t){var r=ce(t.value),o=ce(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function Tr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bn(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wn,Vn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wn=Wn||document.createElement("div"),Wn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rr(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ao=["Webkit","ms","Moz","O"];Object.keys(nr).forEach(function(e){ao.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),nr[t]=nr[e]})});function xe(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||nr.hasOwnProperty(e)&&nr[e]?(""+t).trim():t+"px"}function Xe(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,c=xe(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,c):e[r]=c}}var lo=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(e,t){if(t){if(lo[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Rt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pr=null;function Lr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sr=null,en=null,tn=null;function El(e){if(e=fs(e)){if(typeof sr!="function")throw Error(s(280));var t=e.stateNode;t&&(t=li(t),sr(e.stateNode,e.type,t))}}function Cl(e){en?tn?tn.push(e):tn=[e]:en=e}function Nl(){if(en){var e=en,t=tn;if(tn=en=null,El(e),t)for(e=0;e<t.length;e++)El(t[e])}}function Tl(e,t){return e(t)}function Pl(){}var uo=!1;function Ll(e,t,r){if(uo)return e(t,r);uo=!0;try{return Tl(e,t,r)}finally{uo=!1,(en!==null||tn!==null)&&(Pl(),Nl())}}function Hn(e,t){var r=e.stateNode;if(r===null)return null;var o=li(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var co=!1;if(p)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){co=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{co=!1}function bh(e,t,r,o,c,d,m,_,k){var P=Array.prototype.slice.call(arguments,3);try{t.apply(r,P)}catch(D){this.onError(D)}}var Gn=!1,Fs=null,zs=!1,ho=null,Sh={onError:function(e){Gn=!0,Fs=e}};function jh(e,t,r,o,c,d,m,_,k){Gn=!1,Fs=null,bh.apply(Sh,arguments)}function Eh(e,t,r,o,c,d,m,_,k){if(jh.apply(this,arguments),Gn){if(Gn){var P=Fs;Gn=!1,Fs=null}else throw Error(s(198));zs||(zs=!0,ho=P)}}function Or(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ol(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Al(e){if(Or(e)!==e)throw Error(s(188))}function Ch(e){var t=e.alternate;if(!t){if(t=Or(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,o=t;;){var c=r.return;if(c===null)break;var d=c.alternate;if(d===null){if(o=c.return,o!==null){r=o;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===r)return Al(c),e;if(d===o)return Al(c),t;d=d.sibling}throw Error(s(188))}if(r.return!==o.return)r=c,o=d;else{for(var m=!1,_=c.child;_;){if(_===r){m=!0,r=c,o=d;break}if(_===o){m=!0,o=c,r=d;break}_=_.sibling}if(!m){for(_=d.child;_;){if(_===r){m=!0,r=d,o=c;break}if(_===o){m=!0,o=d,r=c;break}_=_.sibling}if(!m)throw Error(s(189))}}if(r.alternate!==o)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function Rl(e){return e=Ch(e),e!==null?Il(e):null}function Il(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Il(e);if(t!==null)return t;e=e.sibling}return null}var $l=n.unstable_scheduleCallback,Dl=n.unstable_cancelCallback,Nh=n.unstable_shouldYield,Th=n.unstable_requestPaint,Ie=n.unstable_now,Ph=n.unstable_getCurrentPriorityLevel,fo=n.unstable_ImmediatePriority,Ul=n.unstable_UserBlockingPriority,Bs=n.unstable_NormalPriority,Lh=n.unstable_LowPriority,Ml=n.unstable_IdlePriority,Ws=null,It=null;function Oh(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Ws,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:Ih,Ah=Math.log,Rh=Math.LN2;function Ih(e){return e>>>=0,e===0?32:31-(Ah(e)/Rh|0)|0}var Vs=64,qs=4194304;function Qn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hs(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,c=e.suspendedLanes,d=e.pingedLanes,m=r&268435455;if(m!==0){var _=m&~c;_!==0?o=Qn(_):(d&=m,d!==0&&(o=Qn(d)))}else m=r&~c,m!==0?o=Qn(m):d!==0&&(o=Qn(d));if(o===0)return 0;if(t!==0&&t!==o&&(t&c)===0&&(c=o&-o,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if((o&4)!==0&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-Et(t),c=1<<r,o|=e[r],t&=~c;return o}function $h(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dh(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var m=31-Et(d),_=1<<m,k=c[m];k===-1?((_&r)===0||(_&o)!==0)&&(c[m]=$h(_,t)):k<=t&&(e.expiredLanes|=_),d&=~_}}function po(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fl(){var e=Vs;return Vs<<=1,(Vs&4194240)===0&&(Vs=64),e}function mo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Jn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=r}function Uh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-Et(r),d=1<<c;t[c]=0,o[c]=-1,e[c]=-1,r&=~d}}function go(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-Et(r),c=1<<o;c&t|e[o]&t&&(e[o]|=t),r&=~c}}var _e=0;function zl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Bl,vo,Wl,Vl,ql,yo=!1,Ks=[],ir=null,or=null,ar=null,Yn=new Map,Xn=new Map,lr=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hl(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Yn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(t.pointerId)}}function Zn(e,t,r,o,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[c]},t!==null&&(t=fs(t),t!==null&&vo(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Fh(e,t,r,o,c){switch(t){case"focusin":return ir=Zn(ir,e,t,r,o,c),!0;case"dragenter":return or=Zn(or,e,t,r,o,c),!0;case"mouseover":return ar=Zn(ar,e,t,r,o,c),!0;case"pointerover":var d=c.pointerId;return Yn.set(d,Zn(Yn.get(d)||null,e,t,r,o,c)),!0;case"gotpointercapture":return d=c.pointerId,Xn.set(d,Zn(Xn.get(d)||null,e,t,r,o,c)),!0}return!1}function Kl(e){var t=Ar(e.target);if(t!==null){var r=Or(t);if(r!==null){if(t=r.tag,t===13){if(t=Ol(r),t!==null){e.blockedOn=t,ql(e.priority,function(){Wl(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=xo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);Pr=o,r.target.dispatchEvent(o),Pr=null}else return t=fs(r),t!==null&&vo(t),e.blockedOn=r,!1;t.shift()}return!0}function Gl(e,t,r){Gs(e)&&r.delete(t)}function zh(){yo=!1,ir!==null&&Gs(ir)&&(ir=null),or!==null&&Gs(or)&&(or=null),ar!==null&&Gs(ar)&&(ar=null),Yn.forEach(Gl),Xn.forEach(Gl)}function es(e,t){e.blockedOn===t&&(e.blockedOn=null,yo||(yo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zh)))}function ts(e){function t(c){return es(c,e)}if(0<Ks.length){es(Ks[0],e);for(var r=1;r<Ks.length;r++){var o=Ks[r];o.blockedOn===e&&(o.blockedOn=null)}}for(ir!==null&&es(ir,e),or!==null&&es(or,e),ar!==null&&es(ar,e),Yn.forEach(t),Xn.forEach(t),r=0;r<lr.length;r++)o=lr[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<lr.length&&(r=lr[0],r.blockedOn===null);)Kl(r),r.blockedOn===null&&lr.shift()}var rn=z.ReactCurrentBatchConfig,Qs=!0;function Bh(e,t,r,o){var c=_e,d=rn.transition;rn.transition=null;try{_e=1,wo(e,t,r,o)}finally{_e=c,rn.transition=d}}function Wh(e,t,r,o){var c=_e,d=rn.transition;rn.transition=null;try{_e=4,wo(e,t,r,o)}finally{_e=c,rn.transition=d}}function wo(e,t,r,o){if(Qs){var c=xo(e,t,r,o);if(c===null)Do(e,t,o,Js,r),Hl(e,o);else if(Fh(c,e,t,r,o))o.stopPropagation();else if(Hl(e,o),t&4&&-1<Mh.indexOf(e)){for(;c!==null;){var d=fs(c);if(d!==null&&Bl(d),d=xo(e,t,r,o),d===null&&Do(e,t,o,Js,r),d===c)break;c=d}c!==null&&o.stopPropagation()}else Do(e,t,o,null,r)}}var Js=null;function xo(e,t,r,o){if(Js=null,e=Lr(o),e=Ar(e),e!==null)if(t=Or(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ol(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Js=e,null}function Ql(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ph()){case fo:return 1;case Ul:return 4;case Bs:case Lh:return 16;case Ml:return 536870912;default:return 16}default:return 16}}var ur=null,_o=null,Ys=null;function Jl(){if(Ys)return Ys;var e,t=_o,r=t.length,o,c="value"in ur?ur.value:ur.textContent,d=c.length;for(e=0;e<r&&t[e]===c[e];e++);var m=r-e;for(o=1;o<=m&&t[r-o]===c[d-o];o++);return Ys=c.slice(e,1<o?1-o:void 0)}function Xs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zs(){return!0}function Yl(){return!1}function ft(e){function t(r,o,c,d,m){this._reactName=r,this._targetInst=c,this.type=o,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(r=e[_],this[_]=r?r(d):d[_]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Zs:Yl,this.isPropagationStopped=Yl,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),t}var nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=ft(nn),rs=B({},nn,{view:0,detail:0}),Vh=ft(rs),bo,So,ns,ei=B({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ns&&(ns&&e.type==="mousemove"?(bo=e.screenX-ns.screenX,So=e.screenY-ns.screenY):So=bo=0,ns=e),bo)},movementY:function(e){return"movementY"in e?e.movementY:So}}),Xl=ft(ei),qh=B({},ei,{dataTransfer:0}),Hh=ft(qh),Kh=B({},rs,{relatedTarget:0}),jo=ft(Kh),Gh=B({},nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Qh=ft(Gh),Jh=B({},nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yh=ft(Jh),Xh=B({},nn,{data:0}),Zl=ft(Xh),Zh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ef={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tf[e])?!!t[e]:!1}function Eo(){return rf}var nf=B({},rs,{key:function(e){if(e.key){var t=Zh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ef[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eo,charCode:function(e){return e.type==="keypress"?Xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sf=ft(nf),of=B({},ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eu=ft(of),af=B({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eo}),lf=ft(af),uf=B({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),cf=ft(uf),df=B({},ei,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hf=ft(df),ff=[9,13,27,32],Co=p&&"CompositionEvent"in window,ss=null;p&&"documentMode"in document&&(ss=document.documentMode);var pf=p&&"TextEvent"in window&&!ss,tu=p&&(!Co||ss&&8<ss&&11>=ss),ru=" ",nu=!1;function su(e,t){switch(e){case"keyup":return ff.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sn=!1;function mf(e,t){switch(e){case"compositionend":return iu(t);case"keypress":return t.which!==32?null:(nu=!0,ru);case"textInput":return e=t.data,e===ru&&nu?null:e;default:return null}}function gf(e,t){if(sn)return e==="compositionend"||!Co&&su(e,t)?(e=Jl(),Ys=_o=ur=null,sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tu&&t.locale!=="ko"?null:t.data;default:return null}}var vf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vf[e.type]:t==="textarea"}function au(e,t,r,o){Cl(o),t=ii(t,"onChange"),0<t.length&&(r=new ko("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var is=null,os=null;function yf(e){ju(e,0)}function ti(e){var t=cn(e);if(Mn(t))return e}function wf(e,t){if(e==="change")return t}var lu=!1;if(p){var No;if(p){var To="oninput"in document;if(!To){var uu=document.createElement("div");uu.setAttribute("oninput","return;"),To=typeof uu.oninput=="function"}No=To}else No=!1;lu=No&&(!document.documentMode||9<document.documentMode)}function cu(){is&&(is.detachEvent("onpropertychange",du),os=is=null)}function du(e){if(e.propertyName==="value"&&ti(os)){var t=[];au(t,os,e,Lr(e)),Ll(yf,t)}}function xf(e,t,r){e==="focusin"?(cu(),is=t,os=r,is.attachEvent("onpropertychange",du)):e==="focusout"&&cu()}function _f(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ti(os)}function kf(e,t){if(e==="click")return ti(t)}function bf(e,t){if(e==="input"||e==="change")return ti(t)}function Sf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:Sf;function as(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var c=r[o];if(!g.call(t,c)||!Ct(e[c],t[c]))return!1}return!0}function hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fu(e,t){var r=hu(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hu(r)}}function pu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mu(){for(var e=window,t=Yr();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Yr(e.document)}return t}function Po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function jf(e){var t=mu(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&pu(r.ownerDocument.documentElement,r)){if(o!==null&&Po(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,d=Math.min(o.start,c);o=o.end===void 0?d:Math.min(o.end,c),!e.extend&&d>o&&(c=o,o=d,d=c),c=fu(r,d);var m=fu(r,o);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>o?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ef=p&&"documentMode"in document&&11>=document.documentMode,on=null,Lo=null,ls=null,Oo=!1;function gu(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Oo||on==null||on!==Yr(o)||(o=on,"selectionStart"in o&&Po(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ls&&as(ls,o)||(ls=o,o=ii(Lo,"onSelect"),0<o.length&&(t=new ko("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=on)))}function ri(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var an={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionend:ri("Transition","TransitionEnd")},Ao={},vu={};p&&(vu=document.createElement("div").style,"AnimationEvent"in window||(delete an.animationend.animation,delete an.animationiteration.animation,delete an.animationstart.animation),"TransitionEvent"in window||delete an.transitionend.transition);function ni(e){if(Ao[e])return Ao[e];if(!an[e])return e;var t=an[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in vu)return Ao[e]=t[r];return e}var yu=ni("animationend"),wu=ni("animationiteration"),xu=ni("animationstart"),_u=ni("transitionend"),ku=new Map,bu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(e,t){ku.set(e,t),u(t,[e])}for(var Ro=0;Ro<bu.length;Ro++){var Io=bu[Ro],Cf=Io.toLowerCase(),Nf=Io[0].toUpperCase()+Io.slice(1);cr(Cf,"on"+Nf)}cr(yu,"onAnimationEnd"),cr(wu,"onAnimationIteration"),cr(xu,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(_u,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tf=new Set("cancel close invalid load scroll toggle".split(" ").concat(us));function Su(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,Eh(o,t,void 0,e),e.currentTarget=null}function ju(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],c=o.event;o=o.listeners;e:{var d=void 0;if(t)for(var m=o.length-1;0<=m;m--){var _=o[m],k=_.instance,P=_.currentTarget;if(_=_.listener,k!==d&&c.isPropagationStopped())break e;Su(c,_,P),d=k}else for(m=0;m<o.length;m++){if(_=o[m],k=_.instance,P=_.currentTarget,_=_.listener,k!==d&&c.isPropagationStopped())break e;Su(c,_,P),d=k}}}if(zs)throw e=ho,zs=!1,ho=null,e}function Ce(e,t){var r=t[Wo];r===void 0&&(r=t[Wo]=new Set);var o=e+"__bubble";r.has(o)||(Eu(t,e,2,!1),r.add(o))}function $o(e,t,r){var o=0;t&&(o|=4),Eu(r,e,o,t)}var si="_reactListening"+Math.random().toString(36).slice(2);function cs(e){if(!e[si]){e[si]=!0,i.forEach(function(r){r!=="selectionchange"&&(Tf.has(r)||$o(r,!1,e),$o(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[si]||(t[si]=!0,$o("selectionchange",!1,t))}}function Eu(e,t,r,o){switch(Ql(t)){case 1:var c=Bh;break;case 4:c=Wh;break;default:c=wo}r=c.bind(null,t,r,e),c=void 0,!co||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function Do(e,t,r,o,c){var d=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var m=o.tag;if(m===3||m===4){var _=o.stateNode.containerInfo;if(_===c||_.nodeType===8&&_.parentNode===c)break;if(m===4)for(m=o.return;m!==null;){var k=m.tag;if((k===3||k===4)&&(k=m.stateNode.containerInfo,k===c||k.nodeType===8&&k.parentNode===c))return;m=m.return}for(;_!==null;){if(m=Ar(_),m===null)return;if(k=m.tag,k===5||k===6){o=d=m;continue e}_=_.parentNode}}o=o.return}Ll(function(){var P=d,D=Lr(r),U=[];e:{var $=ku.get(e);if($!==void 0){var W=ko,K=e;switch(e){case"keypress":if(Xs(r)===0)break e;case"keydown":case"keyup":W=sf;break;case"focusin":K="focus",W=jo;break;case"focusout":K="blur",W=jo;break;case"beforeblur":case"afterblur":W=jo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Hh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=lf;break;case yu:case wu:case xu:W=Qh;break;case _u:W=cf;break;case"scroll":W=Vh;break;case"wheel":W=hf;break;case"copy":case"cut":case"paste":W=Yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=eu}var G=(t&4)!==0,$e=!G&&e==="scroll",C=G?$!==null?$+"Capture":null:$;G=[];for(var S=P,N;S!==null;){N=S;var M=N.stateNode;if(N.tag===5&&M!==null&&(N=M,C!==null&&(M=Hn(S,C),M!=null&&G.push(ds(S,M,N)))),$e)break;S=S.return}0<G.length&&($=new W($,K,null,r,D),U.push({event:$,listeners:G}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",$&&r!==Pr&&(K=r.relatedTarget||r.fromElement)&&(Ar(K)||K[Vt]))break e;if((W||$)&&($=D.window===D?D:($=D.ownerDocument)?$.defaultView||$.parentWindow:window,W?(K=r.relatedTarget||r.toElement,W=P,K=K?Ar(K):null,K!==null&&($e=Or(K),K!==$e||K.tag!==5&&K.tag!==6)&&(K=null)):(W=null,K=P),W!==K)){if(G=Xl,M="onMouseLeave",C="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(G=eu,M="onPointerLeave",C="onPointerEnter",S="pointer"),$e=W==null?$:cn(W),N=K==null?$:cn(K),$=new G(M,S+"leave",W,r,D),$.target=$e,$.relatedTarget=N,M=null,Ar(D)===P&&(G=new G(C,S+"enter",K,r,D),G.target=N,G.relatedTarget=$e,M=G),$e=M,W&&K)t:{for(G=W,C=K,S=0,N=G;N;N=ln(N))S++;for(N=0,M=C;M;M=ln(M))N++;for(;0<S-N;)G=ln(G),S--;for(;0<N-S;)C=ln(C),N--;for(;S--;){if(G===C||C!==null&&G===C.alternate)break t;G=ln(G),C=ln(C)}G=null}else G=null;W!==null&&Cu(U,$,W,G,!1),K!==null&&$e!==null&&Cu(U,$e,K,G,!0)}}e:{if($=P?cn(P):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var J=wf;else if(ou($))if(lu)J=bf;else{J=_f;var Z=xf}else(W=$.nodeName)&&W.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(J=kf);if(J&&(J=J(e,P))){au(U,J,r,D);break e}Z&&Z(e,$,P),e==="focusout"&&(Z=$._wrapperState)&&Z.controlled&&$.type==="number"&&Wt($,"number",$.value)}switch(Z=P?cn(P):window,e){case"focusin":(ou(Z)||Z.contentEditable==="true")&&(on=Z,Lo=P,ls=null);break;case"focusout":ls=Lo=on=null;break;case"mousedown":Oo=!0;break;case"contextmenu":case"mouseup":case"dragend":Oo=!1,gu(U,r,D);break;case"selectionchange":if(Ef)break;case"keydown":case"keyup":gu(U,r,D)}var ee;if(Co)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else sn?su(e,r)&&(ne="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ne="onCompositionStart");ne&&(tu&&r.locale!=="ko"&&(sn||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&sn&&(ee=Jl()):(ur=D,_o="value"in ur?ur.value:ur.textContent,sn=!0)),Z=ii(P,ne),0<Z.length&&(ne=new Zl(ne,e,null,r,D),U.push({event:ne,listeners:Z}),ee?ne.data=ee:(ee=iu(r),ee!==null&&(ne.data=ee)))),(ee=pf?mf(e,r):gf(e,r))&&(P=ii(P,"onBeforeInput"),0<P.length&&(D=new Zl("onBeforeInput","beforeinput",null,r,D),U.push({event:D,listeners:P}),D.data=ee))}ju(U,t)})}function ds(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ii(e,t){for(var r=t+"Capture",o=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Hn(e,r),d!=null&&o.unshift(ds(e,d,c)),d=Hn(e,t),d!=null&&o.push(ds(e,d,c))),e=e.return}return o}function ln(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cu(e,t,r,o,c){for(var d=t._reactName,m=[];r!==null&&r!==o;){var _=r,k=_.alternate,P=_.stateNode;if(k!==null&&k===o)break;_.tag===5&&P!==null&&(_=P,c?(k=Hn(r,d),k!=null&&m.unshift(ds(r,k,_))):c||(k=Hn(r,d),k!=null&&m.push(ds(r,k,_)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var Pf=/\r\n?/g,Lf=/\u0000|\uFFFD/g;function Nu(e){return(typeof e=="string"?e:""+e).replace(Pf,`
`).replace(Lf,"")}function oi(e,t,r){if(t=Nu(t),Nu(e)!==t&&r)throw Error(s(425))}function ai(){}var Uo=null,Mo=null;function Fo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zo=typeof setTimeout=="function"?setTimeout:void 0,Of=typeof clearTimeout=="function"?clearTimeout:void 0,Tu=typeof Promise=="function"?Promise:void 0,Af=typeof queueMicrotask=="function"?queueMicrotask:typeof Tu<"u"?function(e){return Tu.resolve(null).then(e).catch(Rf)}:zo;function Rf(e){setTimeout(function(){throw e})}function Bo(e,t){var r=t,o=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(o===0){e.removeChild(c),ts(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=c}while(r);ts(t)}function dr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),$t="__reactFiber$"+un,hs="__reactProps$"+un,Vt="__reactContainer$"+un,Wo="__reactEvents$"+un,If="__reactListeners$"+un,$f="__reactHandles$"+un;function Ar(e){var t=e[$t];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Vt]||r[$t]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Pu(e);e!==null;){if(r=e[$t])return r;e=Pu(e)}return t}e=r,r=e.parentNode}return null}function fs(e){return e=e[$t]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function cn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function li(e){return e[hs]||null}var Vo=[],dn=-1;function hr(e){return{current:e}}function Ne(e){0>dn||(e.current=Vo[dn],Vo[dn]=null,dn--)}function je(e,t){dn++,Vo[dn]=e.current,e.current=t}var fr={},Ze=hr(fr),ot=hr(!1),Rr=fr;function hn(e,t){var r=e.type.contextTypes;if(!r)return fr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in r)c[d]=t[d];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function at(e){return e=e.childContextTypes,e!=null}function ui(){Ne(ot),Ne(Ze)}function Lu(e,t,r){if(Ze.current!==fr)throw Error(s(168));je(Ze,t),je(ot,r)}function Ou(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var c in o)if(!(c in t))throw Error(s(108,ke(e)||"Unknown",c));return B({},r,o)}function ci(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fr,Rr=Ze.current,je(Ze,e),je(ot,ot.current),!0}function Au(e,t,r){var o=e.stateNode;if(!o)throw Error(s(169));r?(e=Ou(e,t,Rr),o.__reactInternalMemoizedMergedChildContext=e,Ne(ot),Ne(Ze),je(Ze,e)):Ne(ot),je(ot,r)}var qt=null,di=!1,qo=!1;function Ru(e){qt===null?qt=[e]:qt.push(e)}function Df(e){di=!0,Ru(e)}function pr(){if(!qo&&qt!==null){qo=!0;var e=0,t=_e;try{var r=qt;for(_e=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}qt=null,di=!1}catch(c){throw qt!==null&&(qt=qt.slice(e+1)),$l(fo,pr),c}finally{_e=t,qo=!1}}return null}var fn=[],pn=0,hi=null,fi=0,yt=[],wt=0,Ir=null,Ht=1,Kt="";function $r(e,t){fn[pn++]=fi,fn[pn++]=hi,hi=e,fi=t}function Iu(e,t,r){yt[wt++]=Ht,yt[wt++]=Kt,yt[wt++]=Ir,Ir=e;var o=Ht;e=Kt;var c=32-Et(o)-1;o&=~(1<<c),r+=1;var d=32-Et(t)+c;if(30<d){var m=c-c%5;d=(o&(1<<m)-1).toString(32),o>>=m,c-=m,Ht=1<<32-Et(t)+c|r<<c|o,Kt=d+e}else Ht=1<<d|r<<c|o,Kt=e}function Ho(e){e.return!==null&&($r(e,1),Iu(e,1,0))}function Ko(e){for(;e===hi;)hi=fn[--pn],fn[pn]=null,fi=fn[--pn],fn[pn]=null;for(;e===Ir;)Ir=yt[--wt],yt[wt]=null,Kt=yt[--wt],yt[wt]=null,Ht=yt[--wt],yt[wt]=null}var pt=null,mt=null,Te=!1,Nt=null;function $u(e,t){var r=bt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Du(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pt=e,mt=dr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pt=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ir!==null?{id:Ht,overflow:Kt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=bt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,pt=e,mt=null,!0):!1;default:return!1}}function Go(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qo(e){if(Te){var t=mt;if(t){var r=t;if(!Du(e,t)){if(Go(e))throw Error(s(418));t=dr(r.nextSibling);var o=pt;t&&Du(e,t)?$u(o,r):(e.flags=e.flags&-4097|2,Te=!1,pt=e)}}else{if(Go(e))throw Error(s(418));e.flags=e.flags&-4097|2,Te=!1,pt=e}}}function Uu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pt=e}function pi(e){if(e!==pt)return!1;if(!Te)return Uu(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fo(e.type,e.memoizedProps)),t&&(t=mt)){if(Go(e))throw Mu(),Error(s(418));for(;t;)$u(e,t),t=dr(t.nextSibling)}if(Uu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){mt=dr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=pt?dr(e.stateNode.nextSibling):null;return!0}function Mu(){for(var e=mt;e;)e=dr(e.nextSibling)}function mn(){mt=pt=null,Te=!1}function Jo(e){Nt===null?Nt=[e]:Nt.push(e)}var Uf=z.ReactCurrentBatchConfig;function ps(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var o=r.stateNode}if(!o)throw Error(s(147,e));var c=o,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(m){var _=c.refs;m===null?delete _[d]:_[d]=m},t._stringRef=d,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function mi(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fu(e){var t=e._init;return t(e._payload)}function zu(e){function t(C,S){if(e){var N=C.deletions;N===null?(C.deletions=[S],C.flags|=16):N.push(S)}}function r(C,S){if(!e)return null;for(;S!==null;)t(C,S),S=S.sibling;return null}function o(C,S){for(C=new Map;S!==null;)S.key!==null?C.set(S.key,S):C.set(S.index,S),S=S.sibling;return C}function c(C,S){return C=kr(C,S),C.index=0,C.sibling=null,C}function d(C,S,N){return C.index=N,e?(N=C.alternate,N!==null?(N=N.index,N<S?(C.flags|=2,S):N):(C.flags|=2,S)):(C.flags|=1048576,S)}function m(C){return e&&C.alternate===null&&(C.flags|=2),C}function _(C,S,N,M){return S===null||S.tag!==6?(S=za(N,C.mode,M),S.return=C,S):(S=c(S,N),S.return=C,S)}function k(C,S,N,M){var J=N.type;return J===te?D(C,S,N.props.children,M,N.key):S!==null&&(S.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Le&&Fu(J)===S.type)?(M=c(S,N.props),M.ref=ps(C,S,N),M.return=C,M):(M=Mi(N.type,N.key,N.props,null,C.mode,M),M.ref=ps(C,S,N),M.return=C,M)}function P(C,S,N,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==N.containerInfo||S.stateNode.implementation!==N.implementation?(S=Ba(N,C.mode,M),S.return=C,S):(S=c(S,N.children||[]),S.return=C,S)}function D(C,S,N,M,J){return S===null||S.tag!==7?(S=Vr(N,C.mode,M,J),S.return=C,S):(S=c(S,N),S.return=C,S)}function U(C,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return S=za(""+S,C.mode,N),S.return=C,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case re:return N=Mi(S.type,S.key,S.props,null,C.mode,N),N.ref=ps(C,null,S),N.return=C,N;case q:return S=Ba(S,C.mode,N),S.return=C,S;case Le:var M=S._init;return U(C,M(S._payload),N)}if(Nr(S)||X(S))return S=Vr(S,C.mode,N,null),S.return=C,S;mi(C,S)}return null}function $(C,S,N,M){var J=S!==null?S.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return J!==null?null:_(C,S,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case re:return N.key===J?k(C,S,N,M):null;case q:return N.key===J?P(C,S,N,M):null;case Le:return J=N._init,$(C,S,J(N._payload),M)}if(Nr(N)||X(N))return J!==null?null:D(C,S,N,M,null);mi(C,N)}return null}function W(C,S,N,M,J){if(typeof M=="string"&&M!==""||typeof M=="number")return C=C.get(N)||null,_(S,C,""+M,J);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case re:return C=C.get(M.key===null?N:M.key)||null,k(S,C,M,J);case q:return C=C.get(M.key===null?N:M.key)||null,P(S,C,M,J);case Le:var Z=M._init;return W(C,S,N,Z(M._payload),J)}if(Nr(M)||X(M))return C=C.get(N)||null,D(S,C,M,J,null);mi(S,M)}return null}function K(C,S,N,M){for(var J=null,Z=null,ee=S,ne=S=0,Ke=null;ee!==null&&ne<N.length;ne++){ee.index>ne?(Ke=ee,ee=null):Ke=ee.sibling;var ge=$(C,ee,N[ne],M);if(ge===null){ee===null&&(ee=Ke);break}e&&ee&&ge.alternate===null&&t(C,ee),S=d(ge,S,ne),Z===null?J=ge:Z.sibling=ge,Z=ge,ee=Ke}if(ne===N.length)return r(C,ee),Te&&$r(C,ne),J;if(ee===null){for(;ne<N.length;ne++)ee=U(C,N[ne],M),ee!==null&&(S=d(ee,S,ne),Z===null?J=ee:Z.sibling=ee,Z=ee);return Te&&$r(C,ne),J}for(ee=o(C,ee);ne<N.length;ne++)Ke=W(ee,C,ne,N[ne],M),Ke!==null&&(e&&Ke.alternate!==null&&ee.delete(Ke.key===null?ne:Ke.key),S=d(Ke,S,ne),Z===null?J=Ke:Z.sibling=Ke,Z=Ke);return e&&ee.forEach(function(br){return t(C,br)}),Te&&$r(C,ne),J}function G(C,S,N,M){var J=X(N);if(typeof J!="function")throw Error(s(150));if(N=J.call(N),N==null)throw Error(s(151));for(var Z=J=null,ee=S,ne=S=0,Ke=null,ge=N.next();ee!==null&&!ge.done;ne++,ge=N.next()){ee.index>ne?(Ke=ee,ee=null):Ke=ee.sibling;var br=$(C,ee,ge.value,M);if(br===null){ee===null&&(ee=Ke);break}e&&ee&&br.alternate===null&&t(C,ee),S=d(br,S,ne),Z===null?J=br:Z.sibling=br,Z=br,ee=Ke}if(ge.done)return r(C,ee),Te&&$r(C,ne),J;if(ee===null){for(;!ge.done;ne++,ge=N.next())ge=U(C,ge.value,M),ge!==null&&(S=d(ge,S,ne),Z===null?J=ge:Z.sibling=ge,Z=ge);return Te&&$r(C,ne),J}for(ee=o(C,ee);!ge.done;ne++,ge=N.next())ge=W(ee,C,ne,ge.value,M),ge!==null&&(e&&ge.alternate!==null&&ee.delete(ge.key===null?ne:ge.key),S=d(ge,S,ne),Z===null?J=ge:Z.sibling=ge,Z=ge);return e&&ee.forEach(function(vp){return t(C,vp)}),Te&&$r(C,ne),J}function $e(C,S,N,M){if(typeof N=="object"&&N!==null&&N.type===te&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case re:e:{for(var J=N.key,Z=S;Z!==null;){if(Z.key===J){if(J=N.type,J===te){if(Z.tag===7){r(C,Z.sibling),S=c(Z,N.props.children),S.return=C,C=S;break e}}else if(Z.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Le&&Fu(J)===Z.type){r(C,Z.sibling),S=c(Z,N.props),S.ref=ps(C,Z,N),S.return=C,C=S;break e}r(C,Z);break}else t(C,Z);Z=Z.sibling}N.type===te?(S=Vr(N.props.children,C.mode,M,N.key),S.return=C,C=S):(M=Mi(N.type,N.key,N.props,null,C.mode,M),M.ref=ps(C,S,N),M.return=C,C=M)}return m(C);case q:e:{for(Z=N.key;S!==null;){if(S.key===Z)if(S.tag===4&&S.stateNode.containerInfo===N.containerInfo&&S.stateNode.implementation===N.implementation){r(C,S.sibling),S=c(S,N.children||[]),S.return=C,C=S;break e}else{r(C,S);break}else t(C,S);S=S.sibling}S=Ba(N,C.mode,M),S.return=C,C=S}return m(C);case Le:return Z=N._init,$e(C,S,Z(N._payload),M)}if(Nr(N))return K(C,S,N,M);if(X(N))return G(C,S,N,M);mi(C,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,S!==null&&S.tag===6?(r(C,S.sibling),S=c(S,N),S.return=C,C=S):(r(C,S),S=za(N,C.mode,M),S.return=C,C=S),m(C)):r(C,S)}return $e}var gn=zu(!0),Bu=zu(!1),gi=hr(null),vi=null,vn=null,Yo=null;function Xo(){Yo=vn=vi=null}function Zo(e){var t=gi.current;Ne(gi),e._currentValue=t}function ea(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function yn(e,t){vi=e,Yo=vn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(lt=!0),e.firstContext=null)}function xt(e){var t=e._currentValue;if(Yo!==e)if(e={context:e,memoizedValue:t,next:null},vn===null){if(vi===null)throw Error(s(308));vn=e,vi.dependencies={lanes:0,firstContext:e}}else vn=vn.next=e;return t}var Dr=null;function ta(e){Dr===null?Dr=[e]:Dr.push(e)}function Wu(e,t,r,o){var c=t.interleaved;return c===null?(r.next=r,ta(t)):(r.next=c.next,c.next=r),t.interleaved=r,Gt(e,o)}function Gt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var mr=!1;function ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gr(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(pe&2)!==0){var c=o.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),o.pending=t,Gt(e,r)}return c=o.interleaved,c===null?(t.next=t,ta(o)):(t.next=c.next,c.next=t),o.interleaved=t,Gt(e,r)}function yi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,go(e,r)}}function qu(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var c=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?c=d=m:d=d.next=m,r=r.next}while(r!==null);d===null?c=d=t:d=d.next=t}else c=d=t;r={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function wi(e,t,r,o){var c=e.updateQueue;mr=!1;var d=c.firstBaseUpdate,m=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var k=_,P=k.next;k.next=null,m===null?d=P:m.next=P,m=k;var D=e.alternate;D!==null&&(D=D.updateQueue,_=D.lastBaseUpdate,_!==m&&(_===null?D.firstBaseUpdate=P:_.next=P,D.lastBaseUpdate=k))}if(d!==null){var U=c.baseState;m=0,D=P=k=null,_=d;do{var $=_.lane,W=_.eventTime;if((o&$)===$){D!==null&&(D=D.next={eventTime:W,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var K=e,G=_;switch($=t,W=r,G.tag){case 1:if(K=G.payload,typeof K=="function"){U=K.call(W,U,$);break e}U=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=G.payload,$=typeof K=="function"?K.call(W,U,$):K,$==null)break e;U=B({},U,$);break e;case 2:mr=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,$=c.effects,$===null?c.effects=[_]:$.push(_))}else W={eventTime:W,lane:$,tag:_.tag,payload:_.payload,callback:_.callback,next:null},D===null?(P=D=W,k=U):D=D.next=W,m|=$;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;$=_,_=$.next,$.next=null,c.lastBaseUpdate=$,c.shared.pending=null}}while(!0);if(D===null&&(k=U),c.baseState=k,c.firstBaseUpdate=P,c.lastBaseUpdate=D,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);Fr|=m,e.lanes=m,e.memoizedState=U}}function Hu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],c=o.callback;if(c!==null){if(o.callback=null,o=r,typeof c!="function")throw Error(s(191,c));c.call(o)}}}var ms={},Dt=hr(ms),gs=hr(ms),vs=hr(ms);function Ur(e){if(e===ms)throw Error(s(174));return e}function na(e,t){switch(je(vs,t),je(gs,e),je(Dt,ms),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zr(t,e)}Ne(Dt),je(Dt,t)}function wn(){Ne(Dt),Ne(gs),Ne(vs)}function Ku(e){Ur(vs.current);var t=Ur(Dt.current),r=Zr(t,e.type);t!==r&&(je(gs,e),je(Dt,r))}function sa(e){gs.current===e&&(Ne(Dt),Ne(gs))}var Oe=hr(0);function xi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=[];function oa(){for(var e=0;e<ia.length;e++)ia[e]._workInProgressVersionPrimary=null;ia.length=0}var _i=z.ReactCurrentDispatcher,aa=z.ReactCurrentBatchConfig,Mr=0,Ae=null,Be=null,qe=null,ki=!1,ys=!1,ws=0,Mf=0;function et(){throw Error(s(321))}function la(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ct(e[r],t[r]))return!1;return!0}function ua(e,t,r,o,c,d){if(Mr=d,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_i.current=e===null||e.memoizedState===null?Wf:Vf,e=r(o,c),ys){d=0;do{if(ys=!1,ws=0,25<=d)throw Error(s(301));d+=1,qe=Be=null,t.updateQueue=null,_i.current=qf,e=r(o,c)}while(ys)}if(_i.current=ji,t=Be!==null&&Be.next!==null,Mr=0,qe=Be=Ae=null,ki=!1,t)throw Error(s(300));return e}function ca(){var e=ws!==0;return ws=0,e}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ae.memoizedState=qe=e:qe=qe.next=e,qe}function _t(){if(Be===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=qe===null?Ae.memoizedState:qe.next;if(t!==null)qe=t,Be=e;else{if(e===null)throw Error(s(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},qe===null?Ae.memoizedState=qe=e:qe=qe.next=e}return qe}function xs(e,t){return typeof t=="function"?t(e):t}function da(e){var t=_t(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var o=Be,c=o.baseQueue,d=r.pending;if(d!==null){if(c!==null){var m=c.next;c.next=d.next,d.next=m}o.baseQueue=c=d,r.pending=null}if(c!==null){d=c.next,o=o.baseState;var _=m=null,k=null,P=d;do{var D=P.lane;if((Mr&D)===D)k!==null&&(k=k.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),o=P.hasEagerState?P.eagerState:e(o,P.action);else{var U={lane:D,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};k===null?(_=k=U,m=o):k=k.next=U,Ae.lanes|=D,Fr|=D}P=P.next}while(P!==null&&P!==d);k===null?m=o:k.next=_,Ct(o,t.memoizedState)||(lt=!0),t.memoizedState=o,t.baseState=m,t.baseQueue=k,r.lastRenderedState=o}if(e=r.interleaved,e!==null){c=e;do d=c.lane,Ae.lanes|=d,Fr|=d,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ha(e){var t=_t(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var o=r.dispatch,c=r.pending,d=t.memoizedState;if(c!==null){r.pending=null;var m=c=c.next;do d=e(d,m.action),m=m.next;while(m!==c);Ct(d,t.memoizedState)||(lt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,o]}function Gu(){}function Qu(e,t){var r=Ae,o=_t(),c=t(),d=!Ct(o.memoizedState,c);if(d&&(o.memoizedState=c,lt=!0),o=o.queue,fa(Xu.bind(null,r,o,e),[e]),o.getSnapshot!==t||d||qe!==null&&qe.memoizedState.tag&1){if(r.flags|=2048,_s(9,Yu.bind(null,r,o,c,t),void 0,null),He===null)throw Error(s(349));(Mr&30)!==0||Ju(r,t,c)}return c}function Ju(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Yu(e,t,r,o){t.value=r,t.getSnapshot=o,Zu(t)&&ec(e)}function Xu(e,t,r){return r(function(){Zu(t)&&ec(e)})}function Zu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ct(e,r)}catch{return!0}}function ec(e){var t=Gt(e,1);t!==null&&Ot(t,e,1,-1)}function tc(e){var t=Ut();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=Bf.bind(null,Ae,e),[t.memoizedState,e]}function _s(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function rc(){return _t().memoizedState}function bi(e,t,r,o){var c=Ut();Ae.flags|=e,c.memoizedState=_s(1|t,r,void 0,o===void 0?null:o)}function Si(e,t,r,o){var c=_t();o=o===void 0?null:o;var d=void 0;if(Be!==null){var m=Be.memoizedState;if(d=m.destroy,o!==null&&la(o,m.deps)){c.memoizedState=_s(t,r,d,o);return}}Ae.flags|=e,c.memoizedState=_s(1|t,r,d,o)}function nc(e,t){return bi(8390656,8,e,t)}function fa(e,t){return Si(2048,8,e,t)}function sc(e,t){return Si(4,2,e,t)}function ic(e,t){return Si(4,4,e,t)}function oc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ac(e,t,r){return r=r!=null?r.concat([e]):null,Si(4,4,oc.bind(null,t,e),r)}function pa(){}function lc(e,t){var r=_t();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&la(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function uc(e,t){var r=_t();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&la(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function cc(e,t,r){return(Mr&21)===0?(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=r):(Ct(r,t)||(r=Fl(),Ae.lanes|=r,Fr|=r,e.baseState=!0),t)}function Ff(e,t){var r=_e;_e=r!==0&&4>r?r:4,e(!0);var o=aa.transition;aa.transition={};try{e(!1),t()}finally{_e=r,aa.transition=o}}function dc(){return _t().memoizedState}function zf(e,t,r){var o=xr(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},hc(e))fc(t,r);else if(r=Wu(e,t,r,o),r!==null){var c=it();Ot(r,e,o,c),pc(r,t,o)}}function Bf(e,t,r){var o=xr(e),c={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(hc(e))fc(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,_=d(m,r);if(c.hasEagerState=!0,c.eagerState=_,Ct(_,m)){var k=t.interleaved;k===null?(c.next=c,ta(t)):(c.next=k.next,k.next=c),t.interleaved=c;return}}catch{}finally{}r=Wu(e,t,c,o),r!==null&&(c=it(),Ot(r,e,o,c),pc(r,t,o))}}function hc(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function fc(e,t){ys=ki=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function pc(e,t,r){if((r&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,go(e,r)}}var ji={readContext:xt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Wf={readContext:xt,useCallback:function(e,t){return Ut().memoizedState=[e,t===void 0?null:t],e},useContext:xt,useEffect:nc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,bi(4194308,4,oc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bi(4194308,4,e,t)},useInsertionEffect:function(e,t){return bi(4,2,e,t)},useMemo:function(e,t){var r=Ut();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=Ut();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=zf.bind(null,Ae,e),[o.memoizedState,e]},useRef:function(e){var t=Ut();return e={current:e},t.memoizedState=e},useState:tc,useDebugValue:pa,useDeferredValue:function(e){return Ut().memoizedState=e},useTransition:function(){var e=tc(!1),t=e[0];return e=Ff.bind(null,e[1]),Ut().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=Ae,c=Ut();if(Te){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),He===null)throw Error(s(349));(Mr&30)!==0||Ju(o,t,r)}c.memoizedState=r;var d={value:r,getSnapshot:t};return c.queue=d,nc(Xu.bind(null,o,d,e),[e]),o.flags|=2048,_s(9,Yu.bind(null,o,d,r,t),void 0,null),r},useId:function(){var e=Ut(),t=He.identifierPrefix;if(Te){var r=Kt,o=Ht;r=(o&~(1<<32-Et(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=ws++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Mf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vf={readContext:xt,useCallback:lc,useContext:xt,useEffect:fa,useImperativeHandle:ac,useInsertionEffect:sc,useLayoutEffect:ic,useMemo:uc,useReducer:da,useRef:rc,useState:function(){return da(xs)},useDebugValue:pa,useDeferredValue:function(e){var t=_t();return cc(t,Be.memoizedState,e)},useTransition:function(){var e=da(xs)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Gu,useSyncExternalStore:Qu,useId:dc,unstable_isNewReconciler:!1},qf={readContext:xt,useCallback:lc,useContext:xt,useEffect:fa,useImperativeHandle:ac,useInsertionEffect:sc,useLayoutEffect:ic,useMemo:uc,useReducer:ha,useRef:rc,useState:function(){return ha(xs)},useDebugValue:pa,useDeferredValue:function(e){var t=_t();return Be===null?t.memoizedState=e:cc(t,Be.memoizedState,e)},useTransition:function(){var e=ha(xs)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Gu,useSyncExternalStore:Qu,useId:dc,unstable_isNewReconciler:!1};function Tt(e,t){if(e&&e.defaultProps){t=B({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ma(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:B({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Or(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=it(),c=xr(e),d=Qt(o,c);d.payload=t,r!=null&&(d.callback=r),t=gr(e,d,c),t!==null&&(Ot(t,e,c,o),yi(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=it(),c=xr(e),d=Qt(o,c);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=gr(e,d,c),t!==null&&(Ot(t,e,c,o),yi(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=it(),o=xr(e),c=Qt(r,o);c.tag=2,t!=null&&(c.callback=t),t=gr(e,c,o),t!==null&&(Ot(t,e,o,r),yi(t,e,o))}};function mc(e,t,r,o,c,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,m):t.prototype&&t.prototype.isPureReactComponent?!as(r,o)||!as(c,d):!0}function gc(e,t,r){var o=!1,c=fr,d=t.contextType;return typeof d=="object"&&d!==null?d=xt(d):(c=at(t)?Rr:Ze.current,o=t.contextTypes,d=(o=o!=null)?hn(e,c):fr),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ei,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function vc(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&Ei.enqueueReplaceState(t,t.state,null)}function ga(e,t,r,o){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs={},ra(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=xt(d):(d=at(t)?Rr:Ze.current,c.context=hn(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(ma(e,t,d,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Ei.enqueueReplaceState(c,c.state,null),wi(e,r,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function xn(e,t){try{var r="",o=t;do r+=he(o),o=o.return;while(o);var c=r}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function va(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ya(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Hf=typeof WeakMap=="function"?WeakMap:Map;function yc(e,t,r){r=Qt(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Ai||(Ai=!0,Aa=o),ya(e,t)},r}function wc(e,t,r){r=Qt(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=t.value;r.payload=function(){return o(c)},r.callback=function(){ya(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){ya(e,t),typeof o!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function xc(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new Hf;var c=new Set;o.set(t,c)}else c=o.get(t),c===void 0&&(c=new Set,o.set(t,c));c.has(r)||(c.add(r),e=op.bind(null,e,t,r),t.then(e,e))}function _c(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kc(e,t,r,o,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Qt(-1,1),t.tag=2,gr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var Kf=z.ReactCurrentOwner,lt=!1;function st(e,t,r,o){t.child=e===null?Bu(t,null,r,o):gn(t,e.child,r,o)}function bc(e,t,r,o,c){r=r.render;var d=t.ref;return yn(t,c),o=ua(e,t,r,o,d,c),r=ca(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Jt(e,t,c)):(Te&&r&&Ho(t),t.flags|=1,st(e,t,o,c),t.child)}function Sc(e,t,r,o,c){if(e===null){var d=r.type;return typeof d=="function"&&!Fa(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,jc(e,t,d,o,c)):(e=Mi(r.type,null,o,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&c)===0){var m=d.memoizedProps;if(r=r.compare,r=r!==null?r:as,r(m,o)&&e.ref===t.ref)return Jt(e,t,c)}return t.flags|=1,e=kr(d,o),e.ref=t.ref,e.return=t,t.child=e}function jc(e,t,r,o,c){if(e!==null){var d=e.memoizedProps;if(as(d,o)&&e.ref===t.ref)if(lt=!1,t.pendingProps=o=d,(e.lanes&c)!==0)(e.flags&131072)!==0&&(lt=!0);else return t.lanes=e.lanes,Jt(e,t,c)}return wa(e,t,r,o,c)}function Ec(e,t,r){var o=t.pendingProps,c=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(kn,gt),gt|=r;else{if((r&1073741824)===0)return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,je(kn,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:r,je(kn,gt),gt|=o}else d!==null?(o=d.baseLanes|r,t.memoizedState=null):o=r,je(kn,gt),gt|=o;return st(e,t,c,r),t.child}function Cc(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function wa(e,t,r,o,c){var d=at(r)?Rr:Ze.current;return d=hn(t,d),yn(t,c),r=ua(e,t,r,o,d,c),o=ca(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Jt(e,t,c)):(Te&&o&&Ho(t),t.flags|=1,st(e,t,r,c),t.child)}function Nc(e,t,r,o,c){if(at(r)){var d=!0;ci(t)}else d=!1;if(yn(t,c),t.stateNode===null)Ni(e,t),gc(t,r,o),ga(t,r,o,c),o=!0;else if(e===null){var m=t.stateNode,_=t.memoizedProps;m.props=_;var k=m.context,P=r.contextType;typeof P=="object"&&P!==null?P=xt(P):(P=at(r)?Rr:Ze.current,P=hn(t,P));var D=r.getDerivedStateFromProps,U=typeof D=="function"||typeof m.getSnapshotBeforeUpdate=="function";U||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==o||k!==P)&&vc(t,m,o,P),mr=!1;var $=t.memoizedState;m.state=$,wi(t,o,m,c),k=t.memoizedState,_!==o||$!==k||ot.current||mr?(typeof D=="function"&&(ma(t,r,D,o),k=t.memoizedState),(_=mr||mc(t,r,_,o,$,k,P))?(U||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=k),m.props=o,m.state=k,m.context=P,o=_):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{m=t.stateNode,Vu(e,t),_=t.memoizedProps,P=t.type===t.elementType?_:Tt(t.type,_),m.props=P,U=t.pendingProps,$=m.context,k=r.contextType,typeof k=="object"&&k!==null?k=xt(k):(k=at(r)?Rr:Ze.current,k=hn(t,k));var W=r.getDerivedStateFromProps;(D=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==U||$!==k)&&vc(t,m,o,k),mr=!1,$=t.memoizedState,m.state=$,wi(t,o,m,c);var K=t.memoizedState;_!==U||$!==K||ot.current||mr?(typeof W=="function"&&(ma(t,r,W,o),K=t.memoizedState),(P=mr||mc(t,r,P,o,$,K,k)||!1)?(D||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,K,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,K,k)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=K),m.props=o,m.state=K,m.context=k,o=P):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),o=!1)}return xa(e,t,r,o,d,c)}function xa(e,t,r,o,c,d){Cc(e,t);var m=(t.flags&128)!==0;if(!o&&!m)return c&&Au(t,r,!1),Jt(e,t,d);o=t.stateNode,Kf.current=t;var _=m&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&m?(t.child=gn(t,e.child,null,d),t.child=gn(t,null,_,d)):st(e,t,_,d),t.memoizedState=o.state,c&&Au(t,r,!0),t.child}function Tc(e){var t=e.stateNode;t.pendingContext?Lu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Lu(e,t.context,!1),na(e,t.containerInfo)}function Pc(e,t,r,o,c){return mn(),Jo(c),t.flags|=256,st(e,t,r,o),t.child}var _a={dehydrated:null,treeContext:null,retryLane:0};function ka(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lc(e,t,r){var o=t.pendingProps,c=Oe.current,d=!1,m=(t.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(c&2)!==0),_?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),je(Oe,c&1),e===null)return Qo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=o.children,e=o.fallback,d?(o=t.mode,d=t.child,m={mode:"hidden",children:m},(o&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=m):d=Fi(m,o,0,null),e=Vr(e,o,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=ka(r),t.memoizedState=_a,e):ba(t,m));if(c=e.memoizedState,c!==null&&(_=c.dehydrated,_!==null))return Gf(e,t,m,o,_,c,r);if(d){d=o.fallback,m=t.mode,c=e.child,_=c.sibling;var k={mode:"hidden",children:o.children};return(m&1)===0&&t.child!==c?(o=t.child,o.childLanes=0,o.pendingProps=k,t.deletions=null):(o=kr(c,k),o.subtreeFlags=c.subtreeFlags&14680064),_!==null?d=kr(_,d):(d=Vr(d,m,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,m=e.child.memoizedState,m=m===null?ka(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},d.memoizedState=m,d.childLanes=e.childLanes&~r,t.memoizedState=_a,o}return d=e.child,e=d.sibling,o=kr(d,{mode:"visible",children:o.children}),(t.mode&1)===0&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function ba(e,t){return t=Fi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ci(e,t,r,o){return o!==null&&Jo(o),gn(t,e.child,null,r),e=ba(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gf(e,t,r,o,c,d,m){if(r)return t.flags&256?(t.flags&=-257,o=va(Error(s(422))),Ci(e,t,m,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=o.fallback,c=t.mode,o=Fi({mode:"visible",children:o.children},c,0,null),d=Vr(d,c,m,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,(t.mode&1)!==0&&gn(t,e.child,null,m),t.child.memoizedState=ka(m),t.memoizedState=_a,d);if((t.mode&1)===0)return Ci(e,t,m,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var _=o.dgst;return o=_,d=Error(s(419)),o=va(d,o,void 0),Ci(e,t,m,o)}if(_=(m&e.childLanes)!==0,lt||_){if(o=He,o!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(o.suspendedLanes|m))!==0?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Gt(e,c),Ot(o,e,c,-1))}return Ma(),o=va(Error(s(421))),Ci(e,t,m,o)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=ap.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,mt=dr(c.nextSibling),pt=t,Te=!0,Nt=null,e!==null&&(yt[wt++]=Ht,yt[wt++]=Kt,yt[wt++]=Ir,Ht=e.id,Kt=e.overflow,Ir=t),t=ba(t,o.children),t.flags|=4096,t)}function Oc(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),ea(e.return,t,r)}function Sa(e,t,r,o,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=c)}function Ac(e,t,r){var o=t.pendingProps,c=o.revealOrder,d=o.tail;if(st(e,t,o.children,r),o=Oe.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oc(e,r,t);else if(e.tag===19)Oc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(je(Oe,o),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&xi(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Sa(t,!1,c,r,d);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&xi(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Sa(t,!0,r,null,d);break;case"together":Sa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ni(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Fr|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=kr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=kr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Qf(e,t,r){switch(t.tag){case 3:Tc(t),mn();break;case 5:Ku(t);break;case 1:at(t.type)&&ci(t);break;case 4:na(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,c=t.memoizedProps.value;je(gi,o._currentValue),o._currentValue=c;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(je(Oe,Oe.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Lc(e,t,r):(je(Oe,Oe.current&1),e=Jt(e,t,r),e!==null?e.sibling:null);je(Oe,Oe.current&1);break;case 19:if(o=(r&t.childLanes)!==0,(e.flags&128)!==0){if(o)return Ac(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),je(Oe,Oe.current),o)break;return null;case 22:case 23:return t.lanes=0,Ec(e,t,r)}return Jt(e,t,r)}var Rc,ja,Ic,$c;Rc=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ja=function(){},Ic=function(e,t,r,o){var c=e.memoizedProps;if(c!==o){e=t.stateNode,Ur(Dt.current);var d=null;switch(r){case"input":c=Q(e,c),o=Q(e,o),d=[];break;case"select":c=B({},c,{value:void 0}),o=B({},o,{value:void 0}),d=[];break;case"textarea":c=Xr(e,c),o=Xr(e,o),d=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=ai)}qn(r,o);var m;r=null;for(P in c)if(!o.hasOwnProperty(P)&&c.hasOwnProperty(P)&&c[P]!=null)if(P==="style"){var _=c[P];for(m in _)_.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(a.hasOwnProperty(P)?d||(d=[]):(d=d||[]).push(P,null));for(P in o){var k=o[P];if(_=c?.[P],o.hasOwnProperty(P)&&k!==_&&(k!=null||_!=null))if(P==="style")if(_){for(m in _)!_.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in k)k.hasOwnProperty(m)&&_[m]!==k[m]&&(r||(r={}),r[m]=k[m])}else r||(d||(d=[]),d.push(P,r)),r=k;else P==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,_=_?_.__html:void 0,k!=null&&_!==k&&(d=d||[]).push(P,k)):P==="children"?typeof k!="string"&&typeof k!="number"||(d=d||[]).push(P,""+k):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(a.hasOwnProperty(P)?(k!=null&&P==="onScroll"&&Ce("scroll",e),d||_===k||(d=[])):(d=d||[]).push(P,k))}r&&(d=d||[]).push("style",r);var P=d;(t.updateQueue=P)&&(t.flags|=4)}},$c=function(e,t,r,o){r!==o&&(t.flags|=4)};function ks(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function Jf(e,t,r){var o=t.pendingProps;switch(Ko(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return at(t.type)&&ui(),tt(t),null;case 3:return o=t.stateNode,wn(),Ne(ot),Ne(Ze),oa(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(pi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nt!==null&&($a(Nt),Nt=null))),ja(e,t),tt(t),null;case 5:sa(t);var c=Ur(vs.current);if(r=t.type,e!==null&&t.stateNode!=null)Ic(e,t,r,o,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(s(166));return tt(t),null}if(e=Ur(Dt.current),pi(t)){o=t.stateNode,r=t.type;var d=t.memoizedProps;switch(o[$t]=t,o[hs]=d,e=(t.mode&1)!==0,r){case"dialog":Ce("cancel",o),Ce("close",o);break;case"iframe":case"object":case"embed":Ce("load",o);break;case"video":case"audio":for(c=0;c<us.length;c++)Ce(us[c],o);break;case"source":Ce("error",o);break;case"img":case"image":case"link":Ce("error",o),Ce("load",o);break;case"details":Ce("toggle",o);break;case"input":ye(o,d),Ce("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},Ce("invalid",o);break;case"textarea":Fn(o,d),Ce("invalid",o)}qn(r,d),c=null;for(var m in d)if(d.hasOwnProperty(m)){var _=d[m];m==="children"?typeof _=="string"?o.textContent!==_&&(d.suppressHydrationWarning!==!0&&oi(o.textContent,_,e),c=["children",_]):typeof _=="number"&&o.textContent!==""+_&&(d.suppressHydrationWarning!==!0&&oi(o.textContent,_,e),c=["children",""+_]):a.hasOwnProperty(m)&&_!=null&&m==="onScroll"&&Ce("scroll",o)}switch(r){case"input":er(o),jt(o,d,!0);break;case"textarea":er(o),Tr(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=ai)}o=c,t.updateQueue=o,o!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bn(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=m.createElement(r,{is:o.is}):(e=m.createElement(r),r==="select"&&(m=e,o.multiple?m.multiple=!0:o.size&&(m.size=o.size))):e=m.createElementNS(e,r),e[$t]=t,e[hs]=o,Rc(e,t,!1,!1),t.stateNode=e;e:{switch(m=Rt(r,o),r){case"dialog":Ce("cancel",e),Ce("close",e),c=o;break;case"iframe":case"object":case"embed":Ce("load",e),c=o;break;case"video":case"audio":for(c=0;c<us.length;c++)Ce(us[c],e);c=o;break;case"source":Ce("error",e),c=o;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),c=o;break;case"details":Ce("toggle",e),c=o;break;case"input":ye(e,o),c=Q(e,o),Ce("invalid",e);break;case"option":c=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=B({},o,{value:void 0}),Ce("invalid",e);break;case"textarea":Fn(e,o),c=Xr(e,o),Ce("invalid",e);break;default:c=o}qn(r,c),_=c;for(d in _)if(_.hasOwnProperty(d)){var k=_[d];d==="style"?Xe(e,k):d==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Vn(e,k)):d==="children"?typeof k=="string"?(r!=="textarea"||k!=="")&&rr(e,k):typeof k=="number"&&rr(e,""+k):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(a.hasOwnProperty(d)?k!=null&&d==="onScroll"&&Ce("scroll",e):k!=null&&R(e,d,k,m))}switch(r){case"input":er(e),jt(e,o,!1);break;case"textarea":er(e),Tr(e);break;case"option":o.value!=null&&e.setAttribute("value",""+ce(o.value));break;case"select":e.multiple=!!o.multiple,d=o.value,d!=null?tr(e,!!o.multiple,d,!1):o.defaultValue!=null&&tr(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=ai)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)$c(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(s(166));if(r=Ur(vs.current),Ur(Dt.current),pi(t)){if(o=t.stateNode,r=t.memoizedProps,o[$t]=t,(d=o.nodeValue!==r)&&(e=pt,e!==null))switch(e.tag){case 3:oi(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oi(o.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[$t]=t,t.stateNode=o}return tt(t),null;case 13:if(Ne(Oe),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&mt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Mu(),mn(),t.flags|=98560,d=!1;else if(d=pi(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[$t]=t}else mn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;tt(t),d=!1}else Nt!==null&&($a(Nt),Nt=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Oe.current&1)!==0?We===0&&(We=3):Ma())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return wn(),ja(e,t),e===null&&cs(t.stateNode.containerInfo),tt(t),null;case 10:return Zo(t.type._context),tt(t),null;case 17:return at(t.type)&&ui(),tt(t),null;case 19:if(Ne(Oe),d=t.memoizedState,d===null)return tt(t),null;if(o=(t.flags&128)!==0,m=d.rendering,m===null)if(o)ks(d,!1);else{if(We!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=xi(e),m!==null){for(t.flags|=128,ks(d,!1),o=m.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)d=r,e=o,d.flags&=14680066,m=d.alternate,m===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type,e=m.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return je(Oe,Oe.current&1|2),t.child}e=e.sibling}d.tail!==null&&Ie()>bn&&(t.flags|=128,o=!0,ks(d,!1),t.lanes=4194304)}else{if(!o)if(e=xi(m),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ks(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!Te)return tt(t),null}else 2*Ie()-d.renderingStartTime>bn&&r!==1073741824&&(t.flags|=128,o=!0,ks(d,!1),t.lanes=4194304);d.isBackwards?(m.sibling=t.child,t.child=m):(r=d.last,r!==null?r.sibling=m:t.child=m,d.last=m)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Ie(),t.sibling=null,r=Oe.current,je(Oe,o?r&1|2:r&1),t):(tt(t),null);case 22:case 23:return Ua(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(gt&1073741824)!==0&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Yf(e,t){switch(Ko(t),t.tag){case 1:return at(t.type)&&ui(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wn(),Ne(ot),Ne(Ze),oa(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return sa(t),null;case 13:if(Ne(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));mn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Oe),null;case 4:return wn(),null;case 10:return Zo(t.type._context),null;case 22:case 23:return Ua(),null;case 24:return null;default:return null}}var Ti=!1,rt=!1,Xf=typeof WeakSet=="function"?WeakSet:Set,V=null;function _n(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){Re(e,t,o)}else r.current=null}function Ea(e,t,r){try{r()}catch(o){Re(e,t,o)}}var Dc=!1;function Zf(e,t){if(Uo=Qs,e=mu(),Po(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var c=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var m=0,_=-1,k=-1,P=0,D=0,U=e,$=null;t:for(;;){for(var W;U!==r||c!==0&&U.nodeType!==3||(_=m+c),U!==d||o!==0&&U.nodeType!==3||(k=m+o),U.nodeType===3&&(m+=U.nodeValue.length),(W=U.firstChild)!==null;)$=U,U=W;for(;;){if(U===e)break t;if($===r&&++P===c&&(_=m),$===d&&++D===o&&(k=m),(W=U.nextSibling)!==null)break;U=$,$=U.parentNode}U=W}r=_===-1||k===-1?null:{start:_,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(Mo={focusedElem:e,selectionRange:r},Qs=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var K=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(K!==null){var G=K.memoizedProps,$e=K.memoizedState,C=t.stateNode,S=C.getSnapshotBeforeUpdate(t.elementType===t.type?G:Tt(t.type,G),$e);C.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(M){Re(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return K=Dc,Dc=!1,K}function bs(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Ea(t,r,d)}c=c.next}while(c!==o)}}function Pi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function Ca(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Uc(e){var t=e.alternate;t!==null&&(e.alternate=null,Uc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$t],delete t[hs],delete t[Wo],delete t[If],delete t[$f])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mc(e){return e.tag===5||e.tag===3||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Na(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ai));else if(o!==4&&(e=e.child,e!==null))for(Na(e,t,r),e=e.sibling;e!==null;)Na(e,t,r),e=e.sibling}function Ta(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Ta(e,t,r),e=e.sibling;e!==null;)Ta(e,t,r),e=e.sibling}var Qe=null,Pt=!1;function vr(e,t,r){for(r=r.child;r!==null;)zc(e,t,r),r=r.sibling}function zc(e,t,r){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Ws,r)}catch{}switch(r.tag){case 5:rt||_n(r,t);case 6:var o=Qe,c=Pt;Qe=null,vr(e,t,r),Qe=o,Pt=c,Qe!==null&&(Pt?(e=Qe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Qe.removeChild(r.stateNode));break;case 18:Qe!==null&&(Pt?(e=Qe,r=r.stateNode,e.nodeType===8?Bo(e.parentNode,r):e.nodeType===1&&Bo(e,r),ts(e)):Bo(Qe,r.stateNode));break;case 4:o=Qe,c=Pt,Qe=r.stateNode.containerInfo,Pt=!0,vr(e,t,r),Qe=o,Pt=c;break;case 0:case 11:case 14:case 15:if(!rt&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var d=c,m=d.destroy;d=d.tag,m!==void 0&&((d&2)!==0||(d&4)!==0)&&Ea(r,t,m),c=c.next}while(c!==o)}vr(e,t,r);break;case 1:if(!rt&&(_n(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(_){Re(r,t,_)}vr(e,t,r);break;case 21:vr(e,t,r);break;case 22:r.mode&1?(rt=(o=rt)||r.memoizedState!==null,vr(e,t,r),rt=o):vr(e,t,r);break;default:vr(e,t,r)}}function Bc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Xf),t.forEach(function(o){var c=lp.bind(null,e,o);r.has(o)||(r.add(o),o.then(c,c))})}}function Lt(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];try{var d=e,m=t,_=m;e:for(;_!==null;){switch(_.tag){case 5:Qe=_.stateNode,Pt=!1;break e;case 3:Qe=_.stateNode.containerInfo,Pt=!0;break e;case 4:Qe=_.stateNode.containerInfo,Pt=!0;break e}_=_.return}if(Qe===null)throw Error(s(160));zc(d,m,c),Qe=null,Pt=!1;var k=c.alternate;k!==null&&(k.return=null),c.return=null}catch(P){Re(c,t,P)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wc(t,e),t=t.sibling}function Wc(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(t,e),Mt(e),o&4){try{bs(3,e,e.return),Pi(3,e)}catch(G){Re(e,e.return,G)}try{bs(5,e,e.return)}catch(G){Re(e,e.return,G)}}break;case 1:Lt(t,e),Mt(e),o&512&&r!==null&&_n(r,r.return);break;case 5:if(Lt(t,e),Mt(e),o&512&&r!==null&&_n(r,r.return),e.flags&32){var c=e.stateNode;try{rr(c,"")}catch(G){Re(e,e.return,G)}}if(o&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,m=r!==null?r.memoizedProps:d,_=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{_==="input"&&d.type==="radio"&&d.name!=null&&De(c,d),Rt(_,m);var P=Rt(_,d);for(m=0;m<k.length;m+=2){var D=k[m],U=k[m+1];D==="style"?Xe(c,U):D==="dangerouslySetInnerHTML"?Vn(c,U):D==="children"?rr(c,U):R(c,D,U,P)}switch(_){case"input":nt(c,d);break;case"textarea":zn(c,d);break;case"select":var $=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var W=d.value;W!=null?tr(c,!!d.multiple,W,!1):$!==!!d.multiple&&(d.defaultValue!=null?tr(c,!!d.multiple,d.defaultValue,!0):tr(c,!!d.multiple,d.multiple?[]:"",!1))}c[hs]=d}catch(G){Re(e,e.return,G)}}break;case 6:if(Lt(t,e),Mt(e),o&4){if(e.stateNode===null)throw Error(s(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(G){Re(e,e.return,G)}}break;case 3:if(Lt(t,e),Mt(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{ts(t.containerInfo)}catch(G){Re(e,e.return,G)}break;case 4:Lt(t,e),Mt(e);break;case 13:Lt(t,e),Mt(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(Oa=Ie())),o&4&&Bc(e);break;case 22:if(D=r!==null&&r.memoizedState!==null,e.mode&1?(rt=(P=rt)||D,Lt(t,e),rt=P):Lt(t,e),Mt(e),o&8192){if(P=e.memoizedState!==null,(e.stateNode.isHidden=P)&&!D&&(e.mode&1)!==0)for(V=e,D=e.child;D!==null;){for(U=V=D;V!==null;){switch($=V,W=$.child,$.tag){case 0:case 11:case 14:case 15:bs(4,$,$.return);break;case 1:_n($,$.return);var K=$.stateNode;if(typeof K.componentWillUnmount=="function"){o=$,r=$.return;try{t=o,K.props=t.memoizedProps,K.state=t.memoizedState,K.componentWillUnmount()}catch(G){Re(o,r,G)}}break;case 5:_n($,$.return);break;case 22:if($.memoizedState!==null){Hc(U);continue}}W!==null?(W.return=$,V=W):Hc(U)}D=D.sibling}e:for(D=null,U=e;;){if(U.tag===5){if(D===null){D=U;try{c=U.stateNode,P?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(_=U.stateNode,k=U.memoizedProps.style,m=k!=null&&k.hasOwnProperty("display")?k.display:null,_.style.display=xe("display",m))}catch(G){Re(e,e.return,G)}}}else if(U.tag===6){if(D===null)try{U.stateNode.nodeValue=P?"":U.memoizedProps}catch(G){Re(e,e.return,G)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===e)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===e)break e;for(;U.sibling===null;){if(U.return===null||U.return===e)break e;D===U&&(D=null),U=U.return}D===U&&(D=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:Lt(t,e),Mt(e),o&4&&Bc(e);break;case 21:break;default:Lt(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Mc(r)){var o=r;break e}r=r.return}throw Error(s(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(rr(c,""),o.flags&=-33);var d=Fc(e);Ta(e,d,c);break;case 3:case 4:var m=o.stateNode.containerInfo,_=Fc(e);Na(e,_,m);break;default:throw Error(s(161))}}catch(k){Re(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ep(e,t,r){V=e,Vc(e)}function Vc(e,t,r){for(var o=(e.mode&1)!==0;V!==null;){var c=V,d=c.child;if(c.tag===22&&o){var m=c.memoizedState!==null||Ti;if(!m){var _=c.alternate,k=_!==null&&_.memoizedState!==null||rt;_=Ti;var P=rt;if(Ti=m,(rt=k)&&!P)for(V=c;V!==null;)m=V,k=m.child,m.tag===22&&m.memoizedState!==null?Kc(c):k!==null?(k.return=m,V=k):Kc(c);for(;d!==null;)V=d,Vc(d),d=d.sibling;V=c,Ti=_,rt=P}qc(e)}else(c.subtreeFlags&8772)!==0&&d!==null?(d.return=c,V=d):qc(e)}}function qc(e){for(;V!==null;){var t=V;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:rt||Pi(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!rt)if(r===null)o.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:Tt(t.type,r.memoizedProps);o.componentDidUpdate(c,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Hu(t,d,o);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Hu(t,m,r)}break;case 5:var _=t.stateNode;if(r===null&&t.flags&4){r=_;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&r.focus();break;case"img":k.src&&(r.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var P=t.alternate;if(P!==null){var D=P.memoizedState;if(D!==null){var U=D.dehydrated;U!==null&&ts(U)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}rt||t.flags&512&&Ca(t)}catch($){Re(t,t.return,$)}}if(t===e){V=null;break}if(r=t.sibling,r!==null){r.return=t.return,V=r;break}V=t.return}}function Hc(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var r=t.sibling;if(r!==null){r.return=t.return,V=r;break}V=t.return}}function Kc(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Pi(4,t)}catch(k){Re(t,r,k)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var c=t.return;try{o.componentDidMount()}catch(k){Re(t,c,k)}}var d=t.return;try{Ca(t)}catch(k){Re(t,d,k)}break;case 5:var m=t.return;try{Ca(t)}catch(k){Re(t,m,k)}}}catch(k){Re(t,t.return,k)}if(t===e){V=null;break}var _=t.sibling;if(_!==null){_.return=t.return,V=_;break}V=t.return}}var tp=Math.ceil,Li=z.ReactCurrentDispatcher,Pa=z.ReactCurrentOwner,kt=z.ReactCurrentBatchConfig,pe=0,He=null,Ue=null,Je=0,gt=0,kn=hr(0),We=0,Ss=null,Fr=0,Oi=0,La=0,js=null,ut=null,Oa=0,bn=1/0,Yt=null,Ai=!1,Aa=null,yr=null,Ri=!1,wr=null,Ii=0,Es=0,Ra=null,$i=-1,Di=0;function it(){return(pe&6)!==0?Ie():$i!==-1?$i:$i=Ie()}function xr(e){return(e.mode&1)===0?1:(pe&2)!==0&&Je!==0?Je&-Je:Uf.transition!==null?(Di===0&&(Di=Fl()),Di):(e=_e,e!==0||(e=window.event,e=e===void 0?16:Ql(e.type)),e)}function Ot(e,t,r,o){if(50<Es)throw Es=0,Ra=null,Error(s(185));Jn(e,r,o),((pe&2)===0||e!==He)&&(e===He&&((pe&2)===0&&(Oi|=r),We===4&&_r(e,Je)),ct(e,o),r===1&&pe===0&&(t.mode&1)===0&&(bn=Ie()+500,di&&pr()))}function ct(e,t){var r=e.callbackNode;Dh(e,t);var o=Hs(e,e===He?Je:0);if(o===0)r!==null&&Dl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&Dl(r),t===1)e.tag===0?Df(Qc.bind(null,e)):Ru(Qc.bind(null,e)),Af(function(){(pe&6)===0&&pr()}),r=null;else{switch(zl(o)){case 1:r=fo;break;case 4:r=Ul;break;case 16:r=Bs;break;case 536870912:r=Ml;break;default:r=Bs}r=nd(r,Gc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Gc(e,t){if($i=-1,Di=0,(pe&6)!==0)throw Error(s(327));var r=e.callbackNode;if(Sn()&&e.callbackNode!==r)return null;var o=Hs(e,e===He?Je:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=Ui(e,o);else{t=o;var c=pe;pe|=2;var d=Yc();(He!==e||Je!==t)&&(Yt=null,bn=Ie()+500,Br(e,t));do try{sp();break}catch(_){Jc(e,_)}while(!0);Xo(),Li.current=d,pe=c,Ue!==null?t=0:(He=null,Je=0,t=We)}if(t!==0){if(t===2&&(c=po(e),c!==0&&(o=c,t=Ia(e,c))),t===1)throw r=Ss,Br(e,0),_r(e,o),ct(e,Ie()),r;if(t===6)_r(e,o);else{if(c=e.current.alternate,(o&30)===0&&!rp(c)&&(t=Ui(e,o),t===2&&(d=po(e),d!==0&&(o=d,t=Ia(e,d))),t===1))throw r=Ss,Br(e,0),_r(e,o),ct(e,Ie()),r;switch(e.finishedWork=c,e.finishedLanes=o,t){case 0:case 1:throw Error(s(345));case 2:Wr(e,ut,Yt);break;case 3:if(_r(e,o),(o&130023424)===o&&(t=Oa+500-Ie(),10<t)){if(Hs(e,0)!==0)break;if(c=e.suspendedLanes,(c&o)!==o){it(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=zo(Wr.bind(null,e,ut,Yt),t);break}Wr(e,ut,Yt);break;case 4:if(_r(e,o),(o&4194240)===o)break;for(t=e.eventTimes,c=-1;0<o;){var m=31-Et(o);d=1<<m,m=t[m],m>c&&(c=m),o&=~d}if(o=c,o=Ie()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*tp(o/1960))-o,10<o){e.timeoutHandle=zo(Wr.bind(null,e,ut,Yt),o);break}Wr(e,ut,Yt);break;case 5:Wr(e,ut,Yt);break;default:throw Error(s(329))}}}return ct(e,Ie()),e.callbackNode===r?Gc.bind(null,e):null}function Ia(e,t){var r=js;return e.current.memoizedState.isDehydrated&&(Br(e,t).flags|=256),e=Ui(e,t),e!==2&&(t=ut,ut=r,t!==null&&$a(t)),e}function $a(e){ut===null?ut=e:ut.push.apply(ut,e)}function rp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var c=r[o],d=c.getSnapshot;c=c.value;try{if(!Ct(d(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _r(e,t){for(t&=~La,t&=~Oi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Et(t),o=1<<r;e[r]=-1,t&=~o}}function Qc(e){if((pe&6)!==0)throw Error(s(327));Sn();var t=Hs(e,0);if((t&1)===0)return ct(e,Ie()),null;var r=Ui(e,t);if(e.tag!==0&&r===2){var o=po(e);o!==0&&(t=o,r=Ia(e,o))}if(r===1)throw r=Ss,Br(e,0),_r(e,t),ct(e,Ie()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wr(e,ut,Yt),ct(e,Ie()),null}function Da(e,t){var r=pe;pe|=1;try{return e(t)}finally{pe=r,pe===0&&(bn=Ie()+500,di&&pr())}}function zr(e){wr!==null&&wr.tag===0&&(pe&6)===0&&Sn();var t=pe;pe|=1;var r=kt.transition,o=_e;try{if(kt.transition=null,_e=1,e)return e()}finally{_e=o,kt.transition=r,pe=t,(pe&6)===0&&pr()}}function Ua(){gt=kn.current,Ne(kn)}function Br(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Of(r)),Ue!==null)for(r=Ue.return;r!==null;){var o=r;switch(Ko(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&ui();break;case 3:wn(),Ne(ot),Ne(Ze),oa();break;case 5:sa(o);break;case 4:wn();break;case 13:Ne(Oe);break;case 19:Ne(Oe);break;case 10:Zo(o.type._context);break;case 22:case 23:Ua()}r=r.return}if(He=e,Ue=e=kr(e.current,null),Je=gt=t,We=0,Ss=null,La=Oi=Fr=0,ut=js=null,Dr!==null){for(t=0;t<Dr.length;t++)if(r=Dr[t],o=r.interleaved,o!==null){r.interleaved=null;var c=o.next,d=r.pending;if(d!==null){var m=d.next;d.next=c,o.next=m}r.pending=o}Dr=null}return e}function Jc(e,t){do{var r=Ue;try{if(Xo(),_i.current=ji,ki){for(var o=Ae.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}ki=!1}if(Mr=0,qe=Be=Ae=null,ys=!1,ws=0,Pa.current=null,r===null||r.return===null){We=1,Ss=t,Ue=null;break}e:{var d=e,m=r.return,_=r,k=t;if(t=Je,_.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var P=k,D=_,U=D.tag;if((D.mode&1)===0&&(U===0||U===11||U===15)){var $=D.alternate;$?(D.updateQueue=$.updateQueue,D.memoizedState=$.memoizedState,D.lanes=$.lanes):(D.updateQueue=null,D.memoizedState=null)}var W=_c(m);if(W!==null){W.flags&=-257,kc(W,m,_,d,t),W.mode&1&&xc(d,P,t),t=W,k=P;var K=t.updateQueue;if(K===null){var G=new Set;G.add(k),t.updateQueue=G}else K.add(k);break e}else{if((t&1)===0){xc(d,P,t),Ma();break e}k=Error(s(426))}}else if(Te&&_.mode&1){var $e=_c(m);if($e!==null){($e.flags&65536)===0&&($e.flags|=256),kc($e,m,_,d,t),Jo(xn(k,_));break e}}d=k=xn(k,_),We!==4&&(We=2),js===null?js=[d]:js.push(d),d=m;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var C=yc(d,k,t);qu(d,C);break e;case 1:_=k;var S=d.type,N=d.stateNode;if((d.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(yr===null||!yr.has(N)))){d.flags|=65536,t&=-t,d.lanes|=t;var M=wc(d,_,t);qu(d,M);break e}}d=d.return}while(d!==null)}Zc(r)}catch(J){t=J,Ue===r&&r!==null&&(Ue=r=r.return);continue}break}while(!0)}function Yc(){var e=Li.current;return Li.current=ji,e===null?ji:e}function Ma(){(We===0||We===3||We===2)&&(We=4),He===null||(Fr&268435455)===0&&(Oi&268435455)===0||_r(He,Je)}function Ui(e,t){var r=pe;pe|=2;var o=Yc();(He!==e||Je!==t)&&(Yt=null,Br(e,t));do try{np();break}catch(c){Jc(e,c)}while(!0);if(Xo(),pe=r,Li.current=o,Ue!==null)throw Error(s(261));return He=null,Je=0,We}function np(){for(;Ue!==null;)Xc(Ue)}function sp(){for(;Ue!==null&&!Nh();)Xc(Ue)}function Xc(e){var t=rd(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?Zc(e):Ue=t,Pa.current=null}function Zc(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Jf(r,t,gt),r!==null){Ue=r;return}}else{if(r=Yf(r,t),r!==null){r.flags&=32767,Ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Ue=null;return}}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);We===0&&(We=5)}function Wr(e,t,r){var o=_e,c=kt.transition;try{kt.transition=null,_e=1,ip(e,t,r,o)}finally{kt.transition=c,_e=o}return null}function ip(e,t,r,o){do Sn();while(wr!==null);if((pe&6)!==0)throw Error(s(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(Uh(e,d),e===He&&(Ue=He=null,Je=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Ri||(Ri=!0,nd(Bs,function(){return Sn(),null})),d=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||d){d=kt.transition,kt.transition=null;var m=_e;_e=1;var _=pe;pe|=4,Pa.current=null,Zf(e,r),Wc(r,e),jf(Mo),Qs=!!Uo,Mo=Uo=null,e.current=r,ep(r),Th(),pe=_,_e=m,kt.transition=d}else e.current=r;if(Ri&&(Ri=!1,wr=e,Ii=c),d=e.pendingLanes,d===0&&(yr=null),Oh(r.stateNode),ct(e,Ie()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],o(c.value,{componentStack:c.stack,digest:c.digest});if(Ai)throw Ai=!1,e=Aa,Aa=null,e;return(Ii&1)!==0&&e.tag!==0&&Sn(),d=e.pendingLanes,(d&1)!==0?e===Ra?Es++:(Es=0,Ra=e):Es=0,pr(),null}function Sn(){if(wr!==null){var e=zl(Ii),t=kt.transition,r=_e;try{if(kt.transition=null,_e=16>e?16:e,wr===null)var o=!1;else{if(e=wr,wr=null,Ii=0,(pe&6)!==0)throw Error(s(331));var c=pe;for(pe|=4,V=e.current;V!==null;){var d=V,m=d.child;if((V.flags&16)!==0){var _=d.deletions;if(_!==null){for(var k=0;k<_.length;k++){var P=_[k];for(V=P;V!==null;){var D=V;switch(D.tag){case 0:case 11:case 15:bs(8,D,d)}var U=D.child;if(U!==null)U.return=D,V=U;else for(;V!==null;){D=V;var $=D.sibling,W=D.return;if(Uc(D),D===P){V=null;break}if($!==null){$.return=W,V=$;break}V=W}}}var K=d.alternate;if(K!==null){var G=K.child;if(G!==null){K.child=null;do{var $e=G.sibling;G.sibling=null,G=$e}while(G!==null)}}V=d}}if((d.subtreeFlags&2064)!==0&&m!==null)m.return=d,V=m;else e:for(;V!==null;){if(d=V,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:bs(9,d,d.return)}var C=d.sibling;if(C!==null){C.return=d.return,V=C;break e}V=d.return}}var S=e.current;for(V=S;V!==null;){m=V;var N=m.child;if((m.subtreeFlags&2064)!==0&&N!==null)N.return=m,V=N;else e:for(m=S;V!==null;){if(_=V,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:Pi(9,_)}}catch(J){Re(_,_.return,J)}if(_===m){V=null;break e}var M=_.sibling;if(M!==null){M.return=_.return,V=M;break e}V=_.return}}if(pe=c,pr(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Ws,e)}catch{}o=!0}return o}finally{_e=r,kt.transition=t}}return!1}function ed(e,t,r){t=xn(r,t),t=yc(e,t,1),e=gr(e,t,1),t=it(),e!==null&&(Jn(e,1,t),ct(e,t))}function Re(e,t,r){if(e.tag===3)ed(e,e,r);else for(;t!==null;){if(t.tag===3){ed(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(yr===null||!yr.has(o))){e=xn(r,e),e=wc(t,e,1),t=gr(t,e,1),e=it(),t!==null&&(Jn(t,1,e),ct(t,e));break}}t=t.return}}function op(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&r,He===e&&(Je&r)===r&&(We===4||We===3&&(Je&130023424)===Je&&500>Ie()-Oa?Br(e,0):La|=r),ct(e,t)}function td(e,t){t===0&&((e.mode&1)===0?t=1:(t=qs,qs<<=1,(qs&130023424)===0&&(qs=4194304)));var r=it();e=Gt(e,t),e!==null&&(Jn(e,t,r),ct(e,r))}function ap(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),td(e,r)}function lp(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(s(314))}o!==null&&o.delete(t),td(e,r)}var rd;rd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)lt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return lt=!1,Qf(e,t,r);lt=(e.flags&131072)!==0}else lt=!1,Te&&(t.flags&1048576)!==0&&Iu(t,fi,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Ni(e,t),e=t.pendingProps;var c=hn(t,Ze.current);yn(t,r),c=ua(null,t,o,e,c,r);var d=ca();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(o)?(d=!0,ci(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,ra(t),c.updater=Ei,t.stateNode=c,c._reactInternals=t,ga(t,o,e,r),t=xa(null,t,o,!0,d,r)):(t.tag=0,Te&&d&&Ho(t),st(null,t,c,r),t=t.child),t;case 16:o=t.elementType;e:{switch(Ni(e,t),e=t.pendingProps,c=o._init,o=c(o._payload),t.type=o,c=t.tag=cp(o),e=Tt(o,e),c){case 0:t=wa(null,t,o,e,r);break e;case 1:t=Nc(null,t,o,e,r);break e;case 11:t=bc(null,t,o,e,r);break e;case 14:t=Sc(null,t,o,Tt(o.type,e),r);break e}throw Error(s(306,o,""))}return t;case 0:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Tt(o,c),wa(e,t,o,c,r);case 1:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Tt(o,c),Nc(e,t,o,c,r);case 3:e:{if(Tc(t),e===null)throw Error(s(387));o=t.pendingProps,d=t.memoizedState,c=d.element,Vu(e,t),wi(t,o,null,r);var m=t.memoizedState;if(o=m.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=xn(Error(s(423)),t),t=Pc(e,t,o,r,c);break e}else if(o!==c){c=xn(Error(s(424)),t),t=Pc(e,t,o,r,c);break e}else for(mt=dr(t.stateNode.containerInfo.firstChild),pt=t,Te=!0,Nt=null,r=Bu(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(mn(),o===c){t=Jt(e,t,r);break e}st(e,t,o,r)}t=t.child}return t;case 5:return Ku(t),e===null&&Qo(t),o=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,m=c.children,Fo(o,c)?m=null:d!==null&&Fo(o,d)&&(t.flags|=32),Cc(e,t),st(e,t,m,r),t.child;case 6:return e===null&&Qo(t),null;case 13:return Lc(e,t,r);case 4:return na(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=gn(t,null,o,r):st(e,t,o,r),t.child;case 11:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Tt(o,c),bc(e,t,o,c,r);case 7:return st(e,t,t.pendingProps,r),t.child;case 8:return st(e,t,t.pendingProps.children,r),t.child;case 12:return st(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,c=t.pendingProps,d=t.memoizedProps,m=c.value,je(gi,o._currentValue),o._currentValue=m,d!==null)if(Ct(d.value,m)){if(d.children===c.children&&!ot.current){t=Jt(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var _=d.dependencies;if(_!==null){m=d.child;for(var k=_.firstContext;k!==null;){if(k.context===o){if(d.tag===1){k=Qt(-1,r&-r),k.tag=2;var P=d.updateQueue;if(P!==null){P=P.shared;var D=P.pending;D===null?k.next=k:(k.next=D.next,D.next=k),P.pending=k}}d.lanes|=r,k=d.alternate,k!==null&&(k.lanes|=r),ea(d.return,r,t),_.lanes|=r;break}k=k.next}}else if(d.tag===10)m=d.type===t.type?null:d.child;else if(d.tag===18){if(m=d.return,m===null)throw Error(s(341));m.lanes|=r,_=m.alternate,_!==null&&(_.lanes|=r),ea(m,r,t),m=d.sibling}else m=d.child;if(m!==null)m.return=d;else for(m=d;m!==null;){if(m===t){m=null;break}if(d=m.sibling,d!==null){d.return=m.return,m=d;break}m=m.return}d=m}st(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,o=t.pendingProps.children,yn(t,r),c=xt(c),o=o(c),t.flags|=1,st(e,t,o,r),t.child;case 14:return o=t.type,c=Tt(o,t.pendingProps),c=Tt(o.type,c),Sc(e,t,o,c,r);case 15:return jc(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Tt(o,c),Ni(e,t),t.tag=1,at(o)?(e=!0,ci(t)):e=!1,yn(t,r),gc(t,o,c),ga(t,o,c,r),xa(null,t,o,!0,e,r);case 19:return Ac(e,t,r);case 22:return Ec(e,t,r)}throw Error(s(156,t.tag))};function nd(e,t){return $l(e,t)}function up(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,r,o){return new up(e,t,r,o)}function Fa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cp(e){if(typeof e=="function")return Fa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===de)return 11;if(e===Ye)return 14}return 2}function kr(e,t){var r=e.alternate;return r===null?(r=bt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mi(e,t,r,o,c,d){var m=2;if(o=e,typeof e=="function")Fa(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case te:return Vr(r.children,c,d,t);case se:m=8,c|=8;break;case Se:return e=bt(12,r,t,c|2),e.elementType=Se,e.lanes=d,e;case Fe:return e=bt(13,r,t,c),e.elementType=Fe,e.lanes=d,e;case Pe:return e=bt(19,r,t,c),e.elementType=Pe,e.lanes=d,e;case me:return Fi(r,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:m=10;break e;case be:m=9;break e;case de:m=11;break e;case Ye:m=14;break e;case Le:m=16,o=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=bt(m,r,t,c),t.elementType=e,t.type=o,t.lanes=d,t}function Vr(e,t,r,o){return e=bt(7,e,o,t),e.lanes=r,e}function Fi(e,t,r,o){return e=bt(22,e,o,t),e.elementType=me,e.lanes=r,e.stateNode={isHidden:!1},e}function za(e,t,r){return e=bt(6,e,null,t),e.lanes=r,e}function Ba(e,t,r){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dp(e,t,r,o,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mo(0),this.expirationTimes=mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mo(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Wa(e,t,r,o,c,d,m,_,k){return e=new dp(e,t,r,_,k),t===1?(t=1,d===!0&&(t|=8)):t=0,d=bt(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ra(d),e}function hp(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function sd(e){if(!e)return fr;e=e._reactInternals;e:{if(Or(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(at(r))return Ou(e,r,t)}return t}function id(e,t,r,o,c,d,m,_,k){return e=Wa(r,o,!0,e,c,d,m,_,k),e.context=sd(null),r=e.current,o=it(),c=xr(r),d=Qt(o,c),d.callback=t??null,gr(r,d,c),e.current.lanes=c,Jn(e,c,o),ct(e,o),e}function zi(e,t,r,o){var c=t.current,d=it(),m=xr(c);return r=sd(r),t.context===null?t.context=r:t.pendingContext=r,t=Qt(d,m),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=gr(c,t,m),e!==null&&(Ot(e,c,m,d),yi(e,c,m)),m}function Bi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function od(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Va(e,t){od(e,t),(e=e.alternate)&&od(e,t)}function fp(){return null}var ad=typeof reportError=="function"?reportError:function(e){console.error(e)};function qa(e){this._internalRoot=e}Wi.prototype.render=qa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));zi(e,t,null,null)},Wi.prototype.unmount=qa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zr(function(){zi(null,e,null,null)}),t[Vt]=null}};function Wi(e){this._internalRoot=e}Wi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vl();e={blockedOn:null,target:e,priority:t};for(var r=0;r<lr.length&&t!==0&&t<lr[r].priority;r++);lr.splice(r,0,e),r===0&&Kl(e)}};function Ha(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ld(){}function pp(e,t,r,o,c){if(c){if(typeof o=="function"){var d=o;o=function(){var P=Bi(m);d.call(P)}}var m=id(t,o,e,0,null,!1,!1,"",ld);return e._reactRootContainer=m,e[Vt]=m.current,cs(e.nodeType===8?e.parentNode:e),zr(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof o=="function"){var _=o;o=function(){var P=Bi(k);_.call(P)}}var k=Wa(e,0,!1,null,null,!1,!1,"",ld);return e._reactRootContainer=k,e[Vt]=k.current,cs(e.nodeType===8?e.parentNode:e),zr(function(){zi(t,k,r,o)}),k}function qi(e,t,r,o,c){var d=r._reactRootContainer;if(d){var m=d;if(typeof c=="function"){var _=c;c=function(){var k=Bi(m);_.call(k)}}zi(t,m,e,c)}else m=pp(r,t,e,c,o);return Bi(m)}Bl=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Qn(t.pendingLanes);r!==0&&(go(t,r|1),ct(t,Ie()),(pe&6)===0&&(bn=Ie()+500,pr()))}break;case 13:zr(function(){var o=Gt(e,1);if(o!==null){var c=it();Ot(o,e,1,c)}}),Va(e,1)}},vo=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var r=it();Ot(t,e,134217728,r)}Va(e,134217728)}},Wl=function(e){if(e.tag===13){var t=xr(e),r=Gt(e,t);if(r!==null){var o=it();Ot(r,e,t,o)}Va(e,t)}},Vl=function(){return _e},ql=function(e,t){var r=_e;try{return _e=e,t()}finally{_e=r}},sr=function(e,t,r){switch(t){case"input":if(nt(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var c=li(o);if(!c)throw Error(s(90));Mn(o),nt(o,c)}}}break;case"textarea":zn(e,r);break;case"select":t=r.value,t!=null&&tr(e,!!r.multiple,t,!1)}},Tl=Da,Pl=zr;var mp={usingClientEntryPoint:!1,Events:[fs,cn,li,Cl,Nl,Da]},Cs={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gp={bundleType:Cs.bundleType,version:Cs.version,rendererPackageName:Cs.rendererPackageName,rendererConfig:Cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rl(e),e===null?null:e.stateNode},findFiberByHostInstance:Cs.findFiberByHostInstance||fp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hi.isDisabled&&Hi.supportsFiber)try{Ws=Hi.inject(gp),It=Hi}catch{}}return dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mp,dt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ha(t))throw Error(s(200));return hp(e,t,null,r)},dt.createRoot=function(e,t){if(!Ha(e))throw Error(s(299));var r=!1,o="",c=ad;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Wa(e,1,!1,null,null,r,!1,o,c),e[Vt]=t.current,cs(e.nodeType===8?e.parentNode:e),new qa(t)},dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Rl(t),e=e===null?null:e.stateNode,e},dt.flushSync=function(e){return zr(e)},dt.hydrate=function(e,t,r){if(!Vi(t))throw Error(s(200));return qi(null,e,t,!0,r)},dt.hydrateRoot=function(e,t,r){if(!Ha(e))throw Error(s(405));var o=r!=null&&r.hydratedSources||null,c=!1,d="",m=ad;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=id(t,null,e,1,r??null,c,!1,d,m),e[Vt]=t.current,cs(e),o)for(e=0;e<o.length;e++)r=o[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new Wi(t)},dt.render=function(e,t,r){if(!Vi(t))throw Error(s(200));return qi(null,e,t,!1,r)},dt.unmountComponentAtNode=function(e){if(!Vi(e))throw Error(s(40));return e._reactRootContainer?(zr(function(){qi(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1},dt.unstable_batchedUpdates=Da,dt.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Vi(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return qi(e,t,r,!1,o)},dt.version="18.3.1-next-f1338f8080-20240426",dt}var gd;function jp(){if(gd)return Qa.exports;gd=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Qa.exports=Sp(),Qa.exports}var vd;function Ep(){if(vd)return Ki;vd=1;var l=jp();return Ki.createRoot=l.createRoot,Ki.hydrateRoot=l.hydrateRoot,Ki}var Cp=Ep();const Np=no(Cp),eh=Y.createContext(void 0),yd="hvt-theme";function Tp({children:l}){const[n,s]=Y.useState(()=>localStorage.getItem(yd)==="dark");Y.useEffect(()=>{localStorage.setItem(yd,n?"dark":"light"),n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const i=()=>{s(a=>!a)};return f.jsx(eh.Provider,{value:{isDarkMode:n,toggleTheme:i},children:l})}function Pp(){const l=Y.useContext(eh);if(l===void 0)throw new Error("useTheme must be used within a ThemeProvider");return l}const Lp={},wd=l=>{let n;const s=new Set,i=(y,w)=>{const b=typeof y=="function"?y(n):y;if(!Object.is(b,n)){const T=n;n=w??(typeof b!="object"||b===null)?b:Object.assign({},n,b),s.forEach(L=>L(n,T))}},a=()=>n,g={setState:i,getState:a,getInitialState:()=>v,subscribe:y=>(s.add(y),()=>s.delete(y)),destroy:()=>{(Lp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},v=n=l(i,a,g);return g},Op=l=>l?wd(l):wd;var Xa={exports:{}},Za={},el={exports:{}},tl={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xd;function Ap(){if(xd)return tl;xd=1;var l=Ds();function n(w,b){return w===b&&(w!==0||1/w===1/b)||w!==w&&b!==b}var s=typeof Object.is=="function"?Object.is:n,i=l.useState,a=l.useEffect,u=l.useLayoutEffect,h=l.useDebugValue;function p(w,b){var T=b(),L=i({inst:{value:T,getSnapshot:b}}),E=L[0].inst,x=L[1];return u(function(){E.value=T,E.getSnapshot=b,g(E)&&x({inst:E})},[w,T,b]),a(function(){return g(E)&&x({inst:E}),w(function(){g(E)&&x({inst:E})})},[w]),h(T),T}function g(w){var b=w.getSnapshot;w=w.value;try{var T=b();return!s(w,T)}catch{return!0}}function v(w,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:p;return tl.useSyncExternalStore=l.useSyncExternalStore!==void 0?l.useSyncExternalStore:y,tl}var _d;function Rp(){return _d||(_d=1,el.exports=Ap()),el.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kd;function Ip(){if(kd)return Za;kd=1;var l=Ds(),n=Rp();function s(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var i=typeof Object.is=="function"?Object.is:s,a=n.useSyncExternalStore,u=l.useRef,h=l.useEffect,p=l.useMemo,g=l.useDebugValue;return Za.useSyncExternalStoreWithSelector=function(v,y,w,b,T){var L=u(null);if(L.current===null){var E={hasValue:!1,value:null};L.current=E}else E=L.current;L=p(function(){function I(q){if(!O){if(O=!0,R=q,q=b(q),T!==void 0&&E.hasValue){var te=E.value;if(T(te,q))return z=te}return z=q}if(te=z,i(R,q))return te;var se=b(q);return T!==void 0&&T(te,se)?(R=q,te):(R=q,z=se)}var O=!1,R,z,re=w===void 0?null:w;return[function(){return I(y())},re===null?void 0:function(){return I(re())}]},[y,w,b,T]);var x=a(v,L[0],L[1]);return h(function(){E.hasValue=!0,E.value=x},[x]),g(x),x},Za}var bd;function $p(){return bd||(bd=1,Xa.exports=Ip()),Xa.exports}var Dp=$p();const Up=no(Dp),th={},{useDebugValue:Mp}=Zd,{useSyncExternalStoreWithSelector:Fp}=Up;let Sd=!1;const zp=l=>l;function Bp(l,n=zp,s){(th?"production":void 0)!=="production"&&s&&!Sd&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Sd=!0);const i=Fp(l.subscribe,l.getState,l.getServerState||l.getInitialState,n,s);return Mp(i),i}const jd=l=>{(th?"production":void 0)!=="production"&&typeof l!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof l=="function"?Op(l):l,s=(i,a)=>Bp(n,i,a);return Object.assign(s,n),s},so=l=>l?jd(l):jd,Wp={};function rh(l,n){let s;try{s=l()}catch{return}return{getItem:a=>{var u;const h=g=>g===null?null:JSON.parse(g,void 0),p=(u=s.getItem(a))!=null?u:null;return p instanceof Promise?p.then(h):h(p)},setItem:(a,u)=>s.setItem(a,JSON.stringify(u,void 0)),removeItem:a=>s.removeItem(a)}}const Rs=l=>n=>{try{const s=l(n);return s instanceof Promise?s:{then(i){return Rs(i)(s)},catch(i){return this}}}catch(s){return{then(i){return this},catch(i){return Rs(i)(s)}}}},Vp=(l,n)=>(s,i,a)=>{let u={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,I)=>({...I,...x}),...n},h=!1;const p=new Set,g=new Set;let v;try{v=u.getStorage()}catch{}if(!v)return l((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),s(...x)},i,a);const y=Rs(u.serialize),w=()=>{const x=u.partialize({...i()});let I;const O=y({state:x,version:u.version}).then(R=>v.setItem(u.name,R)).catch(R=>{I=R});if(I)throw I;return O},b=a.setState;a.setState=(x,I)=>{b(x,I),w()};const T=l((...x)=>{s(...x),w()},i,a);let L;const E=()=>{var x;if(!v)return;h=!1,p.forEach(O=>O(i()));const I=((x=u.onRehydrateStorage)==null?void 0:x.call(u,i()))||void 0;return Rs(v.getItem.bind(v))(u.name).then(O=>{if(O)return u.deserialize(O)}).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==u.version){if(u.migrate)return u.migrate(O.state,O.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return O.state}).then(O=>{var R;return L=u.merge(O,(R=i())!=null?R:T),s(L,!0),w()}).then(()=>{I?.(L,void 0),h=!0,g.forEach(O=>O(L))}).catch(O=>{I?.(void 0,O)})};return a.persist={setOptions:x=>{u={...u,...x},x.getStorage&&(v=x.getStorage())},clearStorage:()=>{v?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>E(),hasHydrated:()=>h,onHydrate:x=>(p.add(x),()=>{p.delete(x)}),onFinishHydration:x=>(g.add(x),()=>{g.delete(x)})},E(),L||T},qp=(l,n)=>(s,i,a)=>{let u={storage:rh(()=>localStorage),partialize:E=>E,version:0,merge:(E,x)=>({...x,...E}),...n},h=!1;const p=new Set,g=new Set;let v=u.storage;if(!v)return l((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),s(...E)},i,a);const y=()=>{const E=u.partialize({...i()});return v.setItem(u.name,{state:E,version:u.version})},w=a.setState;a.setState=(E,x)=>{w(E,x),y()};const b=l((...E)=>{s(...E),y()},i,a);a.getInitialState=()=>b;let T;const L=()=>{var E,x;if(!v)return;h=!1,p.forEach(O=>{var R;return O((R=i())!=null?R:b)});const I=((x=u.onRehydrateStorage)==null?void 0:x.call(u,(E=i())!=null?E:b))||void 0;return Rs(v.getItem.bind(v))(u.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==u.version){if(u.migrate)return[!0,u.migrate(O.state,O.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var R;const[z,re]=O;if(T=u.merge(re,(R=i())!=null?R:b),s(T,!0),z)return y()}).then(()=>{I?.(T,void 0),T=i(),h=!0,g.forEach(O=>O(T))}).catch(O=>{I?.(void 0,O)})};return a.persist={setOptions:E=>{u={...u,...E},E.storage&&(v=E.storage)},clearStorage:()=>{v?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>L(),hasHydrated:()=>h,onHydrate:E=>(p.add(E),()=>{p.delete(E)}),onFinishHydration:E=>(g.add(E),()=>{g.delete(E)})},u.skipHydration||L(),T||b},Hp=(l,n)=>"getStorage"in n||"serialize"in n||"deserialize"in n?((Wp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Vp(l,n)):qp(l,n),Kp=Hp,Gp="modulepreload",Qp=function(l){return"/hvt/"+l},Ed={},Us=function(n,s,i){let a=Promise.resolve();if(s&&s.length>0){let v=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var h=v;document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");a=v(s.map(y=>{if(y=Qp(y),y in Ed)return;Ed[y]=!0;const w=y.endsWith(".css"),b=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${b}`))return;const T=document.createElement("link");if(T.rel=w?"stylesheet":Gp,w||(T.as="script"),T.crossOrigin="",T.href=y,g&&T.setAttribute("nonce",g),document.head.appendChild(T),w)return new Promise((L,E)=>{T.addEventListener("load",L),T.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return a.then(p=>{for(const g of p||[])g.status==="rejected"&&u(g.reason);return n().catch(u)})},Jp=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Us(async()=>{const{default:i}=await Promise.resolve().then(()=>Un);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)};class _l extends Error{constructor(n,s="FunctionsError",i){super(n),this.name=s,this.context=i}}class Cd extends _l{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Nd extends _l{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Td extends _l{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var cl;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(cl||(cl={}));var Yp=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};class Xp{constructor(n,{headers:s={},customFetch:i,region:a=cl.Any}={}){this.url=n,this.headers=s,this.region=a,this.fetch=Jp(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var i;return Yp(this,void 0,void 0,function*(){try{const{headers:a,method:u,body:h,signal:p}=s;let g={},{region:v}=s;v||(v=this.region);const y=new URL(`${this.url}/${n}`);v&&v!=="any"&&(g["x-region"]=v,y.searchParams.set("forceFunctionRegion",v));let w;h&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",w=h):typeof h=="string"?(g["Content-Type"]="text/plain",w=h):typeof FormData<"u"&&h instanceof FormData?w=h:(g["Content-Type"]="application/json",w=JSON.stringify(h)));const b=yield this.fetch(y.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),a),body:w,signal:p}).catch(x=>{throw x.name==="AbortError"?x:new Cd(x)}),T=b.headers.get("x-relay-error");if(T&&T==="true")throw new Nd(b);if(!b.ok)throw new Td(b);let L=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return L==="application/json"?E=yield b.json():L==="application/octet-stream"?E=yield b.blob():L==="text/event-stream"?E=b:L==="multipart/form-data"?E=yield b.formData():E=yield b.text(),{data:E,error:null,response:b}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Cd(a)}:{data:null,error:a,response:a instanceof Td||a instanceof Nd?a.context:void 0}}})}}var Ge={},jn={},En={},Cn={},Nn={},Tn={},Zp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dn=Zp();const em=Dn.fetch,nh=Dn.fetch.bind(Dn),sh=Dn.Headers,tm=Dn.Request,rm=Dn.Response,Un=Object.freeze(Object.defineProperty({__proto__:null,Headers:sh,Request:tm,Response:rm,default:nh,fetch:em},Symbol.toStringTag,{value:"Module"})),nm=yp(Un);var Gi={},Pd;function ih(){if(Pd)return Gi;Pd=1,Object.defineProperty(Gi,"__esModule",{value:!0});class l extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Gi.default=l,Gi}var Ld;function oh(){if(Ld)return Tn;Ld=1;var l=Tn&&Tn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Tn,"__esModule",{value:!0});const n=l(nm),s=l(ih());class i{constructor(u){var h,p;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(h=u.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=u.signal,this.isMaybeSingle=(p=u.isMaybeSingle)!==null&&p!==void 0?p:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,h){return this.headers=new Headers(this.headers),this.headers.set(u,h),this}then(u,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async v=>{var y,w,b,T;let L=null,E=null,x=null,I=v.status,O=v.statusText;if(v.ok){if(this.method!=="HEAD"){const q=await v.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?E=q:E=JSON.parse(q))}const z=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),re=(b=v.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");z&&re&&re.length>1&&(x=parseInt(re[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(L={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,x=null,I=406,O="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const z=await v.text();try{L=JSON.parse(z),Array.isArray(L)&&v.status===404&&(E=[],L=null,I=200,O="OK")}catch{v.status===404&&z===""?(I=204,O="No Content"):L={message:z}}if(L&&this.isMaybeSingle&&(!((T=L?.details)===null||T===void 0)&&T.includes("0 rows"))&&(L=null,I=200,O="OK"),L&&this.shouldThrowOnError)throw new s.default(L)}return{error:L,data:E,count:x,status:I,statusText:O}});return this.shouldThrowOnError||(g=g.catch(v=>{var y,w,b;return{error:{message:`${(y=v?.name)!==null&&y!==void 0?y:"FetchError"}: ${v?.message}`,details:`${(w=v?.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(b=v?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),g.then(u,h)}returns(){return this}overrideTypes(){return this}}return Tn.default=i,Tn}var Od;function ah(){if(Od)return Nn;Od=1;var l=Nn&&Nn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Nn,"__esModule",{value:!0});const n=l(oh());class s extends n.default{select(a){let u=!1;const h=(a??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:u=!0,nullsFirst:h,foreignTable:p,referencedTable:g=p}={}){const v=g?`${g}.order`:"order",y=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${y?`${y},`:""}${a}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:u,referencedTable:h=u}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${a}`),this}range(a,u,{foreignTable:h,referencedTable:p=h}={}){const g=typeof p>"u"?"offset":`${p}.offset`,v=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(v,`${u-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:u=!1,settings:h=!1,buffers:p=!1,wal:g=!1,format:v="text"}={}){var y;const w=[a?"analyze":null,u?"verbose":null,h?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),b=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${b}"; options=${w};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Nn.default=s,Nn}var Ad;function kl(){if(Ad)return Cn;Ad=1;var l=Cn&&Cn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Cn,"__esModule",{value:!0});const n=l(ah());class s extends n.default{eq(a,u){return this.url.searchParams.append(a,`eq.${u}`),this}neq(a,u){return this.url.searchParams.append(a,`neq.${u}`),this}gt(a,u){return this.url.searchParams.append(a,`gt.${u}`),this}gte(a,u){return this.url.searchParams.append(a,`gte.${u}`),this}lt(a,u){return this.url.searchParams.append(a,`lt.${u}`),this}lte(a,u){return this.url.searchParams.append(a,`lte.${u}`),this}like(a,u){return this.url.searchParams.append(a,`like.${u}`),this}likeAllOf(a,u){return this.url.searchParams.append(a,`like(all).{${u.join(",")}}`),this}likeAnyOf(a,u){return this.url.searchParams.append(a,`like(any).{${u.join(",")}}`),this}ilike(a,u){return this.url.searchParams.append(a,`ilike.${u}`),this}ilikeAllOf(a,u){return this.url.searchParams.append(a,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(a,u){return this.url.searchParams.append(a,`ilike(any).{${u.join(",")}}`),this}is(a,u){return this.url.searchParams.append(a,`is.${u}`),this}in(a,u){const h=Array.from(new Set(u)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(a,`in.(${h})`),this}contains(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cs.{${u.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(u)}`),this}containedBy(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cd.{${u.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(u)}`),this}rangeGt(a,u){return this.url.searchParams.append(a,`sr.${u}`),this}rangeGte(a,u){return this.url.searchParams.append(a,`nxl.${u}`),this}rangeLt(a,u){return this.url.searchParams.append(a,`sl.${u}`),this}rangeLte(a,u){return this.url.searchParams.append(a,`nxr.${u}`),this}rangeAdjacent(a,u){return this.url.searchParams.append(a,`adj.${u}`),this}overlaps(a,u){return typeof u=="string"?this.url.searchParams.append(a,`ov.${u}`):this.url.searchParams.append(a,`ov.{${u.join(",")}}`),this}textSearch(a,u,{config:h,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const v=h===void 0?"":`(${h})`;return this.url.searchParams.append(a,`${g}fts${v}.${u}`),this}match(a){return Object.entries(a).forEach(([u,h])=>{this.url.searchParams.append(u,`eq.${h}`)}),this}not(a,u,h){return this.url.searchParams.append(a,`not.${u}.${h}`),this}or(a,{foreignTable:u,referencedTable:h=u}={}){const p=h?`${h}.or`:"or";return this.url.searchParams.append(p,`(${a})`),this}filter(a,u,h){return this.url.searchParams.append(a,`${u}.${h}`),this}}return Cn.default=s,Cn}var Rd;function lh(){if(Rd)return En;Rd=1;var l=En&&En.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(En,"__esModule",{value:!0});const n=l(kl());class s{constructor(a,{headers:u={},schema:h,fetch:p}){this.url=a,this.headers=new Headers(u),this.schema=h,this.fetch=p}select(a,{head:u=!1,count:h}={}){const p=u?"HEAD":"GET";let g=!1;const v=(a??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",v),h&&this.headers.append("Prefer",`count=${h}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:u,defaultToNull:h=!0}={}){var p;const g="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const v=a.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(v.length>0){const y=[...new Set(v)].map(w=>`"${w}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(a,{onConflict:u,ignoreDuplicates:h=!1,count:p,defaultToNull:g=!0}={}){var v;const y="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const w=a.reduce((b,T)=>b.concat(Object.keys(T)),[]);if(w.length>0){const b=[...new Set(w)].map(T=>`"${T}"`);this.url.searchParams.set("columns",b.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(a,{count:u}={}){var h;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:a}={}){var u;const h="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return En.default=s,En}var Id;function sm(){if(Id)return jn;Id=1;var l=jn&&jn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(jn,"__esModule",{value:!0});const n=l(lh()),s=l(kl());class i{constructor(u,{headers:h={},schema:p,fetch:g}={}){this.url=u,this.headers=new Headers(h),this.schemaName=p,this.fetch=g}from(u){const h=new URL(`${this.url}/${u}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new i(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:p=!1,get:g=!1,count:v}={}){var y;let w;const b=new URL(`${this.url}/rpc/${u}`);let T;p||g?(w=p?"HEAD":"GET",Object.entries(h).filter(([E,x])=>x!==void 0).map(([E,x])=>[E,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([E,x])=>{b.searchParams.append(E,x)})):(w="POST",T=h);const L=new Headers(this.headers);return v&&L.set("Prefer",`count=${v}`),new s.default({method:w,url:b,headers:L,schema:this.schemaName,body:T,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return jn.default=i,jn}var $d;function im(){if($d)return Ge;$d=1;var l=Ge&&Ge.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.PostgrestError=Ge.PostgrestBuilder=Ge.PostgrestTransformBuilder=Ge.PostgrestFilterBuilder=Ge.PostgrestQueryBuilder=Ge.PostgrestClient=void 0;const n=l(sm());Ge.PostgrestClient=n.default;const s=l(lh());Ge.PostgrestQueryBuilder=s.default;const i=l(kl());Ge.PostgrestFilterBuilder=i.default;const a=l(ah());Ge.PostgrestTransformBuilder=a.default;const u=l(oh());Ge.PostgrestBuilder=u.default;const h=l(ih());return Ge.PostgrestError=h.default,Ge.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:u.default,PostgrestError:h.default},Ge}var om=im();const am=no(om),{PostgrestClient:lm,PostgrestQueryBuilder:C0,PostgrestFilterBuilder:N0,PostgrestTransformBuilder:T0,PostgrestBuilder:P0,PostgrestError:L0}=am;class um{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const i=s.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const i=this.getWebSocketConstructor();return new i(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const cm="2.15.5",dm=`realtime-js/${cm}`,hm="1.0.0",dl=1e4,fm=1e3,pm=100;var Ls;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Ls||(Ls={}));var Ve;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(Ve||(Ve={}));var At;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(At||(At={}));var hl;(function(l){l.websocket="websocket"})(hl||(hl={}));var Gr;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Gr||(Gr={}));class mm{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),i=new TextDecoder;return this._decodeBroadcast(n,s,i)}_decodeBroadcast(n,s,i){const a=s.getUint8(1),u=s.getUint8(2);let h=this.HEADER_LENGTH+2;const p=i.decode(n.slice(h,h+a));h=h+a;const g=i.decode(n.slice(h,h+u));h=h+u;const v=JSON.parse(i.decode(n.slice(h,n.byteLength)));return{ref:null,topic:p,event:g,payload:v}}}class uh{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ee;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Ee||(Ee={}));const Dd=(l,n,s={})=>{var i;const a=(i=s.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(n).reduce((u,h)=>(u[h]=gm(h,l,n,a),u),{})},gm=(l,n,s,i)=>{const a=n.find(p=>p.name===l),u=a?.type,h=s[l];return u&&!i.includes(u)?ch(u,h):fl(h)},ch=(l,n)=>{if(l.charAt(0)==="_"){const s=l.slice(1,l.length);return xm(n,s)}switch(l){case Ee.bool:return vm(n);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return ym(n);case Ee.json:case Ee.jsonb:return wm(n);case Ee.timestamp:return _m(n);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return fl(n);default:return fl(n)}},fl=l=>l,vm=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},ym=l=>{if(typeof l=="string"){const n=parseFloat(l);if(!Number.isNaN(n))return n}return l},wm=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(n){return console.log(`JSON parse error: ${n}`),l}return l},xm=(l,n)=>{if(typeof l!="string")return l;const s=l.length-1,i=l[s];if(l[0]==="{"&&i==="}"){let u;const h=l.slice(1,s);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(p=>ch(n,p))}return l},_m=l=>typeof l=="string"?l.replace(" ","T"):l,dh=l=>{let n=l;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class rl{constructor(n,s,i={},a=dl){this.channel=n,this.event=s,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var i;return this._hasReceived(n)&&s((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Ud;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(Ud||(Ud={}));class Os{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Os.syncState(this.state,a,u,h),this.pendingDiffs.forEach(g=>{this.state=Os.syncDiff(this.state,g,u,h)}),this.pendingDiffs=[],p()}),this.channel._on(i.diff,{},a=>{const{onJoin:u,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Os.syncDiff(this.state,a,u,h),p())}),this.onJoin((a,u,h)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:u,newPresences:h})}),this.onLeave((a,u,h)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,i,a){const u=this.cloneDeep(n),h=this.transformState(s),p={},g={};return this.map(u,(v,y)=>{h[v]||(g[v]=y)}),this.map(h,(v,y)=>{const w=u[v];if(w){const b=y.map(x=>x.presence_ref),T=w.map(x=>x.presence_ref),L=y.filter(x=>T.indexOf(x.presence_ref)<0),E=w.filter(x=>b.indexOf(x.presence_ref)<0);L.length>0&&(p[v]=L),E.length>0&&(g[v]=E)}else p[v]=y}),this.syncDiff(u,{joins:p,leaves:g},i,a)}static syncDiff(n,s,i,a){const{joins:u,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(u,(p,g)=>{var v;const y=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),y.length>0){const w=n[p].map(T=>T.presence_ref),b=y.filter(T=>w.indexOf(T.presence_ref)<0);n[p].unshift(...b)}i(p,y,g)}),this.map(h,(p,g)=>{let v=n[p];if(!v)return;const y=g.map(w=>w.presence_ref);v=v.filter(w=>y.indexOf(w.presence_ref)<0),n[p]=v,a(p,v,g),v.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(i=>s(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,i)=>{const a=n[i];return"metas"in a?s[i]=a.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[i]=a,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Md;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(Md||(Md={}));var As;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(As||(As={}));var Zt;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Zt||(Zt={}));class bl{constructor(n,s={config:{}},i){this.topic=n,this.params=s,this.socket=i,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new rl(this,At.join,this.params,this.timeout),this.rejoinTimer=new uh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(At.reply,{},(a,u)=>{this._trigger(this._replyEventName(u),a)}),this.presence=new Os(this),this.broadcastEndpointURL=dh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var i,a,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:h,presence:p,private:g}}=this.params,v=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(T=>T.filter))!==null&&a!==void 0?a:[],y=!!this.bindings[As.PRESENCE]&&this.bindings[As.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},b={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:y}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(T=>n?.(Zt.CHANNEL_ERROR,T)),this._onClose(()=>n?.(Zt.CLOSED)),this.updateJoinPayload(Object.assign({config:b},w)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:T})=>{var L;if(this.socket.setAuth(),T===void 0){n?.(Zt.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,x=(L=E?.length)!==null&&L!==void 0?L:0,I=[];for(let O=0;O<x;O++){const R=E[O],{filter:{event:z,schema:re,table:q,filter:te}}=R,se=T&&T[O];if(se&&se.event===z&&se.schema===re&&se.table===q&&se.filter===te)I.push(Object.assign(Object.assign({},R),{id:se.id}));else{this.unsubscribe(),this.state=Ve.errored,n?.(Zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,n&&n(Zt.SUBSCRIBED);return}}).receive("error",T=>{this.state=Ve.errored,n?.(Zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{n?.(Zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,i){return this.state===Ve.joined&&n===As.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,i)}async send(n,s={}){var i,a;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:h}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=s.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=v.body)===null||a===void 0?void 0:a.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,p,g;const v=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&u("ok"),v.receive("ok",()=>u("ok")),v.receive("error",()=>u("error")),v.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ve.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(At.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new rl(this,At.leave,{},n),i.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ve.closed,this.bindings={}}async _fetchWithTimeout(n,s,i){const a=new AbortController,u=setTimeout(()=>a.abort(),i),h=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(u),h}_push(n,s,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new rl(this,n,s,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>pm){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,i){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,i){var a,u;const h=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:y}=At;if(i&&[p,g,v,y].indexOf(h)>=0&&i!==this._joinRef())return;let b=this._onMessage(h,s,i);if(s&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var L,E,x;return((L=T.filter)===null||L===void 0?void 0:L.event)==="*"||((x=(E=T.filter)===null||E===void 0?void 0:E.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===h}).map(T=>T.callback(b,i)):(u=this.bindings[h])===null||u===void 0||u.filter(T=>{var L,E,x,I,O,R;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in T){const z=T.id,re=(L=T.filter)===null||L===void 0?void 0:L.event;return z&&((E=s.ids)===null||E===void 0?void 0:E.includes(z))&&(re==="*"||re?.toLocaleLowerCase()===((x=s.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const z=(O=(I=T?.filter)===null||I===void 0?void 0:I.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return z==="*"||z===((R=s?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===h}).map(T=>{if(typeof b=="object"&&"ids"in b){const L=b.data,{schema:E,table:x,commit_timestamp:I,type:O,errors:R}=L;b=Object.assign(Object.assign({},{schema:E,table:x,commit_timestamp:I,eventType:O,new:{},old:{},errors:R}),this._getPayloadRecords(L))}T.callback(b,i)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,i){const a=n.toLocaleLowerCase(),u={type:a,filter:s,callback:i};return this.bindings[a]?this.bindings[a].push(u):this.bindings[a]=[u],this}_off(n,s){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var u;return!(((u=a.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&bl.isEqual(a.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const i in n)if(n[i]!==s[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(At.close,{},n)}_onError(n){this._on(At.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=Dd(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=Dd(n.columns,n.old_record)),s}}const nl=()=>{},Qi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},km=[1e3,2e3,5e3,1e4],bm=1e4,Sm=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jm{constructor(n,s){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dl,this.transport=null,this.heartbeatIntervalMs=Qi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nl,this.ref=0,this.reconnectTimer=null,this.logger=nl,this.conn=null,this.sendBuffer=[],this.serializer=new mm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let u;return a?u=a:typeof fetch>"u"?u=(...h)=>Us(async()=>{const{default:p}=await Promise.resolve().then(()=>Un);return{default:p}},void 0).then(({default:p})=>p(...h)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...h)=>u(...h)},!(!((i=s?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${hl.websocket}`,this.httpEndpoint=dh(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=um.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hm}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,i){this.logger(n,s,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ls.connecting:return Gr.Connecting;case Ls.open:return Gr.Open;case Ls.closing:return Gr.Closing;default:return Gr.Closed}}isConnected(){return this.connectionState()===Gr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const i=`realtime:${n}`,a=this.getChannels().find(u=>u.topic===i);if(a)return a;{const u=new bl(`realtime:${n}`,s,this);return this.channels.push(u),u}}push(n){const{topic:s,event:i,payload:a,ref:u}=n,h=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${s} ${i} (${u})`,a),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(fm,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Qi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:u,ref:h}=s,p=h?`(${h})`:"",g=u.status||"";this.log("receive",`${g} ${i} ${a} ${p}`.trim(),u),this.channels.filter(v=>v._isMember(i)).forEach(v=>v._trigger(a,u,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(At.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const i=n.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${n}${i}${a}`}_workerObjectUrl(n){let s;if(n)s=n;else{const i=new Blob([Sm],{type:"application/javascript"});s=URL.createObjectURL(i)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(i=>{const a={access_token:s,version:dm};s&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(At.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(s)}catch(a){this.log("error",`error in ${n} callback`,a)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new uh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,i,a,u,h,p,g,v,y;if(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:dl,this.heartbeatIntervalMs=(a=n?.heartbeatIntervalMs)!==null&&a!==void 0?a:Qi.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:nl,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(w=>km[w-1]||bm),this.encode=(v=n?.encode)!==null&&v!==void 0?v:((w,b)=>b(JSON.stringify(w))),this.decode=(y=n?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class Sl extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Me(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class Em extends Sl{constructor(n,s,i){super(n),this.name="StorageApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class pl extends Sl{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var Cm=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};const hh=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Us(async()=>{const{default:i}=await Promise.resolve().then(()=>Un);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},Nm=()=>Cm(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Us(()=>Promise.resolve().then(()=>Un),void 0)).Response:Response}),ml=l=>{if(Array.isArray(l))return l.map(s=>ml(s));if(typeof l=="function"||l!==Object(l))return l;const n={};return Object.entries(l).forEach(([s,i])=>{const a=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[a]=ml(i)}),n},Tm=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)};var Jr=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};const sl=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Pm=(l,n,s)=>Jr(void 0,void 0,void 0,function*(){const i=yield Nm();l instanceof i&&!s?.noResolveJson?l.json().then(a=>{const u=l.status||500,h=a?.statusCode||u+"";n(new Em(sl(a),u,h))}).catch(a=>{n(new pl(sl(a),a))}):n(new pl(sl(l),l))}),Lm=(l,n,s,i)=>{const a={method:l,headers:n?.headers||{}};return l==="GET"||!i?a:(Tm(i)?(a.headers=Object.assign({"Content-Type":"application/json"},n?.headers),a.body=JSON.stringify(i)):a.body=i,n?.duplex&&(a.duplex=n.duplex),Object.assign(Object.assign({},a),s))};function Ms(l,n,s,i,a,u){return Jr(this,void 0,void 0,function*(){return new Promise((h,p)=>{l(s,Lm(n,i,a,u)).then(g=>{if(!g.ok)throw g;return i?.noResolveJson?g:g.json()}).then(g=>h(g)).catch(g=>Pm(g,p,i))})})}function Xi(l,n,s,i){return Jr(this,void 0,void 0,function*(){return Ms(l,"GET",n,s,i)})}function Bt(l,n,s,i,a){return Jr(this,void 0,void 0,function*(){return Ms(l,"POST",n,i,a,s)})}function gl(l,n,s,i,a){return Jr(this,void 0,void 0,function*(){return Ms(l,"PUT",n,i,a,s)})}function Om(l,n,s,i){return Jr(this,void 0,void 0,function*(){return Ms(l,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),i)})}function fh(l,n,s,i,a){return Jr(this,void 0,void 0,function*(){return Ms(l,"DELETE",n,i,a,s)})}var Am=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};class Rm{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}then(n,s){return this.execute().then(n,s)}execute(){return Am(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}}var Im=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};class $m{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}asStream(){return new Rm(this.downloadFn,this.shouldThrowOnError)}then(n,s){return this.execute().then(n,s)}execute(){return Im(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}}var ht=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};const Dm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Um{constructor(n,s={},i,a){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=i,this.fetch=hh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,i,a){return ht(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},Fd),a);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const g=h.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),g&&u.append("metadata",this.encodeMetadata(g)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.append("cacheControl",h.cacheControl),g&&u.append("metadata",this.encodeMetadata(g))):(u=i,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),a?.headers&&(p=Object.assign(Object.assign({},p),a.headers));const v=this._removeEmptyFolders(s),y=this._getFinalPath(v),w=yield(n=="PUT"?gl:Bt)(this.fetch,`${this.url}/object/${y}`,u,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:v,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Me(u))return{data:null,error:u};throw u}})}upload(n,s,i){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,i)})}uploadToSignedUrl(n,s,i,a){return ht(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",s);try{let g;const v=Object.assign({upsert:Fd.upsert},a),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",v.cacheControl)):(g=i,y["cache-control"]=`max-age=${v.cacheControl}`,y["content-type"]=v.contentType);const w=yield gl(this.fetch,p.toString(),g,{headers:y});return{data:{path:u,fullPath:w.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Me(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,s){return ht(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const a=Object.assign({},this.headers);s?.upsert&&(a["x-upsert"]="true");const u=yield Bt(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),h=new URL(this.url+u.url),p=h.searchParams.get("token");if(!p)throw new Sl("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:p},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}update(n,s,i){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,i)})}move(n,s,i){return ht(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}})}copy(n,s,i){return ht(this,void 0,void 0,function*(){try{return{data:{path:(yield Bt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}})}createSignedUrl(n,s,i){return ht(this,void 0,void 0,function*(){try{let a=this._getFinalPath(n),u=yield Bt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}})}createSignedUrls(n,s,i){return ht(this,void 0,void 0,function*(){try{const a=yield Bt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}})}download(n,s){const a=typeof s?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(s?.transform||{}),h=u?`?${u}`:"",p=this._getFinalPath(n),g=()=>Xi(this.fetch,`${this.url}/${a}/${p}${h}`,{headers:this.headers,noResolveJson:!0});return new $m(g,this.shouldThrowOnError)}info(n){return ht(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const i=yield Xi(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ml(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}exists(n){return ht(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Om(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i)&&i instanceof pl){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,s){const i=this._getFinalPath(n),a=[],u=s?.download?`download=${s.download===!0?"":s.download}`:"";u!==""&&a.push(u);const p=typeof s?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(s?.transform||{});g!==""&&a.push(g);let v=a.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${i}${v}`)}}}remove(n){return ht(this,void 0,void 0,function*(){try{return{data:yield fh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}})}list(n,s,i){return ht(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Dm),s),{prefix:n||""});return{data:yield Bt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}})}listV2(n,s){return ht(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield Bt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const Mm="2.12.2",Fm={"X-Client-Info":`storage-js/${Mm}`};var Pn=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};class zm{constructor(n,s={},i,a){this.shouldThrowOnError=!1;const u=new URL(n);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},Fm),s),this.fetch=hh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Pn(this,void 0,void 0,function*(){try{return{data:yield Xi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}getBucket(n){return Pn(this,void 0,void 0,function*(){try{return{data:yield Xi(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return Pn(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}updateBucket(n,s){return Pn(this,void 0,void 0,function*(){try{return{data:yield gl(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}emptyBucket(n){return Pn(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}})}deleteBucket(n){return Pn(this,void 0,void 0,function*(){try{return{data:yield fh(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}})}}class Bm extends zm{constructor(n,s={},i,a){super(n,s,i,a)}from(n){return new Um(this.url,this.headers,n,this.fetch)}}const Wm="2.58.0";let Ps="";typeof Deno<"u"?Ps="deno":typeof document<"u"?Ps="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ps="react-native":Ps="node";const Vm={"X-Client-Info":`supabase-js-${Ps}/${Wm}`},qm={headers:Vm},Hm={schema:"public"},Km={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Gm={};var Qm=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};const Jm=l=>{let n;return l?n=l:typeof fetch>"u"?n=nh:n=fetch,(...s)=>n(...s)},Ym=()=>typeof Headers>"u"?sh:Headers,Xm=(l,n,s)=>{const i=Jm(s),a=Ym();return(u,h)=>Qm(void 0,void 0,void 0,function*(){var p;const g=(p=yield n())!==null&&p!==void 0?p:l;let v=new a(h?.headers);return v.has("apikey")||v.set("apikey",l),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),i(u,Object.assign(Object.assign({},h),{headers:v}))})};var Zm=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};function eg(l){return l.endsWith("/")?l:l+"/"}function tg(l,n){var s,i;const{db:a,auth:u,realtime:h,global:p}=l,{db:g,auth:v,realtime:y,global:w}=n,b={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},v),u),realtime:Object.assign(Object.assign({},y),h),storage:{},global:Object.assign(Object.assign(Object.assign({},w),p),{headers:Object.assign(Object.assign({},(s=w?.headers)!==null&&s!==void 0?s:{}),(i=p?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Zm(this,void 0,void 0,function*(){return""})};return l.accessToken?b.accessToken=l.accessToken:delete b.accessToken,b}function rg(l){const n=l?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(eg(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ph="2.72.0",In=30*1e3,vl=3,il=vl*In,ng="http://localhost:9999",sg="supabase.auth.token",ig={"X-Client-Info":`gotrue-js/${ph}`},yl="X-Supabase-Api-Version",mh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},og=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ag=600*1e3;class jl extends Error{constructor(n,s,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=i}}function ie(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class lg extends jl{constructor(n,s,i){super(n,s,i),this.name="AuthApiError",this.status=s,this.code=i}}function ug(l){return ie(l)&&l.name==="AuthApiError"}class gh extends jl{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class Cr extends jl{constructor(n,s,i,a){super(n,i,a),this.name=s,this.status=i}}class jr extends Cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cg(l){return ie(l)&&l.name==="AuthSessionMissingError"}class Ts extends Cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ji extends Cr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Yi extends Cr{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dg(l){return ie(l)&&l.name==="AuthImplicitGrantRedirectError"}class zd extends Cr{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wl extends Cr{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function ol(l){return ie(l)&&l.name==="AuthRetryableFetchError"}class Bd extends Cr{constructor(n,s,i){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=i}}class xl extends Cr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wd=` 	
\r=`.split(""),hg=(()=>{const l=new Array(128);for(let n=0;n<l.length;n+=1)l[n]=-1;for(let n=0;n<Wd.length;n+=1)l[Wd[n].charCodeAt(0)]=-2;for(let n=0;n<Zi.length;n+=1)l[Zi[n].charCodeAt(0)]=n;return l})();function Vd(l,n,s){if(l!==null)for(n.queue=n.queue<<8|l,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;s(Zi[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;s(Zi[i]),n.queuedBits-=6}}function vh(l,n,s){const i=hg[l];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function qd(l){const n=[],s=h=>{n.push(String.fromCodePoint(h))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},u=h=>{mg(h,i,s)};for(let h=0;h<l.length;h+=1)vh(l.charCodeAt(h),a,u);return n.join("")}function fg(l,n){if(l<=127){n(l);return}else if(l<=2047){n(192|l>>6),n(128|l&63);return}else if(l<=65535){n(224|l>>12),n(128|l>>6&63),n(128|l&63);return}else if(l<=1114111){n(240|l>>18),n(128|l>>12&63),n(128|l>>6&63),n(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function pg(l,n){for(let s=0;s<l.length;s+=1){let i=l.charCodeAt(s);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(l.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}fg(i,n)}}function mg(l,n,s){if(n.utf8seq===0){if(l<=127){s(l);return}for(let i=1;i<6;i+=1)if((l>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=l&31;else if(n.utf8seq===3)n.codepoint=l&15;else if(n.utf8seq===4)n.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|l&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function gg(l){const n=[],s={queue:0,queuedBits:0},i=a=>{n.push(a)};for(let a=0;a<l.length;a+=1)vh(l.charCodeAt(a),s,i);return new Uint8Array(n)}function vg(l){const n=[];return pg(l,s=>n.push(s)),new Uint8Array(n)}function yg(l){const n=[],s={queue:0,queuedBits:0},i=a=>{n.push(a)};return l.forEach(a=>Vd(a,s,i)),Vd(null,s,i),n.join("")}function wg(l){return Math.round(Date.now()/1e3)+l}function xg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){const n=Math.random()*16|0;return(l=="x"?n:n&3|8).toString(16)})}const St=()=>typeof window<"u"&&typeof document<"u",qr={tested:!1,writable:!1},yh=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qr.tested)return qr.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),qr.tested=!0,qr.writable=!0}catch{qr.tested=!0,qr.writable=!1}return qr.writable};function _g(l){const n={},s=new URL(l);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,u)=>{n[u]=a})}catch{}return s.searchParams.forEach((i,a)=>{n[a]=i}),n}const wh=l=>{let n;return l?n=l:typeof fetch>"u"?n=(...s)=>Us(async()=>{const{default:i}=await Promise.resolve().then(()=>Un);return{default:i}},void 0).then(({default:i})=>i(...s)):n=fetch,(...s)=>n(...s)},kg=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",$n=async(l,n,s)=>{await l.setItem(n,JSON.stringify(s))},Hr=async(l,n)=>{const s=await l.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Sr=async(l,n)=>{await l.removeItem(n)};class io{constructor(){this.promise=new io.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}io.promiseConstructor=Promise;function al(l){const n=l.split(".");if(n.length!==3)throw new xl("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!og.test(n[i]))throw new xl("JWT not in base64url format");return{header:JSON.parse(qd(n[0])),payload:JSON.parse(qd(n[1])),signature:gg(n[2]),raw:{header:n[0],payload:n[1]}}}async function bg(l){return await new Promise(n=>{setTimeout(()=>n(null),l)})}function Sg(l,n){return new Promise((i,a)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await l(u);if(!n(u,null,h)){i(h);return}}catch(h){if(!n(u,h)){a(h);return}}})()})}function jg(l){return("0"+l.toString(16)).substr(-2)}function Eg(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=s.length;let a="";for(let u=0;u<56;u++)a+=s.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(n),Array.from(n,jg).join("")}async function Cg(l){const s=new TextEncoder().encode(l),i=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(i);return Array.from(a).map(u=>String.fromCharCode(u)).join("")}async function Ng(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const s=await Cg(l);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ln(l,n,s=!1){const i=Eg();let a=i;s&&(a+="/PASSWORD_RECOVERY"),await $n(l,`${n}-code-verifier`,a);const u=await Ng(i);return[u,i===u?"plain":"s256"]}const Tg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Pg(l){const n=l.headers.get(yl);if(!n||!n.match(Tg))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Lg(l){if(!l)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(l<=n)throw new Error("JWT has expired")}function Og(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ag=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function On(l){if(!Ag.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ll(){const l={};return new Proxy(l,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hd(l){return JSON.parse(JSON.stringify(l))}var Rg=function(l,n){var s={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&n.indexOf(i)<0&&(s[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(l);a<i.length;a++)n.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(l,i[a])&&(s[i[a]]=l[i[a]]);return s};const Kr=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Ig=[502,503,504];async function Kd(l){var n;if(!kg(l))throw new wl(Kr(l),0);if(Ig.includes(l.status))throw new wl(Kr(l),l.status);let s;try{s=await l.json()}catch(u){throw new gh(Kr(u),u)}let i;const a=Pg(l);if(a&&a.getTime()>=mh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?i=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(i=s.error_code),i){if(i==="weak_password")throw new Bd(Kr(s),l.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new jr}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Bd(Kr(s),l.status,s.weak_password.reasons);throw new lg(Kr(s),l.status||500,i)}const $g=(l,n,s,i)=>{const a={method:l,headers:n?.headers||{}};return l==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),s))};async function ue(l,n,s,i){var a;const u=Object.assign({},i?.headers);u[yl]||(u[yl]=mh["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const h=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(h.redirect_to=i.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await Dg(l,n,s+p,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(g):{data:Object.assign({},g),error:null}}async function Dg(l,n,s,i,a,u){const h=$g(n,i,a,u);let p;try{p=await l(s,Object.assign({},h))}catch(g){throw console.error(g),new wl(Kr(g),0)}if(p.ok||await Kd(p),i?.noResolveJson)return p;try{return await p.json()}catch(g){await Kd(g)}}function zt(l){var n;let s=null;zg(l)&&(s=Object.assign({},l),l.expires_at||(s.expires_at=wg(l.expires_in)));const i=(n=l.user)!==null&&n!==void 0?n:l;return{data:{session:s,user:i},error:null}}function Gd(l){const n=zt(l);return!n.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((s,i)=>s&&typeof i=="string",!0)&&(n.data.weak_password=l.weak_password),n}function Er(l){var n;return{data:{user:(n=l.user)!==null&&n!==void 0?n:l},error:null}}function Ug(l){return{data:l,error:null}}function Mg(l){const{action_link:n,email_otp:s,hashed_token:i,redirect_to:a,verification_type:u}=l,h=Rg(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:i,redirect_to:a,verification_type:u},g=Object.assign({},h);return{data:{properties:p,user:g},error:null}}function Fg(l){return l}function zg(l){return l.access_token&&l.refresh_token&&l.expires_in}const ul=["global","local","others"];var Bg=function(l,n){var s={};for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&n.indexOf(i)<0&&(s[i]=l[i]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(l);a<i.length;a++)n.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(l,i[a])&&(s[i[a]]=l[i[a]]);return s};class Wg{constructor({url:n="",headers:s={},fetch:i}){this.url=n,this.headers=s,this.fetch=wh(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s=ul[0]){if(ul.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ul.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,s={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Er})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:s}=n,i=Bg(n,["options"]),a=Object.assign(Object.assign({},i),s);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Mg,redirectTo:s?.redirectTo})}catch(s){if(ie(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Er})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,i,a,u,h,p,g;try{const v={nextPage:null,lastPage:0,total:0},y=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:"",per_page:(u=(a=n?.perPage)===null||a===void 0?void 0:a.toString())!==null&&u!==void 0?u:""},xform:Fg});if(y.error)throw y.error;const w=await y.json(),b=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,T=(g=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(L=>{const E=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(L.split(";")[1].split("=")[1]);v[`${x}Page`]=E}),v.total=parseInt(b)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(ie(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){On(n);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Er})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){On(n);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:Er})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,s=!1){On(n);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:Er})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){On(n.userId);try{const{data:s,error:i}=await ue(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:i}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _deleteFactor(n){On(n.userId),On(n.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}}function Qd(l={}){return{getItem:n=>l[n]||null,setItem:(n,s)=>{l[n]=s},removeItem:n=>{delete l[n]}}}function Vg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const An={debug:!!(globalThis&&yh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xh extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class qg extends xh{}async function Hg(l,n,s){An.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),An.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){An.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,a.name);try{return await s()}finally{An.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,a.name)}}else{if(n===0)throw An.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new qg(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(An.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function _h(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function Kg(l){return parseInt(l,16)}function Gg(l){const n=new TextEncoder().encode(l);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function Qg(l){var n;const{chainId:s,domain:i,expirationTime:a,issuedAt:u=new Date,nonce:h,notBefore:p,requestId:g,resources:v,scheme:y,uri:w,version:b}=l;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((n=l.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const T=_h(l.address),L=y?`${y}://${i}`:i,E=l.statement?`${l.statement}
`:"",x=`${L} wants you to sign in with your Ethereum account:
${T}

${E}`;let I=`URI: ${w}
Version: ${b}
Chain ID: ${s}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(a&&(I+=`
Expiration Time: ${a.toISOString()}`),p&&(I+=`
Not Before: ${p.toISOString()}`),g&&(I+=`
Request ID: ${g}`),v){let O=`
Resources:`;for(const R of v){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);O+=`
- ${R}`}I+=O}return`${x}
${I}`}Vg();const Jg={url:ng,storageKey:sg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ig,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jd(l,n,s){return await s()}const Rn={};class Is{constructor(n){var s,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&St()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Jg),n);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Wg({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=wh(a.fetch),this.lock=a.lock||Jd,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:St()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=Hg:this.lock=Jd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:yh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Qd(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var n,s;return(s=(n=Rn[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Rn[this.storageKey]=Object.assign(Object.assign({},Rn[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Rn[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Rn[this.storageKey]=Object.assign(Object.assign({},Rn[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ph}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=_g(window.location.href);let i="none";if(this._isImplicitGrantCallback(s)?i="implicit":await this._isPKCECallback(s)&&(i="pkce"),St()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:u}=await this._getSessionFromURL(s,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),dg(u)){const g=(n=u.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:p}=a;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ie(s)?{error:s}:{error:new gh("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,i,a;try{const u=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=n?.options)===null||a===void 0?void 0:a.captchaToken}},xform:zt}),{data:h,error:p}=u;if(p||!h)return{data:{user:null,session:null},error:p};const g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(u){if(ie(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var s,i,a;try{let u;if("email"in n){const{email:y,password:w,options:b}=n;let T=null,L=null;this.flowType==="pkce"&&([T,L]=await Ln(this.storage,this.storageKey)),u=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:y,password:w,data:(s=b?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:T,code_challenge_method:L},xform:zt})}else if("phone"in n){const{phone:y,password:w,options:b}=n;u=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:w,data:(i=b?.data)!==null&&i!==void 0?i:{},channel:(a=b?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:zt})}else throw new Ji("You must provide either an email or phone number and a password");const{data:h,error:p}=u;if(p||!h)return{data:{user:null,session:null},error:p};const g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(u){if(ie(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let s;if("email"in n){const{email:u,password:h,options:p}=n;s=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Gd})}else if("phone"in n){const{phone:u,password:h,options:p}=n;s=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Gd})}else throw new Ji("You must provide either an email or phone number and a password");const{data:i,error:a}=s;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ts}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,i,a,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=n.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,i,a,u,h,p,g,v,y,w,b;let T,L;if("message"in n)T=n.message,L=n.signature;else{const{chain:E,wallet:x,statement:I,options:O}=n;let R;if(St())if(typeof x=="object")R=x;else{const Se=window;if("ethereum"in Se&&typeof Se.ethereum=="object"&&"request"in Se.ethereum&&typeof Se.ethereum.request=="function")R=Se.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=x}const z=new URL((s=O?.url)!==null&&s!==void 0?s:window.location.href),re=await R.request({method:"eth_requestAccounts"}).then(Se=>Se).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!re||re.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=_h(re[0]);let te=(i=O?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!te){const Se=await R.request({method:"eth_chainId"});te=Kg(Se)}const se={domain:z.host,address:q,statement:I,uri:z.href,version:"1",chainId:te,nonce:(a=O?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(h=(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=O?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=O?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(v=O?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(y=O?.signInWithEthereum)===null||y===void 0?void 0:y.resources};T=Qg(se),L=await R.request({method:"personal_sign",params:[Gg(T),q]})}try{const{data:E,error:x}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:L},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:zt});if(x)throw x;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Ts}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:x})}catch(E){if(ie(E))return{data:{user:null,session:null},error:E};throw E}}async signInWithSolana(n){var s,i,a,u,h,p,g,v,y,w,b,T;let L,E;if("message"in n)L=n.message,E=n.signature;else{const{chain:x,wallet:I,statement:O,options:R}=n;let z;if(St())if(typeof I=="object")z=I;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))z=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=I}const re=new URL((s=R?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in z&&z.signIn){const q=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:re.host,uri:re.href}),O?{statement:O}:null));let te;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")te=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)te=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in te&&"signature"in te&&(typeof te.signedMessage=="string"||te.signedMessage instanceof Uint8Array)&&te.signature instanceof Uint8Array)L=typeof te.signedMessage=="string"?te.signedMessage:new TextDecoder().decode(te.signedMessage),E=te.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");L=[`${re.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${re.href}`,`Issued At: ${(a=(i=R?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((u=R?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((h=R?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((g=R?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((v=R?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((w=(y=R?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||w===void 0)&&w.length?["Resources",...R.signInWithSolana.resources.map(te=>`- ${te}`)]:[]].join(`
`);const q=await z.signMessage(new TextEncoder().encode(L),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=q}}try{const{data:x,error:I}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:L,signature:yg(E)},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(T=n.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:zt});if(I)throw I;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Ts}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:I})}catch(x){if(ie(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(n){const s=await Hr(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(s??"").split("/");try{const{data:u,error:h}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:zt});if(await Sr(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Ts}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:a??null}),error:h})}catch(u){if(ie(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:s,provider:i,token:a,access_token:u,nonce:h}=n,p=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:zt}),{data:g,error:v}=p;return v?{data:{user:null,session:null},error:v}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Ts}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:v})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,i,a,u,h;try{if("email"in n){const{email:p,options:g}=n;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Ln(this.storage,this.storageKey));const{error:w}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=g?.data)!==null&&s!==void 0?s:{},create_user:(i=g?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:y},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in n){const{phone:p,options:g}=n,{data:v,error:y}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(a=g?.data)!==null&&a!==void 0?a:{},create_user:(u=g?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(h=g?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:v?.message_id},error:y}}throw new Ji("You must provide either an email or phone number.")}catch(p){if(ie(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var s,i;try{let a,u;"options"in n&&(a=(s=n.options)===null||s===void 0?void 0:s.redirectTo,u=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:h,error:p}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:a,xform:zt});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const g=h.session,v=h.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(n){var s,i,a;try{let u=null,h=null;return this.flowType==="pkce"&&([u,h]=await Ln(this.storage,this.storageKey)),await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=n?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:Ug})}catch(u){if(ie(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)throw i;if(!s)throw new jr;const{error:a}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:i,type:a,options:u}=n,{error:h}=await ue(this.fetch,"POST",s,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:i,type:a,options:u}=n,{data:h,error:p}=await ue(this.fetch,"POST",s,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new Ji("You must provide either an email or phone number and a type")}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=s();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await Hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<il:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const h=await Hr(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=ll()}if(this.storage.isServer&&n.user){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(g,v,y)=>(!h&&v==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,v,y))})}return{data:{session:n},error:null}}const{session:a,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Er}):await this._useSession(async s=>{var i,a,u;const{data:h,error:p}=s;if(p)throw p;return!(!((i=h.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jr}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0,xform:Er})})}catch(s){if(ie(s))return cg(s)&&(await this._removeSession(),await Sr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async i=>{const{data:a,error:u}=i;if(u)throw u;if(!a.session)throw new jr;const h=a.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await Ln(this.storage,this.storageKey));const{data:v,error:y}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:h.access_token,xform:Er});if(y)throw y;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new jr;const s=Date.now()/1e3;let i=s,a=!0,u=null;const{payload:h}=al(n.access_token);if(h.exp&&(i=h.exp,a=i<=s),a){const{session:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;u={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:i-s,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(s){if(ie(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var i;if(!n){const{data:h,error:p}=s;if(p)throw p;n=(i=h.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new jr;const{session:a,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!St())throw new Yi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Yi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new zd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new zd("No code detected.");const{data:O,error:R}=await this._exchangeCodeForSession(n.code);if(R)throw R;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:u,refresh_token:h,expires_in:p,expires_at:g,token_type:v}=n;if(!u||!p||!h||!v)throw new Yi("No session defined in URL");const y=Math.round(Date.now()/1e3),w=parseInt(p);let b=y+w;g&&(b=parseInt(g));const T=b-y;T*1e3<=In&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${w}s`);const L=b-w;y-L>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",L,b,y):y-L<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",L,b,y);const{data:E,error:x}=await this._getUser(u);if(x)throw x;const I={provider_token:i,provider_refresh_token:a,access_token:u,expires_in:w,expires_at:b,refresh_token:h,token_type:v,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:I,redirectType:n.type},error:null}}catch(i){if(ie(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await Hr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var i;const{data:a,error:u}=s;if(u)return{error:u};const h=(i=a.session)===null||i===void 0?void 0:i.access_token;if(h){const{error:p}=await this.admin.signOut(h,n);if(p&&!(ug(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await Sr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=xg(),i={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async s=>{var i,a;try{const{data:{session:u},error:h}=s;if(h)throw h;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,s={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await Ln(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(ie(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:s,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:i,error:a}=await this._useSession(async u=>{var h,p,g,v,y;const{data:w,error:b}=u;if(b)throw b;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",T,{headers:this.headers,jwt:(y=(v=w.session)===null||v===void 0?void 0:v.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return St()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:n.provider,url:i?.url},error:null}}catch(i){if(ie(i))return{data:{provider:n.provider,url:null},error:i};throw i}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var i,a;const{data:u,error:h}=s;if(h)throw h;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(a=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const i=Date.now();return await Sg(async a=>(a>0&&await bg(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:zt})),(a,u)=>{const h=200*Math.pow(2,a);return u&&ol(u)&&Date.now()+h-i<In})}catch(i){if(this._debug(s,"error",i),ie(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",i),St()&&!s.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,s;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Hr(this.storage,this.storageKey);if(a&&this.userStorage){let h=await Hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:a.user},await $n(this.userStorage,this.storageKey+"-user",h)),a.user=(n=h?.user)!==null&&n!==void 0?n:ll()}else if(a&&!a.user&&!a.user){const h=await Hr(this.storage,this.storageKey+"-user");h&&h?.user?(a.user=h.user,await Sr(this.storage,this.storageKey+"-user"),await $n(this.storage,this.storageKey,a)):a.user=ll()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const u=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<il;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${il}s`),u){if(this.autoRefreshToken&&a.refresh_token){const{error:h}=await this._callRefreshToken(a.refresh_token);h&&(console.error(h),ol(h)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(a.access_token);!p&&h?.user?(a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(i,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var s,i;if(!n)throw new jr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new io;const{data:u,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!u.session)throw new jr;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={session:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(a,"error",u),ie(u)){const h={session:null,error:u};return ol(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(n,s,i=!0){const a=`#_notifyAllSubscribers(${n})`;this._debug(a,"begin",s,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:s});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(g){u.push(g)}});if(await Promise.all(h),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(a,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),i=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&s.user&&await $n(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const u=Hd(a);await $n(this.storage,this.storageKey,u)}else{const a=Hd(s);await $n(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Sr(this.storage,this.storageKey),await Sr(this.storage,this.storageKey+"-code-verifier"),await Sr(this.storage,this.storageKey+"-user"),this.userStorage&&await Sr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&St()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),In);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:i}}=s;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-n)/In);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${In}ms, refresh threshold is ${vl} ticks`),a<=vl&&await this._callRefreshToken(i.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof xh)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,i){const a=[`provider=${encodeURIComponent(s)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,h]=await Ln(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});a.push(p.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);a.push(u.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${a.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var i;const{data:a,error:u}=s;return u?{data:null,error:u}:await ue(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var i,a;const{data:u,error:h}=s;if(h)return{data:null,error:h};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:g,error:v}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return v?{data:null,error:v}:(n.factorType==="totp"&&(!((a=g?.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:a,error:u}=s;if(u)return{data:null,error:u};const{data:h,error:p}=await ue(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:p})})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var i;const{data:a,error:u}=s;return u?{data:null,error:u}:await ue(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:i}=await this._challenge({factorId:n.factorId});return i?{data:null,error:i}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const i=n?.factors||[],a=i.filter(h=>h.factor_type==="totp"&&h.status==="verified"),u=i.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:i,totp:a,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,i;const{data:{session:a},error:u}=n;if(u)return{data:null,error:u};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=al(a.access_token);let p=null;h.aal&&(p=h.aal);let g=p;((i=(s=a.user.factors)===null||s===void 0?void 0:s.filter(w=>w.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const y=h.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(n,s={keys:[]}){let i=s.keys.find(p=>p.kid===n);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(p=>p.kid===n),i&&this.jwks_cached_at+ag>a)return i;const{data:u,error:h}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=a,i=u.keys.find(p=>p.kid===n),!i)?null:i}async getClaims(n,s={}){try{let i=n;if(!i){const{data:T,error:L}=await this.getSession();if(L||!T.session)return{data:null,error:L};i=T.session.access_token}const{header:a,payload:u,signature:h,raw:{header:p,payload:g}}=al(i);s?.allowExpired||Lg(u.exp);const v=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!v){const{error:T}=await this.getUser(i);if(T)throw T;return{data:{claims:u,header:a,signature:h},error:null}}const y=Og(a.alg),w=await crypto.subtle.importKey("jwk",v,y,!0,["verify"]);if(!await crypto.subtle.verify(y,w,h,vg(`${p}.${g}`)))throw new xl("Invalid JWT signature");return{data:{claims:u,header:a,signature:h},error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}}}Is.nextInstanceID=0;const Yg=Is;class Xg extends Yg{constructor(n){super(n)}}var Zg=function(l,n,s,i){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function p(y){try{v(i.next(y))}catch(w){h(w)}}function g(y){try{v(i.throw(y))}catch(w){h(w)}}function v(y){y.done?u(y.value):a(y.value).then(p,g)}v((i=i.apply(l,n||[])).next())})};class e0{constructor(n,s,i){var a,u,h;this.supabaseUrl=n,this.supabaseKey=s;const p=rg(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const g=`sb-${p.hostname.split(".")[0]}-auth-token`,v={db:Hm,realtime:Gm,auth:Object.assign(Object.assign({},Km),{storageKey:g}),global:qm},y=tg(i??{},v);this.storageKey=(a=y.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(u=y.global.headers)!==null&&u!==void 0?u:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(w,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=y.auth)!==null&&h!==void 0?h:{},this.headers,y.global.fetch),this.fetch=Xm(s,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new lm(new URL("rest/v1",p).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new Bm(this.storageUrl.href,this.headers,this.fetch,i?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new Xp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},i={}){return this.rest.rpc(n,s,i)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return Zg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:i,storage:a,userStorage:u,storageKey:h,flowType:p,lock:g,debug:v},y,w){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xg({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),y),storageKey:h,autoRefreshToken:n,persistSession:s,detectSessionInUrl:i,storage:a,userStorage:u,flowType:p,lock:g,debug:v,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new jm(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,i)=>{this._handleTokenChanged(s,"CLIENT",i?.access_token)})}_handleTokenChanged(n,s,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const t0=(l,n,s)=>new e0(l,n,s);function r0(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const n=l.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}r0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const n0="",s0="";throw new Error("Missing Supabase environment variables. Check your .env.local file.");const ve=t0(n0,s0,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1},realtime:{params:{eventsPerSecond:10}},global:{headers:{Accept:"application/json","Content-Type":"application/json",Prefer:"return=representation"}},db:{schema:"public"}});class oo{async getSessions(){const{data:n,error:s}=await ve.from("sessions").select("*").order("date",{ascending:!1});return{data:n||null,error:s?new Error(s.message):null}}async getSession(n){const{data:s,error:i}=await ve.from("sessions").select("*").eq("id",n).single();return{data:s||null,error:i?new Error(i.message):null}}async getActiveSession(){const{data:n,error:s}=await ve.from("sessions").select("*").eq("status","active").single();return{data:n||null,error:s?new Error(s.message):null}}async createSession(n){const{data:s,error:i}=await ve.from("sessions").insert(n).select().single();return{data:s||null,error:i?new Error(i.message):null}}async updateSession(n,s){const{data:i,error:a}=await ve.from("sessions").update(s).eq("id",n).select().single();return{data:i||null,error:a?new Error(a.message):null}}async deleteSession(n){const{error:s}=await ve.from("sessions").delete().eq("id",n);return{data:null,error:s?new Error(s.message):null}}async getClimbers(){const{data:n,error:s}=await ve.from("climbers").select("*").order("name",{ascending:!0});return{data:n||null,error:s?new Error(s.message):null}}async getClimber(n){const{data:s,error:i}=await ve.from("climbers").select("*").eq("id",n).single();return{data:s||null,error:i?new Error(i.message):null}}async getClimberByNameAndYear(n,s){const{data:i,error:a}=await ve.from("climbers").select("*").eq("name",n).eq("year_of_birth",s).maybeSingle();return{data:i||null,error:a?new Error(a.message):null}}async getClimbersByClass(n){const{data:s,error:i}=await ve.from("climbers").select("*").eq("class",n).order("name",{ascending:!0});return{data:s||null,error:i?new Error(i.message):null}}async createClimber(n){const{data:s,error:i}=await ve.from("climbers").insert(n).select().single();return{data:s||null,error:i?new Error(i.message):null}}async updateClimber(n,s){const{data:i,error:a}=await ve.from("climbers").update(s).eq("id",n).select().single();return{data:i||null,error:a?new Error(a.message):null}}async deleteClimber(n){const{error:s}=await ve.from("climbers").delete().eq("id",n);return{data:null,error:s?new Error(s.message):null}}async getSessionClimbers(n){const{data:s,error:i}=await ve.from("session_climbers").select("*, climber:climbers(*)").eq("session_id",n).order("rank",{ascending:!0,nullsFirst:!1});return{data:s||null,error:i?new Error(i.message):null}}async addClimberToSession(n,s){const{data:i,error:a}=await ve.from("session_climbers").upsert({session_id:n,climber_id:s,total_points:0,rank:null},{onConflict:"session_id,climber_id",ignoreDuplicates:!1}).select().single();return{data:i||null,error:a?new Error(a.message):null}}async removeClimberFromSession(n,s){const{error:i}=await ve.from("session_climbers").delete().eq("session_id",n).eq("climber_id",s);return{data:null,error:i?new Error(i.message):null}}async getSessionAttempts(n){const{data:s,error:i}=await ve.from("attempts").select("*").eq("session_id",n).order("created_at",{ascending:!0});return{data:s||null,error:i?new Error(i.message):null}}async getClimberAttempts(n,s){const{data:i,error:a}=await ve.from("attempts").select("*").eq("session_id",n).eq("climber_id",s).order("created_at",{ascending:!0});return{data:i||null,error:a?new Error(a.message):null}}async createAttempt(n){const{data:s,error:i}=await ve.from("attempts").insert(n).select().single();return{data:s||null,error:i?new Error(i.message):null}}async updateAttempt(n,s){const{data:i,error:a}=await ve.from("attempts").update(s).eq("id",n).select().single();return{data:i||null,error:a?new Error(a.message):null}}async deleteAttempt(n){const{error:s}=await ve.from("attempts").delete().eq("id",n);return{data:null,error:s?new Error(s.message):null}}async getClassLists(){const{data:n,error:s}=await ve.from("class_lists").select("*").order("display_order",{ascending:!0});return{data:n||null,error:s?new Error(s.message):null}}async createClassList(n){const{data:s,error:i}=await ve.from("class_lists").insert({class_name:n}).select().single();return{data:s||null,error:i?new Error(i.message):null}}async calculateClimberScore(n,s){const{data:i,error:a}=await ve.rpc("calculate_climber_score",{p_session_id:n,p_climber_id:s});return{data:i&&Array.isArray(i)&&i.length>0?i[0]:null,error:a?new Error(a.message):null}}subscribeToSession(n,s){const i=ve.channel(`session:${n}`).on("postgres_changes",{event:"*",schema:"public",table:"sessions",filter:`id=eq.${n}`},s).subscribe();return()=>{ve.removeChannel(i)}}subscribeToSessionClimbers(n,s){const i=ve.channel(`session_climbers:${n}`).on("postgres_changes",{event:"*",schema:"public",table:"session_climbers",filter:`session_id=eq.${n}`},s).subscribe();return()=>{ve.removeChannel(i)}}subscribeToAttempts(n,s){const i=ve.channel(`attempts:${n}`).on("postgres_changes",{event:"*",schema:"public",table:"attempts",filter:`session_id=eq.${n}`},s).subscribe();return()=>{ve.removeChannel(i)}}subscribeToSessions(n,s){const i=ve.channel(`session:${n}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"sessions",filter:`id=eq.${n}`},s).subscribe();return()=>{ve.removeChannel(i)}}}const i0=new oo,Yd=3,eo=so()(Kp((l,n)=>({queue:[],isOnline:typeof navigator<"u"?navigator.onLine:!0,isSyncing:!1,lastSyncAt:null,syncErrors:[],queueAttempt:s=>{const i={...s,queuedAt:Date.now(),retryCount:0};l(a=>({queue:[...a.queue,i]})),n().isOnline&&n().processQueue()},processQueue:async()=>{const{queue:s,isOnline:i,isSyncing:a}=n();if(!i||a||s.length===0)return;l({isSyncing:!0,syncErrors:[]});const u=[];let h=0;for(let p=0;p<s.length;p++){const g=s[p];if(g.retryCount>=Yd){u.push(`Attempt for climber ${g.climber_id} failed after ${Yd} retries`);continue}try{const v=await i0.createAttempt({session_id:g.session_id,climber_id:g.climber_id,grade:g.grade,status:g.status,points:g.points});v.error?(l(y=>({queue:y.queue.map((w,b)=>b===p?{...w,retryCount:w.retryCount+1}:w)})),u.push(`Failed to sync attempt: ${v.error.message}`)):(h++,n().removeFromQueue(p))}catch(v){l(y=>({queue:y.queue.map((w,b)=>b===p?{...w,retryCount:w.retryCount+1}:w)})),u.push(`Network error syncing attempt: ${v instanceof Error?v.message:"Unknown error"}`)}}l({isSyncing:!1,lastSyncAt:Date.now(),syncErrors:u}),console.log(`Sync completed: ${h} attempts synced, ${u.length} errors`)},setOnlineStatus:s=>{l({isOnline:s}),s&&n().queue.length>0&&(console.log("Connection restored, processing queue..."),n().processQueue())},clearQueue:()=>{l({queue:[],syncErrors:[]})},removeFromQueue:s=>{l(i=>({queue:i.queue.filter((a,u)=>u!==s)}))},clearErrors:()=>{l({syncErrors:[]})}}),{name:"hvt-sync-storage",storage:rh(()=>localStorage),partialize:l=>({queue:l.queue,lastSyncAt:l.lastSyncAt})}));typeof window<"u"&&(window.addEventListener("online",()=>{eo.getState().setOnlineStatus(!0)}),window.addEventListener("offline",()=>{eo.getState().setOnlineStatus(!1)}));function o0({children:l,showHomeButton:n=!1,onHomeClick:s,sessionName:i,sessionDate:a,sessionStats:u}){const{isOnline:h,queue:p,isSyncing:g}=eo(),{isDarkMode:v,toggleTheme:y}=Pp(),[w,b]=Y.useState(!1),T=Y.useRef(null);Y.useEffect(()=>{const x=I=>{T.current&&!T.current.contains(I.target)&&b(!1)};return w&&document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[w]);const E=(()=>{if(!u)return null;const x=[];return u.totalClimbs!==null&&u.totalClimbs!==void 0&&x.push(`${u.totalClimbs} ${u.totalClimbs===1?"tick":"ticks"}`),u.activeClimbers!==null&&u.activeClimbers!==void 0&&x.push(`${u.activeClimbers} ${u.activeClimbers===1?"climber":"climbers"}`),u.avgPoints!==null&&u.avgPoints!==void 0&&x.push(`${u.avgPoints.toFixed(0)} avg pts`),x.length>0?x.join("  "):null})();return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[f.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:f.jsx("div",{className:"max-w-6xl mx-auto px-6 py-6",children:f.jsxs("div",{className:"flex gap-3 flex-row items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-semibold text-gray-900 dark:text-white mb-1",children:i||"High-Volume Training"}),f.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[f.jsx("div",{children:a||"Track, analyze, and improve your climbing performance"}),E&&f.jsx("div",{className:"text-sm mt-0.5",children:E})]})]}),f.jsxs("div",{className:"relative",ref:T,children:[f.jsx("button",{onClick:()=>b(!w),className:"btn btn-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600","aria-label":"Menu",title:"Menu",children:f.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),w&&f.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50",children:[n&&s&&f.jsxs("button",{onClick:()=>{s(),b(!1)},className:"w-full px-4 py-2.5 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),f.jsx("span",{children:"Home"})]}),f.jsx("button",{onClick:()=>{y(),b(!1)},className:"w-full px-4 py-2.5 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-3 text-gray-700 dark:text-gray-200",children:v?f.jsxs(f.Fragment,{children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),f.jsx("span",{children:"Light Mode"})]}):f.jsxs(f.Fragment,{children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),f.jsx("span",{children:"Dark Mode"})]})}),f.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-1 pt-1",children:[!h&&f.jsx("div",{className:"px-4 py-2.5 flex items-center gap-3",children:f.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded-lg text-xs",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})}),f.jsx("span",{children:"Offline"}),p.length>0&&f.jsxs("span",{children:["(",p.length,")"]})]})}),g&&f.jsx("div",{className:"px-4 py-2.5 flex items-center gap-3",children:f.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg text-xs",children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),f.jsx("span",{children:"Syncing..."})]})}),h&&!g&&p.length===0&&f.jsx("div",{className:"px-4 py-2.5 flex items-center gap-3",children:f.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg text-xs",children:[f.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("span",{children:"Synced"})]})})]})]})]})]})})}),f.jsx("main",{children:l}),f.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-auto",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:f.jsxs("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:["HVT Tracker  ",new Date().getFullYear()]})})})]})}const Ft=new oo,Qr=so((l,n)=>({sessions:[],activeSession:null,selectedSession:null,isLoading:!1,error:null,realtimeSubscription:null,fetchSessions:async()=>{l({isLoading:!0,error:null});try{const s=await Ft.getSessions();if(s.error){l({error:s.error.message,isLoading:!1});return}l({sessions:s.data||[],isLoading:!1})}catch(s){l({error:s instanceof Error?s.message:"Failed to fetch sessions",isLoading:!1})}},fetchActiveSession:async()=>{l({isLoading:!0,error:null});try{const s=await Ft.getActiveSession();if(s.error){l({activeSession:null,isLoading:!1});return}l({activeSession:s.data,isLoading:!1})}catch(s){l({error:s instanceof Error?s.message:"Failed to fetch active session",isLoading:!1})}},fetchSession:async s=>{try{const i=await Ft.getSession(s);if(i.error){console.error("Failed to fetch session:",i.error.message);return}n().selectedSession?.id===s&&l({selectedSession:i.data}),l(a=>({sessions:a.sessions.map(u=>u.id===s?i.data:u)})),i.data?.status==="active"&&l({activeSession:i.data})}catch(i){console.error("Failed to fetch session:",i)}},createSession:async s=>{l({isLoading:!0,error:null});try{if(s.status==="active"){const a=await Ft.getSessions();if(a.data){const u=a.data.filter(h=>h.status==="active");for(const h of u)await Ft.updateSession(h.id,{status:"completed"})}}const i=await Ft.createSession(s);return i.error?(l({error:i.error.message,isLoading:!1}),null):(await n().fetchSessions(),i.data?.status==="active"&&l({activeSession:i.data}),l({isLoading:!1}),i.data)}catch(i){return l({error:i instanceof Error?i.message:"Failed to create session",isLoading:!1}),null}},updateSession:async(s,i)=>{l({isLoading:!0,error:null});try{const a=await Ft.updateSession(s,i);return a.error?(l({error:a.error.message,isLoading:!1}),null):(l(u=>({sessions:u.sessions.map(h=>h.id===s?a.data:h),isLoading:!1})),a.data?.status==="active"?l({activeSession:a.data}):n().activeSession?.id===s&&l({activeSession:null}),n().selectedSession?.id===s&&l({selectedSession:a.data}),a.data)}catch(a){return l({error:a instanceof Error?a.message:"Failed to update session",isLoading:!1}),null}},deleteSession:async s=>{l({isLoading:!0,error:null});try{if(n().sessions.find(u=>u.id===s)?.status==="active")return l({error:"Cannot delete active session",isLoading:!1}),!1;const a=await Ft.deleteSession(s);return a.error?(l({error:a.error.message,isLoading:!1}),!1):(l(u=>({sessions:u.sessions.filter(h=>h.id!==s),isLoading:!1})),n().selectedSession?.id===s&&l({selectedSession:null}),!0)}catch(i){return l({error:i instanceof Error?i.message:"Failed to delete session",isLoading:!1}),!1}},selectSession:s=>{l({selectedSession:s})},subscribeToSession:s=>{if(n().unsubscribeFromSession(),!Ft.subscribeToSessions){console.warn("Real-time subscriptions not supported by database adapter");return}const i=Ft.subscribeToSessions(s,a=>{if(console.log("Real-time session update:",a),a.eventType==="UPDATE"&&a.new){const u=n().selectedSession;u&&u.id===a.new.id&&l({selectedSession:a.new}),l(h=>({sessions:h.sessions.map(p=>p.id===a.new.id?a.new:p)}))}});l({realtimeSubscription:i})},unsubscribeFromSession:()=>{const{realtimeSubscription:s}=n();s&&(s(),l({realtimeSubscription:null}))},clearError:()=>{l({error:null})}})),vt=new oo,$s=so((l,n)=>({climbers:[],classLists:[],sessionClimbers:[],isLoading:!1,error:null,fetchClimbers:async()=>{l({isLoading:!0,error:null});try{const s=await vt.getClimbers();if(s.error){l({error:s.error.message,isLoading:!1});return}l({climbers:s.data||[],isLoading:!1})}catch(s){l({error:s instanceof Error?s.message:"Failed to fetch climbers",isLoading:!1})}},fetchClassLists:async()=>{l({isLoading:!0,error:null});try{const s=await vt.getClassLists();if(s.error){l({error:s.error.message,isLoading:!1});return}l({classLists:s.data||[],isLoading:!1})}catch(s){l({error:s instanceof Error?s.message:"Failed to fetch class lists",isLoading:!1})}},fetchSessionClimbers:async s=>{l({isLoading:!0,error:null});try{const i=await vt.getSessionClimbers(s);if(i.error){l({error:i.error.message,isLoading:!1});return}l({sessionClimbers:i.data||[],isLoading:!1})}catch(i){l({error:i instanceof Error?i.message:"Failed to fetch session climbers",isLoading:!1})}},createClimber:async s=>{l({isLoading:!0,error:null});try{const i=await vt.createClimber(s);return i.error?(l({error:i.error.message,isLoading:!1}),null):(l(a=>({climbers:[...a.climbers,i.data],isLoading:!1})),i.data)}catch(i){return l({error:i instanceof Error?i.message:"Failed to create climber",isLoading:!1}),null}},updateClimber:async(s,i)=>{l({isLoading:!0,error:null});try{const a=await vt.updateClimber(s,i);return a.error?(l({error:a.error.message,isLoading:!1}),null):(l(u=>({climbers:u.climbers.map(h=>h.id===s?a.data:h),isLoading:!1})),a.data)}catch(a){return l({error:a instanceof Error?a.message:"Failed to update climber",isLoading:!1}),null}},deleteClimber:async s=>{l({isLoading:!0,error:null});try{const i=await vt.deleteClimber(s);return i.error?(l({error:i.error.message,isLoading:!1}),!1):(l(a=>({climbers:a.climbers.filter(u=>u.id!==s),isLoading:!1})),!0)}catch(i){return l({error:i instanceof Error?i.message:"Failed to delete climber",isLoading:!1}),!1}},addClimberToSession:async(s,i)=>{l({isLoading:!0,error:null});try{const a=await vt.addClimberToSession(s,i);return a.error?(l({error:a.error.message,isLoading:!1}),!1):(await n().fetchSessionClimbers(s),l({isLoading:!1}),!0)}catch(a){return l({error:a instanceof Error?a.message:"Failed to add climber to session",isLoading:!1}),!1}},removeClimberFromSession:async(s,i)=>{l({isLoading:!0,error:null});try{const a=await vt.removeClimberFromSession(s,i);return a.error?(l({error:a.error.message,isLoading:!1}),!1):(l(u=>({sessionClimbers:u.sessionClimbers.filter(h=>!(h.session_id===s&&h.climber_id===i)),isLoading:!1})),!0)}catch(a){return l({error:a instanceof Error?a.message:"Failed to remove climber from session",isLoading:!1}),!1}},importClimbersFromCSV:async s=>{l({isLoading:!0,error:null});try{const i=[...new Set(s.map(u=>u.class))],a=n().classLists;for(const u of i)a.some(p=>p.class_name===u)||await vt.createClassList(u);for(const u of s)await vt.createClimber({name:u.name,class:u.class,year_of_birth:u.yearOfBirth,email:u.email});await n().fetchClimbers(),await n().fetchClassLists(),l({isLoading:!1})}catch(i){l({error:i instanceof Error?i.message:"Failed to import climbers",isLoading:!1})}},upsertClimber:async s=>{l({isLoading:!0,error:null});try{const i=await vt.getClimberByNameAndYear(s.name,s.yearOfBirth);if(i.data){const a=i.data.class?i.data.class.split(",").map(h=>h.trim()):[];a.includes(s.class)||a.push(s.class);const u={class:a.join(", ")};return s.email&&s.email.trim()&&(u.email=s.email),await vt.updateClimber(i.data.id,u),l({isLoading:!1}),{created:!1,updated:!0}}else return await vt.createClimber({name:s.name,class:s.class,year_of_birth:s.yearOfBirth,email:s.email}),l({isLoading:!1}),{created:!0,updated:!1}}catch(i){return l({error:i instanceof Error?i.message:"Failed to upsert climber",isLoading:!1}),{created:!1,updated:!1}}},clearError:()=>{l({error:null})}})),Xt=new oo,to=so((l,n)=>({attempts:[],isLoading:!1,error:null,realtimeSubscription:null,fetchSessionAttempts:async s=>{l({isLoading:!0,error:null});try{const i=await Xt.getSessionAttempts(s);if(i.error){l({error:i.error.message,isLoading:!1});return}l({attempts:i.data||[],isLoading:!1})}catch(i){l({error:i instanceof Error?i.message:"Failed to fetch attempts",isLoading:!1})}},fetchClimberAttempts:async(s,i)=>{l({isLoading:!0,error:null});try{const a=await Xt.getClimberAttempts(s,i);if(a.error){l({error:a.error.message,isLoading:!1});return}l({attempts:a.data||[],isLoading:!1})}catch(a){l({error:a instanceof Error?a.message:"Failed to fetch climber attempts",isLoading:!1})}},createAttempt:async s=>{l({isLoading:!0,error:null});try{const i=await Xt.createAttempt(s);return i.error?(l({error:i.error.message,isLoading:!1}),null):(l(a=>({attempts:[...a.attempts,i.data],isLoading:!1})),await n().calculateScore(s.session_id,s.climber_id),i.data)}catch(i){return l({error:i instanceof Error?i.message:"Failed to create attempt",isLoading:!1}),null}},createAttemptsBatch:async s=>{if(s.length===0)return[];l({isLoading:!0,error:null});try{const i=await Promise.all(s.map(h=>Xt.createAttempt(h))),a=i.filter(h=>h.error);if(a.length>0)return l({error:`Failed to create ${a.length} attempt(s)`,isLoading:!1}),[];const u=i.map(h=>h.data).filter(Boolean);return l(h=>({attempts:[...h.attempts,...u],isLoading:!1})),u}catch(i){return l({error:i instanceof Error?i.message:"Failed to create attempts batch",isLoading:!1}),[]}},updateAttempt:async(s,i)=>{l({isLoading:!0,error:null});try{const a=await Xt.updateAttempt(s,i);return a.error?(l({error:a.error.message,isLoading:!1}),null):(l(u=>({attempts:u.attempts.map(h=>h.id===s?a.data:h),isLoading:!1})),a.data&&await n().calculateScore(a.data.session_id,a.data.climber_id),a.data)}catch(a){return l({error:a instanceof Error?a.message:"Failed to update attempt",isLoading:!1}),null}},deleteAttempt:async s=>{l({isLoading:!0,error:null});try{const i=n().attempts.find(u=>u.id===s),a=await Xt.deleteAttempt(s);return a.error?(l({error:a.error.message,isLoading:!1}),!1):(l(u=>({attempts:u.attempts.filter(h=>h.id!==s),isLoading:!1})),i&&await n().calculateScore(i.session_id,i.climber_id),!0)}catch(i){return l({error:i instanceof Error?i.message:"Failed to delete attempt",isLoading:!1}),!1}},calculateScore:async(s,i)=>{try{const a=await Xt.calculateClimberScore(s,i);if(a.error){console.error("Score calculation failed:",a.error.message);return}}catch(a){console.error("Score calculation error:",a)}},subscribeToSessionAttempts:s=>{if(n().unsubscribeFromAttempts(),!Xt.subscribeToAttempts){console.warn("Real-time subscriptions not supported by database adapter");return}const i=Xt.subscribeToAttempts(s,a=>{console.log("Real-time attempt update:",a),a.eventType==="INSERT"&&a.new&&l(u=>({attempts:[...u.attempts,a.new]})),a.eventType==="UPDATE"&&a.new&&l(u=>({attempts:u.attempts.map(h=>h.id===a.new.id?a.new:h)})),a.eventType==="DELETE"&&a.old&&l(u=>({attempts:u.attempts.filter(h=>h.id!==a.old.id)}))});l({realtimeSubscription:i})},unsubscribeFromAttempts:()=>{const{realtimeSubscription:s}=n();s&&(s(),l({realtimeSubscription:null}))},clearError:()=>{l({error:null})}}));function a0({isOpen:l,onClose:n,title:s,children:i,type:a="info",onConfirm:u,confirmText:h="OK",cancelText:p="Cancel"}){if(!l)return null;const g={info:"text-blue-600 dark:text-blue-400",success:"text-green-600 dark:text-green-400",warning:"text-amber-600 dark:text-amber-400",error:"text-red-600 dark:text-red-400"},v={info:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),success:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),warning:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),error:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})};return f.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[f.jsx("div",{className:"fixed inset-0 bg-black/30 dark:bg-black/50 backdrop-blur-sm transition-all",onClick:n}),f.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:f.jsxs("div",{className:"relative bg-white/95 dark:bg-gray-800/95 backdrop-blur-md rounded-lg shadow-xl max-w-md w-full",children:[f.jsxs("div",{className:"flex items-start gap-4 p-6 pb-4",children:[f.jsx("div",{className:`flex-shrink-0 ${g[a]}`,children:v[a]}),f.jsx("div",{className:"flex-1",children:f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s})}),f.jsx("button",{onClick:n,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"px-6 pb-4",children:f.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:i})}),f.jsx("div",{className:"flex gap-3 px-6 py-4 bg-gray-50 dark:bg-gray-700/50 rounded-b-lg",children:u?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 font-medium transition-colors",children:p}),f.jsx("button",{onClick:()=>{u(),n()},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:h})]}):f.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:h})})]})})]})}const ro=l=>new Date(l).toLocaleDateString("en-AU",{day:"2-digit",month:"2-digit",year:"numeric"}),l0=l=>new Date(l).toLocaleDateString("en-AU",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),kh=l=>new Date(l).toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1});function u0({onOpenScoring:l}){const{sessions:n,activeSession:s,createSession:i,updateSession:a,fetchSessions:u,fetchActiveSession:h}=Qr(),{climbers:p,sessionClimbers:g,upsertClimber:v,fetchClimbers:y,fetchClassLists:w,fetchSessionClimbers:b,classLists:T}=$s(),{attempts:L,fetchSessionAttempts:E}=to(),[x,I]=Y.useState(""),[O,R]=Y.useState(""),[z,re]=Y.useState(""),[q,te]=Y.useState(null),[se,Se]=Y.useState(0),[H,be]=Y.useState(""),[de,Fe]=Y.useState("date"),[Pe,Ye]=Y.useState("desc"),[Le,me]=Y.useState(1),[F,X]=Y.useState(10),[B,j]=Y.useState({isOpen:!1,title:"",message:"",type:"info"}),A=(Q,ye,De="info",nt)=>{j({isOpen:!0,title:Q,message:ye,type:De,onConfirm:nt})},oe=()=>{j(Q=>({...Q,isOpen:!1}))};Y.useEffect(()=>{y(),w(),u(),h()},[y,w,u,h]),Y.useEffect(()=>{s&&(b(s.id),E(s.id))},[s,b,E]);const ae=Q=>p.filter(ye=>ye.class===Q).length,he=async()=>{if(!x||!O){A("Missing Information","Please select a class and enter coach name","warning");return}if(ae(x)===0){A("No Climbers",`Cannot create session: "${x}" has no climbers. Please import students first.`,"error");return}const ye=await i({name:x,date:new Date().toISOString().split("T")[0],location:"UJ",status:"active",instructor:O});if(ye){const{climbers:De,addClimberToSession:nt}=$s.getState(),jt=De.filter(Wt=>Wt.class===x);for(const Wt of jt)await nt(ye.id,Wt.id);console.log(`Added ${jt.length} climbers from ${x} to session`)}I(""),R(""),await u()},fe=async()=>{s&&A("End Session","Are you sure you want to end this session?","warning",async()=>{await a(s.id,{status:"completed"}),await u()})},ke=async()=>{if(!z||!q){A("Missing Information","Please provide class name and CSV file","warning");return}const ye=(await q.text()).split(`
`).filter(xe=>xe.trim());if(ye.length===0){A("Empty File","CSV file is empty","error");return}const De=ye[0],nt=De.toLowerCase(),jt=De.split(",").map(xe=>xe.trim()),Wt=nt.includes("first")&&nt.includes("name"),Nr=nt.includes("last")&&nt.includes("name"),tr=nt.includes("year")||nt.includes("birth")||nt.includes("dob");if(!Wt||!Nr||!tr){A("Invalid CSV Format",`CSV must include columns: First Name, Last Name, and Year of Birth (or Date of Birth).

Found columns: ${De}`,"error");return}const Xr=jt.findIndex(xe=>xe.toLowerCase().includes("first")),Fn=jt.findIndex(xe=>xe.toLowerCase().includes("last")),zn=jt.findIndex(xe=>{const Xe=xe.toLowerCase();return Xe.includes("year")||Xe.includes("birth")||Xe.includes("dob")}),Tr=jt.findIndex(xe=>xe.toLowerCase().includes("email")||xe.toLowerCase().includes("e-mail")),Bn=[Xr,Fn,zn];Tr!==-1&&Bn.push(Tr);const Zr=jt.filter((xe,Xe)=>!Bn.includes(Xe));Zr.length>0&&A("Extra Columns Detected",`The following columns will be ignored: ${Zr.join(", ")}`,"info");const Vn=ye.slice(1).map(xe=>{const Xe=xe.split(",").map(sr=>sr.trim()),lo=Xe[Xr]||"",qn=Xe[Fn]||"",Rt=Xe[zn]||"",Pr=Tr!==-1&&Xe[Tr]||void 0;let Lr;if(Rt){if(/^\d{4}$/.test(Rt))Lr=parseInt(Rt);else if(Rt.includes("/")||Rt.includes("-")){const sr=new Date(Rt);isNaN(sr.getTime())||(Lr=sr.getFullYear())}}return{name:`${lo} ${qn}`.trim(),class:z,yearOfBirth:Lr,email:Pr&&Pr.includes("@")?Pr:void 0}}).filter(xe=>xe.name!==""&&xe.yearOfBirth&&xe.yearOfBirth>1900&&xe.yearOfBirth<=new Date().getFullYear());if(Vn.length===0){A("No Valid Records","No valid student records found in CSV. Check that names and birth years are properly formatted.","error");return}let rr=0,nr=0;for(const xe of Vn){const Xe=await v({name:xe.name,class:z,yearOfBirth:xe.yearOfBirth,email:xe.email});Xe.created&&rr++,Xe.updated&&nr++}const ao=`Class "${z}": ${rr} new, ${nr} updated`;A("Success",ao,"success"),re(""),te(null),Se(xe=>xe+1),await y(),await w()},ce=Q=>{de===Q?Ye(Pe==="asc"?"desc":"asc"):(Fe(Q),Ye("asc")),me(1)},we=n.filter(Q=>{if(!H)return!0;const ye=H.toLowerCase();return Q.name.toLowerCase().includes(ye)||(Q.instructor||"").toLowerCase().includes(ye)||ro(Q.date).includes(ye)}).sort((Q,ye)=>{let De=0;return de==="name"?De=Q.name.localeCompare(ye.name):de==="date"?De=new Date(Q.date).getTime()-new Date(ye.date).getTime():de==="instructor"?De=(Q.instructor||"").localeCompare(ye.instructor||""):de==="climbers"?De=(Q.active_climbers||0)-(ye.active_climbers||0):de==="ticks"?De=(Q.total_climbs||0)-(ye.total_climbs||0):de==="totalPoints"?De=(Q.total_points||0)-(ye.total_points||0):de==="avgPoints"&&(De=(Q.avg_points||0)-(ye.avg_points||0)),Pe==="asc"?De:-De}),ze=Math.ceil(we.length/F),er=(Le-1)*F,Mn=er+F,Yr=we.slice(er,Mn);return f.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8 space-y-8",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border-2 border-blue-500 dark:border-blue-400 shadow-lg p-6",children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Start New Session"}),f.jsxs("div",{className:"space-y-5",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Class"}),f.jsxs("select",{value:x,onChange:Q=>I(Q.target.value),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[f.jsx("option",{value:"",children:"Select a class..."}),T.sort((Q,ye)=>Q.display_order-ye.display_order).map(Q=>{const ye=ae(Q.class_name);return f.jsxs("option",{value:Q.class_name,disabled:ye===0,children:[Q.class_name," (",ye," ",ye===1?"climber":"climbers",")"]},Q.id)})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Coach Name"}),f.jsx("input",{type:"text",value:O,onChange:Q=>R(Q.target.value),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter coach name"})]}),f.jsx("button",{onClick:he,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white rounded-lg font-medium transition-colors flex items-center justify-center",children:"Start Session"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Students will be loaded automatically"})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Current Session"}),s?f.jsxs("div",{className:"space-y-5",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"inline-block px-2.5 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-medium rounded",children:"ACTIVE"}),f.jsxs("div",{className:"space-y-1 text-sm",children:[f.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[f.jsx("span",{className:"font-medium",children:"Class:"})," ",s.name]}),f.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[f.jsx("span",{className:"font-medium",children:"Coach:"})," ",s.instructor||"N/A"]}),f.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[f.jsx("span",{className:"font-medium",children:"Climbers:"})," ",g.length]}),f.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[f.jsx("span",{className:"font-medium",children:"Ticks:"})," ",L.length]}),f.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[f.jsx("span",{className:"font-medium",children:"Started:"})," ",kh(s.created_at)]})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:()=>l?.(s),className:"btn btn-lg flex-1 bg-green-600 hover:bg-green-700 text-white",children:"Scoring"}),f.jsx("button",{className:"btn btn-lg flex-1 bg-cyan-600 hover:bg-cyan-700 text-white",children:"Scoreboard"})]}),f.jsx("button",{onClick:fe,className:"btn btn-lg border border-amber-600 text-amber-600 dark:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/10",children:"End Session"})]}):f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No active session"})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Create New Class"}),f.jsxs("div",{className:"space-y-5",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Class Name"}),f.jsx("input",{type:"text",value:z,onChange:Q=>re(Q.target.value),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Punks Thu T3-2025"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Student List (CSV)"}),f.jsx("input",{type:"file",accept:".csv",onChange:Q=>te(Q.target.files?.[0]||null),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-gray-100 dark:file:bg-gray-600 file:text-gray-700 dark:file:text-gray-200 file:cursor-pointer hover:file:bg-gray-200 dark:hover:file:bg-gray-500"},se),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Required: First Name, Last Name, Year of Birth (or Date of Birth)"}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Optional: Email"}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Students will be moved to this class if they exist elsewhere"})]}),f.jsx("button",{onClick:ke,className:"btn btn-lg bg-purple-600 hover:bg-purple-700 text-white",children:"Create Class"})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Quick Actions"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsx("button",{onClick:()=>u(),className:"btn btn-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Refresh Data"}),f.jsx("button",{className:"btn btn-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Sanitize Data"}),f.jsx("button",{className:"btn btn-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"View Classes"}),f.jsx("button",{className:"btn btn-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Export Session"})]})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Session History"}),f.jsxs("div",{className:"relative w-64",children:[f.jsx("input",{type:"text",placeholder:"Search sessions...",value:H,onChange:Q=>be(Q.target.value),className:"w-full px-4 py-2 pr-10 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),H&&f.jsx("button",{onClick:()=>be(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",title:"Clear search",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[f.jsx("th",{className:"sticky left-0 z-10 px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 select-none border-r border-gray-200 dark:border-gray-700",onClick:()=>ce("name"),title:"Click to sort",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Class",de==="name"&&f.jsx("span",{className:"font-bold",children:Pe==="asc"?"":""})]})}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 select-none",onClick:()=>ce("date"),title:"Click to sort",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Date",de==="date"&&f.jsx("span",{className:"font-bold",children:Pe==="asc"?"":""})]})}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 select-none",onClick:()=>ce("instructor"),title:"Click to sort",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Coach",de==="instructor"&&f.jsx("span",{className:"font-bold",children:Pe==="asc"?"":""})]})}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 select-none",onClick:()=>ce("climbers"),title:"Click to sort",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Climbers",de==="climbers"&&f.jsx("span",{className:"font-bold",children:Pe==="asc"?"":""})]})}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 select-none",onClick:()=>ce("ticks"),title:"Click to sort",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Ticks",de==="ticks"&&f.jsx("span",{className:"font-bold",children:Pe==="asc"?"":""})]})}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 select-none",onClick:()=>ce("totalPoints"),title:"Click to sort",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Total Score",de==="totalPoints"&&f.jsx("span",{className:"font-bold",children:Pe==="asc"?"":""})]})}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 select-none",onClick:()=>ce("avgPoints"),title:"Click to sort",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("svg",{className:"w-3 h-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),"Avg Score",de==="avgPoints"&&f.jsx("span",{className:"font-bold",children:Pe==="asc"?"":""})]})}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Yr.map(Q=>f.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[f.jsx("td",{className:"sticky left-0 z-0 px-4 py-3 text-sm text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:f.jsxs("div",{className:"flex items-center gap-2",children:[Q.status==="active"&&f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full",title:"Active session"}),Q.name]})}),f.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100",children:ro(Q.date)}),f.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:Q.instructor||"N/A"}),f.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:Q.active_climbers||0}),f.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:Q.total_climbs||0}),f.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:Q.total_points||0}),f.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:Q.avg_points?Q.avg_points.toFixed(1):"0.0"}),f.jsx("td",{className:"px-4 py-3 text-sm",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{className:"btn btn-xs text-gray-400 hover:text-blue-600 bg-transparent",title:"View statistics",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),f.jsx("button",{className:"btn btn-xs text-gray-400 hover:text-orange-600 bg-transparent",title:"Export report",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),f.jsx("button",{className:"btn btn-xs text-gray-400 hover:text-red-600 bg-transparent",title:"Delete session",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},Q.id))})]})}),we.length>0&&f.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[f.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",er+1," to ",Math.min(Mn,we.length)," of ",we.length," sessions"]}),f.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3 w-full sm:w-auto",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("label",{htmlFor:"session-history-page-size",className:"text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap",children:"Rows"}),f.jsxs("select",{id:"session-history-page-size",value:F,onChange:Q=>{X(Number(Q.target.value)),me(1)},className:"w-full sm:w-24 px-3 py-1.5 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg text-sm",children:[f.jsx("option",{value:10,children:"10"}),f.jsx("option",{value:25,children:"25"}),f.jsx("option",{value:50,children:"50"}),f.jsx("option",{value:100,children:"100"})]})]}),f.jsxs("div",{className:"flex flex-wrap items-center justify-between sm:justify-start gap-2",children:[f.jsx("button",{onClick:()=>me(1),disabled:Le===1,className:"hidden sm:inline-flex btn btn-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600",children:"First"}),f.jsx("button",{onClick:()=>me(Q=>Math.max(1,Q-1)),disabled:Le===1,className:"btn btn-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600",children:"Previous"}),f.jsxs("span",{className:"px-3 py-1.5 text-sm text-gray-700 dark:text-gray-300 text-center whitespace-nowrap",children:["Page ",Le," of ",ze]}),f.jsx("button",{onClick:()=>me(Q=>Math.min(ze,Q+1)),disabled:Le===ze,className:"btn btn-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600",children:"Next"}),f.jsx("button",{onClick:()=>me(ze),disabled:Le===ze,className:"hidden sm:inline-flex btn btn-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600",children:"Last"})]})]})]})]}),f.jsx(a0,{isOpen:B.isOpen,onClose:oe,title:B.title,type:B.type,onConfirm:B.onConfirm,confirmText:B.onConfirm?"Confirm":"OK",children:f.jsx("p",{className:"whitespace-pre-line",children:B.message})})]})}const c0={V0:{gradient:"linear-gradient(135deg, #a8e6cf, #dcedc1)",textColor:"#2d3436",bgColor:"#a8e6cf",lightGradient:"linear-gradient(135deg, #8ed1ad, #bcd3a0)"},V1:{gradient:"linear-gradient(135deg, #ffd3a5, #fd9853)",textColor:"#2d3436",bgColor:"#ffd3a5",lightGradient:"linear-gradient(135deg, #e6b885, #e37a33)"},V2:{gradient:"linear-gradient(135deg, #ffeaa7, #fdcb6e)",textColor:"#2d3436",bgColor:"#ffeaa7",lightGradient:"linear-gradient(135deg, #e6d187, #e3b14e)"},V3:{gradient:"linear-gradient(135deg, #fab1a0, #e17055)",textColor:"#2d3436",bgColor:"#fab1a0",lightGradient:"linear-gradient(135deg, #e19180, #c75035)"},V4:{gradient:"linear-gradient(135deg, #ff7675, #d63031)",textColor:"#fff",bgColor:"#ff7675",lightGradient:"linear-gradient(135deg, #e65655, #b61011)"},V5:{gradient:"linear-gradient(135deg, #fd79a8, #e84393)",textColor:"#fff",bgColor:"#fd79a8",lightGradient:"linear-gradient(135deg, #e35988, #c82373)"},V6:{gradient:"linear-gradient(135deg, #a29bfe, #6c5ce7)",textColor:"#fff",bgColor:"#a29bfe",lightGradient:"linear-gradient(135deg, #827be6, #4c3cc7)"},V7:{gradient:"linear-gradient(135deg, #74b9ff, #0984e3)",textColor:"#fff",bgColor:"#74b9ff",lightGradient:"linear-gradient(135deg, #5499e6, #0064c3)"},V8:{gradient:"linear-gradient(135deg, #55a3ff, #2d3436)",textColor:"#fff",bgColor:"#55a3ff",lightGradient:"linear-gradient(135deg, #3583e6, #0d1416)"},V9:{gradient:"linear-gradient(135deg, #636e72, #2d3436)",textColor:"#fff",bgColor:"#636e72",lightGradient:"linear-gradient(135deg, #434e52, #0d1416)"},V10:{gradient:"linear-gradient(135deg, #2d3436, #000)",textColor:"#fff",bgColor:"#2d3436",lightGradient:"linear-gradient(135deg, #0d1416, #000)"}};function d0({grade:l,flashCount:n,topCount:s,attCount:i,onAddTicks:a,isDarkMode:u=!1}){const h=l.replace("V",""),p=c0[l],g=u&&p.lightGradient?p.lightGradient:p.gradient,[v,y]=Y.useState({flash:0,top:0,fail:0}),w=Y.useRef({flash:0,top:0,fail:0}),b=Y.useRef(),T=()=>{const x={...w.current};y({flash:0,top:0,fail:0}),w.current={flash:0,top:0,fail:0},x.flash!==0&&a(l,"flash",x.flash),x.top!==0&&a(l,"top",x.top),x.fail!==0&&a(l,"fail",x.fail)};Y.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]);const L=(x,I)=>{if(I<0){const O=x==="flash"?n:x==="top"?s:i,R=w.current[x];if(O+R<=0)return}y(O=>{const R={...O,[x]:O[x]+I};return w.current=R,R}),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{T()},800)},E=(x,I,O)=>{const R=v[I],z=R>0,re=R<0;return f.jsxs("div",{className:"flex items-center justify-end gap-2 px-3 py-2",children:[f.jsx("span",{className:"text-sm sm:text-base font-semibold uppercase tracking-wide opacity-50",children:x}),f.jsx("button",{onClick:()=>L(I,1),className:"w-10 h-10 sm:w-11 sm:h-11 rounded-lg shadow hover:shadow-md flex items-center justify-center font-semibold text-base transition-all duration-150 hover:scale-105 active:scale-95 touch-manipulation",style:{background:p.bgColor,color:p.textColor},children:"+"}),f.jsx("button",{onClick:()=>L(I,2),className:"w-10 h-10 sm:w-11 sm:h-11 rounded-lg shadow hover:shadow-md flex items-center justify-center font-semibold text-base transition-all duration-150 hover:scale-105 active:scale-95 touch-manipulation",style:{background:p.bgColor,color:p.textColor},children:"+2"}),f.jsx("button",{onClick:()=>L(I,5),className:"w-10 h-10 sm:w-11 sm:h-11 rounded-lg shadow hover:shadow-md flex items-center justify-center font-semibold text-base transition-all duration-150 hover:scale-105 active:scale-95 touch-manipulation",style:{background:p.bgColor,color:p.textColor},children:"+5"}),f.jsxs("div",{className:"w-12 sm:w-14 h-10 sm:h-11 flex items-center justify-center text-2xl font-bold",children:[f.jsx("span",{children:O}),R!==0&&f.jsx("span",{className:`text-sm ml-1 ${z||re?"opacity-60":""}`,children:z?`+${R}`:R})]}),f.jsx("button",{onClick:()=>L(I,-1),disabled:O+R===0,className:"w-10 h-10 sm:w-11 sm:h-11 rounded-lg shadow hover:shadow-md flex items-center justify-center font-semibold text-base transition-all duration-150 hover:scale-105 active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed touch-manipulation",style:{background:p.bgColor,color:p.textColor},children:"-"})]})};return f.jsxs("div",{className:"relative overflow-hidden rounded-xl my-4 shadow-sm p-4 sm:p-0",style:{background:g,color:p.textColor},children:[f.jsx("div",{className:"absolute left-2 top-0 bottom-0 flex items-center opacity-20 pointer-events-none",children:f.jsx("span",{className:"text-8xl sm:text-9xl font-bold leading-none",style:{fontWeight:300},children:h})}),f.jsx("button",{className:"absolute top-0 left-0 w-6 h-6 flex items-center justify-center text-xl opacity-25 hover:opacity-100 transition-opacity","aria-label":"Hide grade",children:""}),f.jsxs("div",{className:"relative z-10",children:[E("FLASH","flash",n),E("TOP","top",s),E("ATT","fail",i)]})]})}const h0=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10"],Xd=l=>{const n=l.trim().split(/\s+/);if(n.length===0)return l;if(n.length===1)return n[0];const s=n[0],a=n[n.length-1].charAt(0).toUpperCase();return`${s} ${a}.`},f0=(l,n)=>{const i=800+parseInt(l.replace("V",""))*200;return n==="flash"?i:n==="top"?i/2:i/10};function p0(){const{activeSession:l,fetchSession:n}=Qr(),{sessionClimbers:s,fetchSessionClimbers:i}=$s(),{attempts:a,createAttemptsBatch:u,fetchSessionAttempts:h,calculateScore:p}=to(),[g,v]=Y.useState(0),[y,w]=Y.useState(!1),[b,T]=Y.useState(!1),L=Y.useRef(0),E=Y.useRef(0),x=s[g];if(Y.useEffect(()=>{if(!localStorage.getItem("hasSeenSwipeHint")){T(!0);const be=setTimeout(()=>{T(!1),localStorage.setItem("hasSeenSwipeHint","true")},3e3);return()=>clearTimeout(be)}},[]),Y.useEffect(()=>{l&&(i(l.id),h(l.id))},[l,i,h]),!l)return f.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"No Active Session"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please start a session first"})]})});const I=(H,be)=>x?a.filter(de=>de.climber_id===x.climber_id&&de.grade===H&&de.status===be).length:0,O=async(H,be,de)=>{if(!x||!l)return;if(de<0){const F=I(H,be),X=Math.abs(de);if(F<X)return;const B=a.filter(A=>A.climber_id===x.climber_id&&A.grade===H&&A.status===be).slice(0,X),{deleteAttempt:j}=to.getState();for(const A of B)await j(A.id);await h(l.id),await i(l.id);return}const Fe=x.climber_id,Pe=f0(H,be),Ye=[];for(let F=0;F<de;F++)Ye.push({session_id:l.id,climber_id:Fe,grade:H,status:be,points:Pe});await u(Ye),await p(l.id,Fe),await h(l.id),await i(l.id),await n(l.id);const{sessionClimbers:Le}=$s.getState(),me=Le.findIndex(F=>F.climber_id===Fe);me!==-1&&v(me)},R=()=>{s.length!==0&&v(H=>(H-1+s.length)%s.length)},z=()=>{s.length!==0&&v(H=>(H+1)%s.length)},re=H=>{v(H),w(!1)},q=H=>{L.current=H.touches[0].clientX},te=H=>{E.current=H.touches[0].clientX},se=()=>{if(!L.current||!E.current)return;const H=L.current-E.current,be=H>50,de=H<-50;be?z():de&&R(),L.current=0,E.current=0},Se=()=>x?a.filter(H=>H.climber_id===x.climber_id).sort((H,be)=>new Date(be.created_at).getTime()-new Date(H.created_at).getTime()).slice(0,10):[];return f.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors",children:[f.jsxs("div",{className:"sticky top-0 z-20 bg-gray-100 dark:bg-gray-900 max-w-4xl mx-auto px-4 pt-4 pb-3",onTouchStart:q,onTouchMove:te,onTouchEnd:se,children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 relative",children:[b&&f.jsx("div",{className:"absolute inset-0 bg-purple-600/10 dark:bg-purple-400/10 rounded-xl flex items-center justify-center pointer-events-none animate-pulse",children:f.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400 font-semibold",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),f.jsx("span",{children:"Swipe to switch climbers"}),f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x?Xd(x.climber.name):"Select Climber"}),f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[x?`${(x.total_points||0).toFixed(1)} pts`:"0.0 pts",x?.rank&&`  Rank #${x.rank}`]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:R,disabled:s.length===0,className:"w-10 h-10 rounded-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white flex items-center justify-center transition-all duration-200 hover:scale-105 active:scale-95 disabled:cursor-not-allowed",title:"Previous climber",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),f.jsx("button",{onClick:()=>w(!y),disabled:s.length===0,className:"w-10 h-10 rounded-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white flex items-center justify-center transition-all duration-200 hover:scale-105 active:scale-95 disabled:cursor-not-allowed",title:"Select climber",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),f.jsx("button",{onClick:z,disabled:s.length===0,className:"w-10 h-10 rounded-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 text-white flex items-center justify-center transition-all duration-200 hover:scale-105 active:scale-95 disabled:cursor-not-allowed",title:"Next climber",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]}),y&&f.jsx("div",{className:"mt-2 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 max-h-80 overflow-y-auto",children:s.map((H,be)=>f.jsx("button",{onClick:()=>re(be),className:`w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${be===g?"bg-purple-50 dark:bg-purple-900/20":""}`,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:Xd(H.climber.name)}),f.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(H.total_points||0).toFixed(1)," pts",H.rank&&`  Rank #${H.rank}`]})]}),be===g&&f.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},H.climber_id))})]}),f.jsx("div",{className:"max-w-4xl mx-auto px-4 pb-4 space-y-3",children:h0.map(H=>f.jsx(d0,{grade:H,flashCount:I(H,"flash"),topCount:I(H,"top"),attCount:I(H,"fail"),onAddTicks:O},H))}),x&&Se().length>0&&f.jsx("div",{className:"max-w-4xl mx-auto px-4 pb-8",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4",children:[f.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:["Recent Ticks (",Se().length,")"]}),f.jsx("div",{className:"space-y-2",children:Se().map(H=>f.jsxs("div",{className:"flex items-center justify-between w-full py-2 px-3 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[f.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[f.jsx("span",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300 w-12",children:H.grade}),f.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-semibold uppercase whitespace-nowrap ${H.status==="flash"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":H.status==="top"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-300"}`,children:H.status==="fail"?"ATT":H.status})]}),f.jsxs("div",{className:"text-right flex-shrink-0 ml-auto",children:[f.jsxs("p",{className:"text-sm font-semibold text-purple-600 dark:text-purple-400 whitespace-nowrap",children:["+",H.points.toFixed(0)," pts"]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:kh(H.created_at)})]})]},H.id))})]})})]})}function m0({sessions:l,onSelectSession:n,onCreateSession:s,onDeleteSession:i,isLoading:a=!1}){const[u,h]=Y.useState("all"),p=l.filter(y=>u==="all"?!0:y.status===u),g=y=>{switch(y){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},v=y=>ro(y);return a?f.jsx("div",{className:"flex items-center justify-center p-8",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex gap-2",children:["all","active","completed","cancelled"].map(y=>f.jsx("button",{onClick:()=>h(y),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${u===y?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:y.charAt(0).toUpperCase()+y.slice(1)},y))}),f.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium",children:"+ New Session"})]}),f.jsx("div",{className:"space-y-2",children:p.length===0?f.jsx("div",{className:"text-center py-8 text-gray-500",children:u==="all"?"No sessions yet. Create your first session!":`No ${u} sessions found.`}):p.map(y=>f.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>n(y),children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y.name}),f.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${g(y.status)}`,children:y.status})]}),f.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx("svg",{className:"flex-shrink-0",width:"12",height:"12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{minWidth:"12px",minHeight:"12px",maxWidth:"12px",maxHeight:"12px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),v(y.date)]}),f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsxs("svg",{className:"flex-shrink-0",width:"12",height:"12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{minWidth:"12px",minHeight:"12px",maxWidth:"12px",maxHeight:"12px"},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),y.location]})]})]}),y.status!=="active"&&f.jsx("button",{onClick:w=>{w.stopPropagation(),window.confirm(`Are you sure you want to delete "${y.name}"? This cannot be undone.`)&&i(y.id)},className:"ml-4 p-2 text-gray-400 hover:text-red-600 transition-colors","aria-label":"Delete session",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},y.id))})]})}function g0({session:l,onSubmit:n,onCancel:s,isLoading:i=!1}){const[a,u]=Y.useState({name:l?.name||"",date:l?.date||new Date().toISOString().split("T")[0],location:l?.location||"UJ",status:l?.status||"active",instructor:l?.instructor||"",duration_minutes:l?.duration_minutes||null}),[h,p]=Y.useState({});Y.useEffect(()=>{l&&u({name:l.name,date:l.date,location:l.location,status:l.status,instructor:l.instructor||"",duration_minutes:l.duration_minutes||null})},[l]);const g=()=>{const w={};return a.name.trim()?a.name.length>100&&(w.name="Session name must be 100 characters or less"):w.name="Session name is required",a.date||(w.date="Date is required"),a.location.trim()?a.location.length>100&&(w.location="Location must be 100 characters or less"):w.location="Location is required",p(w),Object.keys(w).length===0},v=w=>{w.preventDefault(),g()&&n(a)},y=(w,b)=>{u(T=>({...T,[w]:b})),h[w]&&p(T=>{const L={...T};return delete L[w],L})};return f.jsxs("form",{onSubmit:v,className:"space-y-6",children:[f.jsx("div",{children:f.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:l?"Edit Session":"Create New Session"})}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Session Name ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",id:"name",value:a.name,onChange:w=>y("name",w.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.name?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Tuesday HVT Session",maxLength:100}),h.name&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.name})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"date",id:"date",value:a.date,onChange:w=>y("date",w.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.date?"border-red-500":"border-gray-300"}`}),h.date&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.date})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:["Location ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",id:"location",value:a.location,onChange:w=>y("location",w.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.location?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Boulder Gym Downtown",maxLength:100}),h.location&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.location})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"instructor",className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructor"}),f.jsx("input",{type:"text",id:"instructor",value:a.instructor||"",onChange:w=>y("instructor",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., John Doe",maxLength:100})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"duration_minutes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),f.jsx("input",{type:"number",id:"duration_minutes",value:a.duration_minutes||"",onChange:w=>y("duration_minutes",w.target.value?parseInt(w.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Leave empty to auto-calculate from attempts",min:"1"}),f.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optional. If not entered, duration will be calculated from first/last attempt when session ends."})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsxs("select",{id:"status",value:a.status,onChange:w=>y("status",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"active",children:"Active"}),f.jsx("option",{value:"completed",children:"Completed"}),f.jsx("option",{value:"cancelled",children:"Cancelled"})]}),a.status==="active"&&!l&&f.jsx("p",{className:"mt-1 text-sm text-amber-600",children:" Only one session can be active at a time (FR-010)"})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:i?"Saving...":l?"Update Session":"Create Session"}),f.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Cancel"})]})]})}function v0(l=!0){const{sessions:n,activeSession:s,selectedSession:i,isLoading:a,error:u,fetchSessions:h,fetchActiveSession:p,createSession:g,updateSession:v,deleteSession:y,selectSession:w,clearError:b}=Qr();return Y.useEffect(()=>{l&&(h(),p())},[l,h,p]),{sessions:n,activeSession:s,selectedSession:i,isLoading:a,error:u,fetchSessions:h,fetchActiveSession:p,createSession:g,updateSession:v,deleteSession:y,selectSession:w,clearError:b}}function y0({onSessionSelect:l}){const{sessions:n,isLoading:s,error:i,createSession:a,updateSession:u,deleteSession:h,clearError:p}=v0(),[g,v]=Y.useState(!1),[y,w]=Y.useState(null),b=()=>{w(null),v(!0)},T=async x=>{y?await u(y.id,x)&&(v(!1),w(null)):await a(x)&&v(!1)},L=()=>{v(!1),w(null),p()},E=async x=>{await h(x)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sessions"}),f.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your climbing training sessions. Select a session to view details or start tracking attempts."})]}),i&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsxs("div",{className:"ml-3 flex-1",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),f.jsx("p",{className:"mt-1 text-sm text-red-700",children:i})]}),f.jsx("button",{onClick:p,className:"ml-3 text-red-600 hover:text-red-800","aria-label":"Dismiss error",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),g&&f.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-lg",children:f.jsx(g0,{session:y||void 0,onSubmit:T,onCancel:L,isLoading:s})}),!g&&f.jsx(m0,{sessions:n,onSelectSession:l,onCreateSession:b,onDeleteSession:E,isLoading:s})]})}function w0({climbers:l,attempts:n,onRecordAttempt:s,isLoading:i=!1}){const[a,u]=Y.useState(""),[h,p]=Y.useState("V0"),[g,v]=Y.useState("top"),y=["V0","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10"],w=x=>{switch(x){case"flash":return 1e3;case"top":return 800;case"fail":return 100;default:return 0}},b=x=>{if(x.preventDefault(),!a){alert("Please select a climber");return}const I=w(g);s({climberId:a,grade:h,status:g,points:I}),v("top")},T=n.filter(x=>x.climber_id===a).sort((x,I)=>new Date(I.created_at).getTime()-new Date(x.created_at).getTime()),L=x=>{switch(x){case"flash":return"bg-green-100 text-green-800";case"top":return"bg-blue-100 text-blue-800";case"fail":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},E=x=>{switch(x){case"flash":return"";case"top":return"";case"fail":return"";default:return"?"}};return f.jsxs("div",{className:"space-y-6",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Track Attempts"}),f.jsx("form",{onSubmit:b,className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"climber",className:"block text-sm font-medium text-gray-700 mb-1",children:["Climber ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsxs("select",{id:"climber",value:a,onChange:x=>u(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[f.jsx("option",{value:"",children:"Select climber..."}),l.map(x=>f.jsxs("option",{value:x.id,children:[x.name," (",x.class,")"]},x.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"grade",className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),f.jsx("select",{id:"grade",value:h,onChange:x=>p(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.map(x=>f.jsx("option",{value:x,children:x},x))})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Result"}),f.jsxs("select",{id:"status",value:g,onChange:x=>v(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsxs("option",{value:"flash",children:[" Flash (",w("flash")," pts)"]}),f.jsxs("option",{value:"top",children:[" Top (",w("top")," pts)"]}),f.jsxs("option",{value:"fail",children:[" Fail (",w("fail")," pts)"]})]})]}),f.jsx("div",{className:"flex items-end",children:f.jsx("button",{type:"submit",disabled:i||!a,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:i?"Saving...":"Record"})})]})}),a&&f.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:[l.find(x=>x.id===a)?.name,"'s Attempts"]}),T.length===0?f.jsx("p",{className:"text-gray-500 text-sm",children:"No attempts recorded yet."}):f.jsx("div",{className:"space-y-2",children:T.map(x=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-sm font-medium text-gray-900 w-12",children:x.grade}),f.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(x.status)}`,children:[E(x.status)," ",x.status]}),f.jsxs("span",{className:"text-sm text-gray-600",children:[x.points," pts"]})]}),f.jsx("button",{onClick:()=>{window.confirm("Delete this attempt?")&&console.log("Delete attempt:",x.id)},className:"text-gray-400 hover:text-red-600 transition-colors",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},x.id))})]})]})}function x0({sessionClimbers:l,climbers:n,isLoading:s=!1,highlightClimberId:i}){const a=Y.useMemo(()=>l.filter(v=>v.total_points>0).map(v=>({climber:n.find(w=>w.id===v.climber_id),sessionClimber:v,rank:v.rank,totalPoints:v.total_points})).filter(v=>v.climber).sort((v,y)=>v.rank===null&&y.rank===null?y.totalPoints-v.totalPoints:v.rank===null?1:y.rank===null?-1:v.rank-y.rank),[l,n]),u=g=>{if(g===null)return"-";const v=["th","st","nd","rd"],y=g%100;return g+(v[(y-20)%10]||v[y]||v[0])},h=g=>g===null?"bg-gray-100 text-gray-800":g===1?"bg-yellow-100 text-yellow-800":g===2?"bg-gray-200 text-gray-800":g===3?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800",p=g=>g===1?"":g===2?"":g===3?"":"";return s?f.jsx("div",{className:"flex items-center justify-center p-8",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Leaderboard"}),f.jsxs("div",{className:"text-sm text-gray-600",children:[a.length," ",a.length===1?"climber":"climbers"]})]}),a.length===0?f.jsx("div",{className:"text-center py-12 bg-white border border-gray-200 rounded-lg",children:f.jsx("p",{className:"text-gray-500",children:"No scores yet. Start recording attempts!"})}):f.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Rank"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Climber"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Class"}),f.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Points"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map((g,v)=>{const y=g.climber.id===i,w=a[v-1],b=w&&w.rank===g.rank;return f.jsxs("tr",{className:`transition-colors ${y?"bg-blue-50 border-l-4 border-blue-500":"hover:bg-gray-50"}`,children:[f.jsx("td",{className:"px-4 py-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[g.rank&&g.rank<=3&&f.jsx("span",{className:"text-xl",children:p(g.rank)}),f.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h(g.rank)}`,children:u(g.rank)}),b&&f.jsx("span",{className:"text-xs text-gray-500",title:"Tied with previous",children:"="})]})}),f.jsx("td",{className:"px-4 py-4",children:f.jsx("div",{className:"font-medium text-gray-900",children:g.climber.name})}),f.jsx("td",{className:"px-4 py-4",children:f.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md bg-gray-100 text-xs font-medium text-gray-800",children:g.climber.class})}),f.jsxs("td",{className:"px-4 py-4 text-right",children:[f.jsx("span",{className:"text-lg font-semibold text-gray-900",children:g.totalPoints.toLocaleString()}),f.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"pts"})]})]},g.sessionClimber.id)})})]})}),a.some((g,v)=>{const y=a[v-1];return y&&y.rank===g.rank})&&f.jsxs("div",{className:"text-xs text-gray-500 bg-gray-50 p-3 rounded-md",children:[f.jsx("strong",{children:"Note:"})," When climbers tie, they share the same rank. The next rank after a tie will have a gap (e.g., if two climbers tie for 1st, the next climber is ranked 3rd)."]})]})}function _0({climbers:l,classLists:n,selectedClimberIds:s,onSelectionChange:i,onAddNewClimber:a,isLoading:u=!1}){const[h,p]=Y.useState(""),[g,v]=Y.useState("all"),y=Y.useMemo(()=>l.filter(x=>{const I=x.name.toLowerCase().includes(h.toLowerCase()),O=g==="all"||x.class===g;return I&&O}),[l,h,g]),w=x=>{s.includes(x)?i(s.filter(I=>I!==x)):i([...s,x])},b=()=>{const x=y.map(I=>I.id);i([...new Set([...s,...x])])},T=()=>{const x=new Set(y.map(I=>I.id));i(s.filter(I=>!x.has(I)))},L=s.length,E=y.filter(x=>s.includes(x.id)).length;return u?f.jsx("div",{className:"flex items-center justify-center p-8",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Climbers ",L>0&&`(${L} selected)`]}),f.jsx("button",{onClick:a,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"+ Add New Climber"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",placeholder:"Search climbers...",value:h,onChange:x=>p(x.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),f.jsxs("select",{value:g,onChange:x=>v(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"all",children:"All Classes"}),n.map(x=>f.jsx("option",{value:x.class_name,children:x.class_name},x.id))]})]}),y.length>0&&f.jsxs("div",{className:"flex gap-2 text-sm",children:[f.jsxs("button",{onClick:b,className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:["Select All (",y.length,")"]}),E>0&&f.jsxs("button",{onClick:T,className:"px-3 py-1 text-gray-600 hover:bg-gray-50 rounded-md transition-colors",children:["Deselect All (",E,")"]})]}),f.jsx("div",{className:"border border-gray-300 rounded-md max-h-96 overflow-y-auto",children:y.length===0?f.jsx("div",{className:"text-center py-8 text-gray-500",children:h||g!=="all"?"No climbers found matching your filters.":"No climbers available. Add a new climber to get started."}):f.jsx("div",{className:"divide-y divide-gray-200",children:y.map(x=>{const I=s.includes(x.id);return f.jsxs("label",{className:`flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50 transition-colors ${I?"bg-blue-50":""}`,children:[f.jsx("input",{type:"checkbox",checked:I,onChange:()=>w(x.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"font-medium text-gray-900",children:x.name}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Class: ",x.class]})]}),I&&f.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},x.id)})})}),L===0&&f.jsx("p",{className:"text-sm text-amber-600",children:" At least one climber must be selected (FR-004)"})]})}function k0(l,n,s=!0){const{attempts:i,isLoading:a,error:u,fetchSessionAttempts:h,fetchClimberAttempts:p,createAttempt:g,updateAttempt:v,deleteAttempt:y,calculateScore:w,subscribeToSessionAttempts:b,unsubscribeFromAttempts:T,clearError:L}=to(),{queueAttempt:E,isOnline:x,queue:I,isSyncing:O}=eo();Y.useEffect(()=>{l&&h(l)},[l,n,h,p]),Y.useEffect(()=>(l&&s&&b(l),()=>{T()}),[l,s,b,T]);const R=async z=>x?g(z):(E(z),null);return{attempts:i,isLoading:a,error:u,isOnline:x,isSyncing:O,queueLength:I.length,fetchSessionAttempts:h,fetchClimberAttempts:p,createAttempt:R,updateAttempt:v,deleteAttempt:y,calculateScore:w,clearError:L}}function b0(l,n=!0){const{climbers:s,classLists:i,sessionClimbers:a,isLoading:u,error:h,fetchClimbers:p,fetchClassLists:g,fetchSessionClimbers:v,createClimber:y,updateClimber:w,deleteClimber:b,addClimberToSession:T,removeClimberFromSession:L,clearError:E}=$s();return Y.useEffect(()=>{n&&(p(),g())},[n,p,g]),Y.useEffect(()=>{l&&n&&v(l)},[l,n,v]),{climbers:s,classLists:i,sessionClimbers:a,isLoading:u,error:h,fetchClimbers:p,fetchClassLists:g,fetchSessionClimbers:v,createClimber:y,updateClimber:w,deleteClimber:b,addClimberToSession:T,removeClimberFromSession:L,clearError:E}}function S0({session:l,onBackToSessions:n}){const[s,i]=Y.useState(!1),[a,u]=Y.useState("track"),{attempts:h,isLoading:p,error:g,createAttempt:v,isOnline:y,queueLength:w}=k0(l.id),{climbers:b,classLists:T,sessionClimbers:L,isLoading:E,error:x,addClimberToSession:I,fetchSessionClimbers:O}=b0(l.id),R=L.map(se=>se.climber_id),z=b.filter(se=>R.includes(se.id));Y.useEffect(()=>{const se=setInterval(()=>{O(l.id)},5e3);return()=>clearInterval(se)},[l.id,O]);const re=async()=>{i(!0)},q=async se=>{const Se=se.filter(H=>!R.includes(H));for(const H of Se)await I(l.id,H);await O(l.id)},te=async se=>{await v({session_id:l.id,climber_id:se.climberId,grade:se.grade,status:se.status,points:se.points})};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs("button",{onClick:n,className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 mb-2",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Sessions"]}),f.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:l.name}),f.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600",children:[f.jsx("span",{children:ro(l.date)}),f.jsx("span",{children:""}),f.jsx("span",{children:l.location}),f.jsx("span",{children:""}),f.jsx("span",{className:"capitalize",children:l.status})]})]}),f.jsx("button",{onClick:re,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium",children:"+ Add Climbers"})]}),!y&&w>0&&f.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4",children:f.jsxs("p",{className:"text-amber-800 text-sm",children:[" Offline mode: ",w," ",w===1?"attempt":"attempts"," queued for sync"]})}),(g||x)&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:f.jsx("p",{className:"text-red-800 text-sm",children:g||x})}),s&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[f.jsx(_0,{climbers:b,classLists:T,selectedClimberIds:R,onSelectionChange:q,onAddNewClimber:()=>{alert("Add new climber functionality - to be implemented")},isLoading:E}),f.jsx("div",{className:"mt-4",children:f.jsx("button",{onClick:()=>i(!1),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors font-medium",children:"Done"})})]})}),f.jsx("div",{className:"border-b border-gray-200",children:f.jsxs("nav",{className:"-mb-px flex space-x-8",children:[f.jsx("button",{onClick:()=>u("track"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="track"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Track Attempts"}),f.jsxs("button",{onClick:()=>u("leaderboard"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Leaderboard (",L.filter(se=>se.total_points>0).length,")"]})]})}),a==="track"?f.jsx(w0,{sessionId:l.id,climbers:z,attempts:h,onRecordAttempt:te,onUpdateAttempt:()=>{},isLoading:p}):f.jsx(x0,{sessionClimbers:L,climbers:b,isLoading:E}),z.length===0&&f.jsxs("div",{className:"text-center py-12 bg-white border border-gray-200 rounded-lg",children:[f.jsx("p",{className:"text-gray-500 mb-4",children:"No climbers added to this session yet."}),f.jsx("button",{onClick:re,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium",children:"Add Climbers to Get Started"})]})]})}function j0(){const[l,n]=Y.useState("dashboard"),s=Qr(v=>v.selectedSession),i=Qr(v=>v.selectSession),a=Qr(v=>v.subscribeToSession),u=Qr(v=>v.unsubscribeFromSession),h=v=>{i(v),n("scoring")},p=()=>{n("dashboard"),i(null)};Y.useEffect(()=>(s&&a(s.id),()=>{u()}),[s?.id,a,u]);const g=s?{totalClimbs:s.total_climbs,activeClimbers:s.active_climbers,avgPoints:s.avg_points}:void 0;return f.jsx(Tp,{children:f.jsxs(o0,{showHomeButton:l==="scoring"||l==="active-session",onHomeClick:p,sessionName:s?.name,sessionDate:s?l0(s.date):void 0,sessionStats:g,children:[l==="dashboard"&&f.jsx(u0,{onOpenScoring:h}),l==="sessions"&&f.jsx(y0,{onSessionSelect:h}),l==="scoring"&&s&&f.jsx(p0,{}),l==="active-session"&&s&&f.jsx(S0,{session:s,onBackToSessions:p})]})})}class E0 extends Y.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("ErrorBoundary caught an error:",n,s)}resetError=()=>{this.setState({hasError:!1,error:null})};render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback(this.state.error,this.resetError):f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"max-w-md w-full bg-white border border-red-200 rounded-lg p-6 shadow-lg",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("svg",{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Something went wrong"}),f.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"An unexpected error occurred. Please try refreshing the page."}),this.state.error.message&&f.jsxs("details",{className:"mt-3",children:[f.jsx("summary",{className:"text-sm text-gray-500 cursor-pointer hover:text-gray-700",children:"Error details"}),f.jsx("pre",{className:"mt-2 text-xs bg-gray-50 p-3 rounded border border-gray-200 overflow-x-auto",children:this.state.error.message})]})]})]}),f.jsxs("div",{className:"mt-4 flex gap-3",children:[f.jsx("button",{onClick:this.resetError,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium",children:"Try Again"}),f.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors font-medium",children:"Reload Page"})]})]})}):this.props.children}}Np.createRoot(document.getElementById("root")).render(f.jsx(Zd.StrictMode,{children:f.jsx(E0,{children:f.jsx(j0,{})})}));
